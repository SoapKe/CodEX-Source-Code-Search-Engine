{"author": "tgalal", "code": "from yowsup.common import YowConstants\nfrom yowsup.layers.protocol_iq.protocolentities import ResultIqProtocolEntity\nfrom yowsup.structs import ProtocolTreeNode\nclass ResultRequestUploadIqProtocolEntity(ResultIqProtocolEntity):\n    def __init__(self, _id, url, ip = None, resumeOffset = 0, duplicate = False):\n        super(ResultRequestUploadIqProtocolEntity, self).__init__(_id = _id, _from = YowConstants.WHATSAPP_SERVER)\n        self.setUploadProps(url, ip, resumeOffset, duplicate)\n\n    def setUploadProps(self, url ,ip = None, resumeOffset = 0, duplicate = False):\n        self.url = url\n        self.ip = ip\n        self.resumeOffset = resumeOffset or 0\n        self.duplicate = duplicate\n\n    def isDuplicate(self):\n        return self.duplicate\n\n    def getUrl(self):\n        return self.url\n\n    def getResumeOffset(self):\n        return self.resumeOffset\n\n    def getIp(self):\n        return self.ip\n\n    def __str__(self):\n        out = super(ResultRequestUploadIqProtocolEntity, self).__str__()\n        out += \"URL: %s\\n\" % self.url\n        if self.ip:\n            out += \"IP: %s\\n\" % self.ip\n        return out\n\n    def toProtocolTreeNode(self):\n        node = super(ResultRequestUploadIqProtocolEntity, self).toProtocolTreeNode()\n\n        if not self.isDuplicate():\n            mediaNode = ProtocolTreeNode(\"media\", {\"url\": self.url})\n            if self.ip:\n                mediaNode[\"ip\"] = self.ip\n\n            if self.resumeOffset:\n                mediaNode[\"resume\"] = str(self.resumeOffset)\n        else:\n            mediaNode = ProtocolTreeNode(\"duplicate\", {\"url\": self.url})\n\n        node.addChild(mediaNode)\n        return node\n\n    @staticmethod\n    def fromProtocolTreeNode(node):\n        entity= ResultIqProtocolEntity.fromProtocolTreeNode(node)\n        entity.__class__ = ResultRequestUploadIqProtocolEntity\n        mediaNode = node.getChild(\"media\")\n        if mediaNode:\n            entity.setUploadProps(mediaNode[\"url\"], mediaNode[\"ip\"], mediaNode[\"resume\"])\n        else:\n            duplicateNode = node.getChild(\"duplicate\")\n            if duplicateNode:\n                entity.setUploadProps(duplicateNode[\"url\"], duplicateNode[\"ip\"], duplicate = True)\n        return entity\n", "comments": "", "content": "from yowsup.common import YowConstants\nfrom yowsup.layers.protocol_iq.protocolentities import ResultIqProtocolEntity\nfrom yowsup.structs import ProtocolTreeNode\nclass ResultRequestUploadIqProtocolEntity(ResultIqProtocolEntity):\n    def __init__(self, _id, url, ip = None, resumeOffset = 0, duplicate = False):\n        super(ResultRequestUploadIqProtocolEntity, self).__init__(_id = _id, _from = YowConstants.WHATSAPP_SERVER)\n        self.setUploadProps(url, ip, resumeOffset, duplicate)\n\n    def setUploadProps(self, url ,ip = None, resumeOffset = 0, duplicate = False):\n        self.url = url\n        self.ip = ip\n        self.resumeOffset = resumeOffset or 0\n        self.duplicate = duplicate\n\n    def isDuplicate(self):\n        return self.duplicate\n\n    def getUrl(self):\n        return self.url\n\n    def getResumeOffset(self):\n        return self.resumeOffset\n\n    def getIp(self):\n        return self.ip\n\n    def __str__(self):\n        out = super(ResultRequestUploadIqProtocolEntity, self).__str__()\n        out += \"URL: %s\\n\" % self.url\n        if self.ip:\n            out += \"IP: %s\\n\" % self.ip\n        return out\n\n    def toProtocolTreeNode(self):\n        node = super(ResultRequestUploadIqProtocolEntity, self).toProtocolTreeNode()\n\n        if not self.isDuplicate():\n            mediaNode = ProtocolTreeNode(\"media\", {\"url\": self.url})\n            if self.ip:\n                mediaNode[\"ip\"] = self.ip\n\n            if self.resumeOffset:\n                mediaNode[\"resume\"] = str(self.resumeOffset)\n        else:\n            mediaNode = ProtocolTreeNode(\"duplicate\", {\"url\": self.url})\n\n        node.addChild(mediaNode)\n        return node\n\n    @staticmethod\n    def fromProtocolTreeNode(node):\n        entity= ResultIqProtocolEntity.fromProtocolTreeNode(node)\n        entity.__class__ = ResultRequestUploadIqProtocolEntity\n        mediaNode = node.getChild(\"media\")\n        if mediaNode:\n            entity.setUploadProps(mediaNode[\"url\"], mediaNode[\"ip\"], mediaNode[\"resume\"])\n        else:\n            duplicateNode = node.getChild(\"duplicate\")\n            if duplicateNode:\n                entity.setUploadProps(duplicateNode[\"url\"], duplicateNode[\"ip\"], duplicate = True)\n        return entity\n", "description": "The python WhatsApp library", "file_name": "iq_requestupload_result.py", "id": "faecb2117310992365522633d2501457", "language": "Python", "project_name": "yowsup", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/tgalal-yowsup/tgalal-yowsup-03795cc/yowsup/layers/protocol_media/protocolentities/iq_requestupload_result.py", "save_time": "", "source": "", "update_at": "2018-03-18T13:01:40Z", "url": "https://github.com/tgalal/yowsup", "wiki": true}