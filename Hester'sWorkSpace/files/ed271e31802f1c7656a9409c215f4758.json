{"author": "rg3", "code": "from __future__ import unicode_literals\n\nimport re\n\nfrom .common import InfoExtractor\nfrom .turner import TurnerBaseIE\nfrom ..utils import url_basename\n\n\nclass CNNIE(TurnerBaseIE):\n    _VALID_URL = r\n\n    _TESTS = [{\n        'url': 'http://edition.cnn.com/video/?/video/sports/2013/06/09/nadal-1-on-1.cnn',\n        'md5': '3e6121ea48df7e2259fe73a0628605c4',\n        'info_dict': {\n            'id': 'sports/2013/06/09/nadal-1-on-1.cnn',\n            'ext': 'mp4',\n            'title': 'Nadal wins 8th French Open title',\n            'description': 'World Sport\\'s Amanda Davies chats with 2013 French Open champion Rafael Nadal.',\n            'duration': 135,\n            'upload_date': '20130609',\n        },\n        'expected_warnings': ['Failed to download m3u8 information'],\n    }, {\n        'url': 'http://edition.cnn.com/video/?/video/us/2013/08/21/sot-student-gives-epic-speech.georgia-institute-of-technology&utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A+rss%2Fcnn_topstories+%28RSS%3A+Top+Stories%29',\n        'md5': 'b5cc60c60a3477d185af8f19a2a26f4e',\n        'info_dict': {\n            'id': 'us/2013/08/21/sot-student-gives-epic-speech.georgia-institute-of-technology',\n            'ext': 'mp4',\n            'title': \"Student's epic speech stuns new freshmen\",\n            'description': \"A Georgia Tech student welcomes the incoming freshmen with an epic speech backed by music from \\\"2001: A Space Odyssey.\\\"\",\n            'upload_date': '20130821',\n        },\n        'expected_warnings': ['Failed to download m3u8 information'],\n    }, {\n        'url': 'http://www.cnn.com/video/data/2.0/video/living/2014/12/22/growing-america-nashville-salemtown-board-episode-1.hln.html',\n        'md5': 'f14d02ebd264df951feb2400e2c25a1b',\n        'info_dict': {\n            'id': 'living/2014/12/22/growing-america-nashville-salemtown-board-episode-1.hln',\n            'ext': 'mp4',\n            'title': 'Nashville Ep. 1: Hand crafted skateboards',\n            'description': 'md5:e7223a503315c9f150acac52e76de086',\n            'upload_date': '20141222',\n        },\n        'expected_warnings': ['Failed to download m3u8 information'],\n    }, {\n        'url': 'http://money.cnn.com/video/news/2016/08/19/netflix-stunning-stats.cnnmoney/index.html',\n        'md5': '52a515dc1b0f001cd82e4ceda32be9d1',\n        'info_dict': {\n            'id': '/video/news/2016/08/19/netflix-stunning-stats.cnnmoney',\n            'ext': 'mp4',\n            'title': '5 stunning stats about Netflix',\n            'description': 'Did you know that Netflix has more than 80 million members? Here are five facts about the online video distributor that you probably didn\\'t know.',\n            'upload_date': '20160819',\n        },\n        'params': {\n            \n            'skip_download': True,\n        },\n    }, {\n        'url': 'http://cnn.com/video/?/video/politics/2015/03/27/pkg-arizona-senator-church-attendance-mandatory.ktvk',\n        'only_matching': True,\n    }, {\n        'url': 'http://cnn.com/video/?/video/us/2015/04/06/dnt-baker-refuses-anti-gay-order.wkmg',\n        'only_matching': True,\n    }, {\n        'url': 'http://edition.cnn.com/videos/arts/2016/04/21/olympic-games-cultural-a-z-brazil.cnn',\n        'only_matching': True,\n    }]\n\n    _CONFIG = {\n        \n        'edition': {\n            'data_src': 'http://edition.cnn.com/video/data/3.0/video/%s/index.xml',\n            'media_src': 'http://pmd.cdn.turner.com/cnn/big',\n        },\n        \n        'money': {\n            'data_src': 'http://money.cnn.com/video/data/4.0/video/%s.xml',\n            'media_src': 'http://ht3.cdn.turner.com/money/big',\n        },\n    }\n\n    def _extract_timestamp(self, video_data):\n        \n        return None\n\n    def _real_extract(self, url):\n        sub_domain, path, page_title = re.match(self._VALID_URL, url).groups()\n        if sub_domain not in ('money', 'edition'):\n            sub_domain = 'edition'\n        config = self._CONFIG[sub_domain]\n        return self._extract_cvp_info(\n            config['data_src'] % path, page_title, {\n                'default': {\n                    'media_src': config['media_src'],\n                }\n            })\n\n\nclass CNNBlogsIE(InfoExtractor):\n    _VALID_URL = r'https?://[^\\.]+\\.blogs\\.cnn\\.com/.+'\n    _TEST = {\n        'url': 'http://reliablesources.blogs.cnn.com/2014/02/09/criminalizing-journalism/',\n        'md5': '3e56f97b0b6ffb4b79f4ea0749551084',\n        'info_dict': {\n            'id': 'bestoftv/2014/02/09/criminalizing-journalism.cnn',\n            'ext': 'mp4',\n            'title': 'Criminalizing journalism?',\n            'description': 'Glenn Greenwald responds to comments made this week on Capitol Hill that journalists could be criminal accessories.',\n            'upload_date': '20140209',\n        },\n        'expected_warnings': ['Failed to download m3u8 information'],\n        'add_ie': ['CNN'],\n    }\n\n    def _real_extract(self, url):\n        webpage = self._download_webpage(url, url_basename(url))\n        cnn_url = self._html_search_regex(r'data-url=\"(.+?)\"', webpage, 'cnn url')\n        return {\n            '_type': 'url',\n            'url': cnn_url,\n            'ie_key': CNNIE.ie_key(),\n        }\n\n\nclass CNNArticleIE(InfoExtractor):\n    _VALID_URL = r'https?://(?:(?:edition|www)\\.)?cnn\\.com/(?!videos?/)'\n    _TEST = {\n        'url': 'http://www.cnn.com/2014/12/21/politics/obama-north-koreas-hack-not-war-but-cyber-vandalism/',\n        'md5': '689034c2a3d9c6dc4aa72d65a81efd01',\n        'info_dict': {\n            'id': 'bestoftv/2014/12/21/ip-north-korea-obama.cnn',\n            'ext': 'mp4',\n            'title': 'Obama: Cyberattack not an act of war',\n            'description': 'md5:0a802a40d2376f60e6b04c8d5bcebc4b',\n            'upload_date': '20141221',\n        },\n        'expected_warnings': ['Failed to download m3u8 information'],\n        'add_ie': ['CNN'],\n    }\n\n    def _real_extract(self, url):\n        webpage = self._download_webpage(url, url_basename(url))\n        cnn_url = self._html_search_regex(r\"video:\\s*'([^']+)'\", webpage, 'cnn url')\n        return {\n            '_type': 'url',\n            'url': 'http://cnn.com/video/?/video/' + cnn_url,\n            'ie_key': CNNIE.ie_key(),\n        }\n", "comments": "(?x)https?://(?:(?P<sub_domain>edition|www|money)\\.)?cnn\\.com/(?:video/(?:data/.+?|\\?)/)?videos?/\n        (?P<path>.+?/(?P<title>[^/]+?)(?:\\.(?:[a-z\\-]+)|(?=&)))\n)\n# m3u8 download\n# http://edition.cnn.com/.element/apps/cvp/3.0/cfg/spider/cnn/expansion/config.xml\n# http://money.cnn.com/.element/apps/cvp2/cfg/config.xml\n# TODO: fix timestamp extraction\n", "content": "from __future__ import unicode_literals\n\nimport re\n\nfrom .common import InfoExtractor\nfrom .turner import TurnerBaseIE\nfrom ..utils import url_basename\n\n\nclass CNNIE(TurnerBaseIE):\n    _VALID_URL = r'''(?x)https?://(?:(?P<sub_domain>edition|www|money)\\.)?cnn\\.com/(?:video/(?:data/.+?|\\?)/)?videos?/\n        (?P<path>.+?/(?P<title>[^/]+?)(?:\\.(?:[a-z\\-]+)|(?=&)))'''\n\n    _TESTS = [{\n        'url': 'http://edition.cnn.com/video/?/video/sports/2013/06/09/nadal-1-on-1.cnn',\n        'md5': '3e6121ea48df7e2259fe73a0628605c4',\n        'info_dict': {\n            'id': 'sports/2013/06/09/nadal-1-on-1.cnn',\n            'ext': 'mp4',\n            'title': 'Nadal wins 8th French Open title',\n            'description': 'World Sport\\'s Amanda Davies chats with 2013 French Open champion Rafael Nadal.',\n            'duration': 135,\n            'upload_date': '20130609',\n        },\n        'expected_warnings': ['Failed to download m3u8 information'],\n    }, {\n        'url': 'http://edition.cnn.com/video/?/video/us/2013/08/21/sot-student-gives-epic-speech.georgia-institute-of-technology&utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A+rss%2Fcnn_topstories+%28RSS%3A+Top+Stories%29',\n        'md5': 'b5cc60c60a3477d185af8f19a2a26f4e',\n        'info_dict': {\n            'id': 'us/2013/08/21/sot-student-gives-epic-speech.georgia-institute-of-technology',\n            'ext': 'mp4',\n            'title': \"Student's epic speech stuns new freshmen\",\n            'description': \"A Georgia Tech student welcomes the incoming freshmen with an epic speech backed by music from \\\"2001: A Space Odyssey.\\\"\",\n            'upload_date': '20130821',\n        },\n        'expected_warnings': ['Failed to download m3u8 information'],\n    }, {\n        'url': 'http://www.cnn.com/video/data/2.0/video/living/2014/12/22/growing-america-nashville-salemtown-board-episode-1.hln.html',\n        'md5': 'f14d02ebd264df951feb2400e2c25a1b',\n        'info_dict': {\n            'id': 'living/2014/12/22/growing-america-nashville-salemtown-board-episode-1.hln',\n            'ext': 'mp4',\n            'title': 'Nashville Ep. 1: Hand crafted skateboards',\n            'description': 'md5:e7223a503315c9f150acac52e76de086',\n            'upload_date': '20141222',\n        },\n        'expected_warnings': ['Failed to download m3u8 information'],\n    }, {\n        'url': 'http://money.cnn.com/video/news/2016/08/19/netflix-stunning-stats.cnnmoney/index.html',\n        'md5': '52a515dc1b0f001cd82e4ceda32be9d1',\n        'info_dict': {\n            'id': '/video/news/2016/08/19/netflix-stunning-stats.cnnmoney',\n            'ext': 'mp4',\n            'title': '5 stunning stats about Netflix',\n            'description': 'Did you know that Netflix has more than 80 million members? Here are five facts about the online video distributor that you probably didn\\'t know.',\n            'upload_date': '20160819',\n        },\n        'params': {\n            # m3u8 download\n            'skip_download': True,\n        },\n    }, {\n        'url': 'http://cnn.com/video/?/video/politics/2015/03/27/pkg-arizona-senator-church-attendance-mandatory.ktvk',\n        'only_matching': True,\n    }, {\n        'url': 'http://cnn.com/video/?/video/us/2015/04/06/dnt-baker-refuses-anti-gay-order.wkmg',\n        'only_matching': True,\n    }, {\n        'url': 'http://edition.cnn.com/videos/arts/2016/04/21/olympic-games-cultural-a-z-brazil.cnn',\n        'only_matching': True,\n    }]\n\n    _CONFIG = {\n        # http://edition.cnn.com/.element/apps/cvp/3.0/cfg/spider/cnn/expansion/config.xml\n        'edition': {\n            'data_src': 'http://edition.cnn.com/video/data/3.0/video/%s/index.xml',\n            'media_src': 'http://pmd.cdn.turner.com/cnn/big',\n        },\n        # http://money.cnn.com/.element/apps/cvp2/cfg/config.xml\n        'money': {\n            'data_src': 'http://money.cnn.com/video/data/4.0/video/%s.xml',\n            'media_src': 'http://ht3.cdn.turner.com/money/big',\n        },\n    }\n\n    def _extract_timestamp(self, video_data):\n        # TODO: fix timestamp extraction\n        return None\n\n    def _real_extract(self, url):\n        sub_domain, path, page_title = re.match(self._VALID_URL, url).groups()\n        if sub_domain not in ('money', 'edition'):\n            sub_domain = 'edition'\n        config = self._CONFIG[sub_domain]\n        return self._extract_cvp_info(\n            config['data_src'] % path, page_title, {\n                'default': {\n                    'media_src': config['media_src'],\n                }\n            })\n\n\nclass CNNBlogsIE(InfoExtractor):\n    _VALID_URL = r'https?://[^\\.]+\\.blogs\\.cnn\\.com/.+'\n    _TEST = {\n        'url': 'http://reliablesources.blogs.cnn.com/2014/02/09/criminalizing-journalism/',\n        'md5': '3e56f97b0b6ffb4b79f4ea0749551084',\n        'info_dict': {\n            'id': 'bestoftv/2014/02/09/criminalizing-journalism.cnn',\n            'ext': 'mp4',\n            'title': 'Criminalizing journalism?',\n            'description': 'Glenn Greenwald responds to comments made this week on Capitol Hill that journalists could be criminal accessories.',\n            'upload_date': '20140209',\n        },\n        'expected_warnings': ['Failed to download m3u8 information'],\n        'add_ie': ['CNN'],\n    }\n\n    def _real_extract(self, url):\n        webpage = self._download_webpage(url, url_basename(url))\n        cnn_url = self._html_search_regex(r'data-url=\"(.+?)\"', webpage, 'cnn url')\n        return {\n            '_type': 'url',\n            'url': cnn_url,\n            'ie_key': CNNIE.ie_key(),\n        }\n\n\nclass CNNArticleIE(InfoExtractor):\n    _VALID_URL = r'https?://(?:(?:edition|www)\\.)?cnn\\.com/(?!videos?/)'\n    _TEST = {\n        'url': 'http://www.cnn.com/2014/12/21/politics/obama-north-koreas-hack-not-war-but-cyber-vandalism/',\n        'md5': '689034c2a3d9c6dc4aa72d65a81efd01',\n        'info_dict': {\n            'id': 'bestoftv/2014/12/21/ip-north-korea-obama.cnn',\n            'ext': 'mp4',\n            'title': 'Obama: Cyberattack not an act of war',\n            'description': 'md5:0a802a40d2376f60e6b04c8d5bcebc4b',\n            'upload_date': '20141221',\n        },\n        'expected_warnings': ['Failed to download m3u8 information'],\n        'add_ie': ['CNN'],\n    }\n\n    def _real_extract(self, url):\n        webpage = self._download_webpage(url, url_basename(url))\n        cnn_url = self._html_search_regex(r\"video:\\s*'([^']+)'\", webpage, 'cnn url')\n        return {\n            '_type': 'url',\n            'url': 'http://cnn.com/video/?/video/' + cnn_url,\n            'ie_key': CNNIE.ie_key(),\n        }\n", "description": "Command-line program to download videos from YouTube.com and other video sites", "file_name": "cnn.py", "language": "Python", "project_name": "youtube-dl", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/rg3_youtube-dl/rg3-youtube-dl-6202f08/youtube_dl/extractor/cnn.py", "save_time": "", "source": "", "update_at": "2018-03-07T09:18:39Z", "url": "https://github.com/rg3/youtube-dl", "wiki": false}