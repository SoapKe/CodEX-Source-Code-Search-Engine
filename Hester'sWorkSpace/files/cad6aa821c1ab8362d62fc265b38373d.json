{"author": "nvbn", "code": "from thefuck.utils import for_app, memoize\nfrom thefuck.system import Path\n\npath_to_scm = {\n    '.git': 'git',\n    '.hg': 'hg',\n}\n\nwrong_scm_patterns = {\n    'git': 'fatal: Not a git repository',\n    'hg': 'abort: no repository found',\n}\n\n\n@memoize\ndef _get_actual_scm():\n    for path, scm in path_to_scm.items():\n        if Path(path).is_dir():\n            return scm\n\n\n@for_app(*wrong_scm_patterns.keys())\ndef match(command):\n    scm = command.script_parts[0]\n    pattern = wrong_scm_patterns[scm]\n\n    return pattern in command.output and _get_actual_scm()\n\n\ndef get_new_command(command):\n    scm = _get_actual_scm()\n    return u' '.join([scm] + command.script_parts[1:])\n", "comments": "", "content": "from thefuck.utils import for_app, memoize\nfrom thefuck.system import Path\n\npath_to_scm = {\n    '.git': 'git',\n    '.hg': 'hg',\n}\n\nwrong_scm_patterns = {\n    'git': 'fatal: Not a git repository',\n    'hg': 'abort: no repository found',\n}\n\n\n@memoize\ndef _get_actual_scm():\n    for path, scm in path_to_scm.items():\n        if Path(path).is_dir():\n            return scm\n\n\n@for_app(*wrong_scm_patterns.keys())\ndef match(command):\n    scm = command.script_parts[0]\n    pattern = wrong_scm_patterns[scm]\n\n    return pattern in command.output and _get_actual_scm()\n\n\ndef get_new_command(command):\n    scm = _get_actual_scm()\n    return u' '.join([scm] + command.script_parts[1:])\n", "description": "Magnificent app which corrects your previous console command.", "file_name": "scm_correction.py", "language": "Python", "project_name": "thefuck", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/nvbn_thefuck/nvbn-thefuck-284d49d/thefuck/rules/scm_correction.py", "save_time": "", "source": "", "update_at": "2018-03-07T09:34:29Z", "url": "https://github.com/nvbn/thefuck", "wiki": true}