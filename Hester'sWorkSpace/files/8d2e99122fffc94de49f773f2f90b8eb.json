{"author": "odoo", "code": "# -*- coding: utf-8 -*-\n\n\nfrom . import controllers\nfrom . import models\nfrom . import wizard\nfrom . import report\n\nfrom odoo import api, SUPERUSER_ID\n\nSYSCOHADA_LIST = ['BJ', 'BF', 'CM', 'CF', 'KM', 'CG', 'CI', 'GA', 'GN', 'GW', 'GQ', 'ML', 'NE', 'CD', 'SN', 'TD', 'TG']\n\ndef _auto_install_l10n(cr, registry):\n    #check the country of the main company (only) and eventually load some module needed in that country\n    env = api.Environment(cr, SUPERUSER_ID, {})\n    country_code = env.user.company_id.country_id.code\n    if country_code:\n        #auto install localization module(s) if available\n        module_list = []\n        if country_code in SYSCOHADA_LIST:\n            \n            module_list.append('l10n_syscohada')\n        elif country_code == 'GB':\n            module_list.append('l10n_uk')\n        elif country_code == 'DE':\n            module_list.append('l10n_de_skr03')\n            module_list.append('l10n_de_skr04')\n        else:\n            if env['ir.module.module'].search([('name', '=', 'l10n_' + country_code.lower())]):\n                module_list.append('l10n_' + country_code.lower())\n            else:\n                module_list.append('l10n_generic_coa')\n        if country_code == 'US':\n            module_list.append('account_plaid')\n            module_list.append('account_check_printing')\n        if country_code in ['US', 'AU', 'NZ', 'CA', 'CO', 'EC', 'ES', 'FR', 'IN', 'MX', 'UK']:\n            module_list.append('account_yodlee')\n        if country_code in SYSCOHADA_LIST + [\n            'AT', 'BE', 'CA', 'CO', 'DE', 'EC', 'ES', 'ET', 'FR', 'GR', 'IT', 'LU', 'MX', 'NL', 'NO', \n            'PL', 'PT', 'RO', 'SI', 'TR', 'UK', 'VE', 'VN'\n            ]:\n            module_list.append('base_vat')\n\n        \n        europe = env.ref('base.europe', raise_if_not_found=False)\n        if europe:\n            europe_country_codes = [x.code for x in europe.country_ids]\n            if country_code in europe_country_codes:\n                module_list.append('account_sepa')\n        module_ids = env['ir.module.module'].search([('name', 'in', module_list), ('state', '=', 'uninstalled')])\n        module_ids.sudo().button_install()\n", "comments": "      coding  utf 8        part odoo  see license file full copyright licensing details    check country main company (only) eventually load module needed country   auto install localization module(s) available   countries using ohada chart accounts   european countries using sepa ", "content": "# -*- coding: utf-8 -*-\n# Part of Odoo. See LICENSE file for full copyright and licensing details.\n\nfrom . import controllers\nfrom . import models\nfrom . import wizard\nfrom . import report\n\nfrom odoo import api, SUPERUSER_ID\n\nSYSCOHADA_LIST = ['BJ', 'BF', 'CM', 'CF', 'KM', 'CG', 'CI', 'GA', 'GN', 'GW', 'GQ', 'ML', 'NE', 'CD', 'SN', 'TD', 'TG']\n\ndef _auto_install_l10n(cr, registry):\n    #check the country of the main company (only) and eventually load some module needed in that country\n    env = api.Environment(cr, SUPERUSER_ID, {})\n    country_code = env.user.company_id.country_id.code\n    if country_code:\n        #auto install localization module(s) if available\n        module_list = []\n        if country_code in SYSCOHADA_LIST:\n            #countries using OHADA Chart of Accounts\n            module_list.append('l10n_syscohada')\n        elif country_code == 'GB':\n            module_list.append('l10n_uk')\n        elif country_code == 'DE':\n            module_list.append('l10n_de_skr03')\n            module_list.append('l10n_de_skr04')\n        else:\n            if env['ir.module.module'].search([('name', '=', 'l10n_' + country_code.lower())]):\n                module_list.append('l10n_' + country_code.lower())\n            else:\n                module_list.append('l10n_generic_coa')\n        if country_code == 'US':\n            module_list.append('account_plaid')\n            module_list.append('account_check_printing')\n        if country_code in ['US', 'AU', 'NZ', 'CA', 'CO', 'EC', 'ES', 'FR', 'IN', 'MX', 'UK']:\n            module_list.append('account_yodlee')\n        if country_code in SYSCOHADA_LIST + [\n            'AT', 'BE', 'CA', 'CO', 'DE', 'EC', 'ES', 'ET', 'FR', 'GR', 'IT', 'LU', 'MX', 'NL', 'NO', \n            'PL', 'PT', 'RO', 'SI', 'TR', 'UK', 'VE', 'VN'\n            ]:\n            module_list.append('base_vat')\n\n        #european countries will be using SEPA\n        europe = env.ref('base.europe', raise_if_not_found=False)\n        if europe:\n            europe_country_codes = [x.code for x in europe.country_ids]\n            if country_code in europe_country_codes:\n                module_list.append('account_sepa')\n        module_ids = env['ir.module.module'].search([('name', 'in', module_list), ('state', '=', 'uninstalled')])\n        module_ids.sudo().button_install()\n", "description": "Odoo. Open Source Apps To Grow Your Business.", "file_name": "__init__.py", "id": "8d2e99122fffc94de49f773f2f90b8eb", "language": "Python", "project_name": "odoo", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/odoo-odoo/odoo-odoo-b25250f/addons/account/__init__.py", "save_time": "", "source": "", "update_at": "2018-03-18T08:30:22Z", "url": "https://github.com/odoo/odoo", "wiki": true}