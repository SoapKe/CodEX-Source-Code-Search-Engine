{"author": "ansible", "code": "import collections\nfrom io import BytesIO\n\nfrom ansible.modules.web_infrastructure.jenkins_plugin import JenkinsPlugin\n\n\ndef pass_function(*args, **kwargs):\n    pass\n\n\nGITHUB_DATA = {\"url\": u'https://api.github.com/repos/ansible/ansible',\n               \"response\": b\"\"\"\n{\n  \"id\": 3638964,\n  \"name\": \"ansible\",\n  \"full_name\": \"ansible/ansible\",\n  \"owner\": {\n    \"login\": \"ansible\",\n    \"id\": 1507452,\n    \"avatar_url\": \"https://avatars2.githubusercontent.com/u/1507452?v=4\",\n    \"gravatar_id\": \"\",\n    \"url\": \"https://api.github.com/users/ansible\",\n    \"html_url\": \"https://github.com/ansible\",\n    \"followers_url\": \"https://api.github.com/users/ansible/followers\",\n    \"following_url\": \"https://api.github.com/users/ansible/following{/other_user}\",\n    \"gists_url\": \"https://api.github.com/users/ansible/gists{/gist_id}\",\n    \"starred_url\": \"https://api.github.com/users/ansible/starred{/owner}{/repo}\",\n    \"subscriptions_url\": \"https://api.github.com/users/ansible/subscriptions\",\n    \"organizations_url\": \"https://api.github.com/users/ansible/orgs\",\n    \"repos_url\": \"https://api.github.com/users/ansible/repos\",\n    \"events_url\": \"https://api.github.com/users/ansible/events{/privacy}\",\n    \"received_events_url\": \"https://api.github.com/users/ansible/received_events\",\n    \"type\": \"Organization\",\n    \"site_admin\": false\n  },\n  \"private\": false,\n  \"html_url\": \"https://github.com/ansible/ansible\",\n  \"description\": \"Ansible is a radically simple IT automation platform that makes your applications and systems easier to deploy.\",\n  \"fork\": false,\n  \"url\": \"https://api.github.com/repos/ansible/ansible\",\n  \"forks_url\": \"https://api.github.com/repos/ansible/ansible/forks\",\n  \"keys_url\": \"https://api.github.com/repos/ansible/ansible/keys{/key_id}\",\n  \"collaborators_url\": \"https://api.github.com/repos/ansible/ansible/collaborators{/collaborator}\",\n  \"teams_url\": \"https://api.github.com/repos/ansible/ansible/teams\",\n  \"hooks_url\": \"https://api.github.com/repos/ansible/ansible/hooks\",\n  \"issue_events_url\": \"https://api.github.com/repos/ansible/ansible/issues/events{/number}\",\n  \"events_url\": \"https://api.github.com/repos/ansible/ansible/events\",\n  \"assignees_url\": \"https://api.github.com/repos/ansible/ansible/assignees{/user}\",\n  \"branches_url\": \"https://api.github.com/repos/ansible/ansible/branches{/branch}\",\n  \"tags_url\": \"https://api.github.com/repos/ansible/ansible/tags\",\n  \"blobs_url\": \"https://api.github.com/repos/ansible/ansible/git/blobs{/sha}\",\n  \"git_tags_url\": \"https://api.github.com/repos/ansible/ansible/git/tags{/sha}\",\n  \"git_refs_url\": \"https://api.github.com/repos/ansible/ansible/git/refs{/sha}\",\n  \"trees_url\": \"https://api.github.com/repos/ansible/ansible/git/trees{/sha}\",\n  \"statuses_url\": \"https://api.github.com/repos/ansible/ansible/statuses/{sha}\",\n  \"languages_url\": \"https://api.github.com/repos/ansible/ansible/languages\",\n  \"stargazers_url\": \"https://api.github.com/repos/ansible/ansible/stargazers\",\n  \"contributors_url\": \"https://api.github.com/repos/ansible/ansible/contributors\",\n  \"subscribers_url\": \"https://api.github.com/repos/ansible/ansible/subscribers\",\n  \"subscription_url\": \"https://api.github.com/repos/ansible/ansible/subscription\",\n  \"commits_url\": \"https://api.github.com/repos/ansible/ansible/commits{/sha}\",\n  \"git_commits_url\": \"https://api.github.com/repos/ansible/ansible/git/commits{/sha}\",\n  \"comments_url\": \"https://api.github.com/repos/ansible/ansible/comments{/number}\",\n  \"issue_comment_url\": \"https://api.github.com/repos/ansible/ansible/issues/comments{/number}\",\n  \"contents_url\": \"https://api.github.com/repos/ansible/ansible/contents/{+path}\",\n  \"compare_url\": \"https://api.github.com/repos/ansible/ansible/compare/{base}...{head}\",\n  \"merges_url\": \"https://api.github.com/repos/ansible/ansible/merges\",\n  \"archive_url\": \"https://api.github.com/repos/ansible/ansible/{archive_format}{/ref}\",\n  \"downloads_url\": \"https://api.github.com/repos/ansible/ansible/downloads\",\n  \"issues_url\": \"https://api.github.com/repos/ansible/ansible/issues{/number}\",\n  \"pulls_url\": \"https://api.github.com/repos/ansible/ansible/pulls{/number}\",\n  \"milestones_url\": \"https://api.github.com/repos/ansible/ansible/milestones{/number}\",\n  \"notifications_url\": \"https://api.github.com/repos/ansible/ansible/notifications{?since,all,participating}\",\n  \"labels_url\": \"https://api.github.com/repos/ansible/ansible/labels{/name}\",\n  \"releases_url\": \"https://api.github.com/repos/ansible/ansible/releases{/id}\",\n  \"deployments_url\": \"https://api.github.com/repos/ansible/ansible/deployments\",\n  \"created_at\": \"2012-03-06T14:58:02Z\",\n  \"updated_at\": \"2017-09-19T18:10:54Z\",\n  \"pushed_at\": \"2017-09-19T18:04:51Z\",\n  \"git_url\": \"git://github.com/ansible/ansible.git\",\n  \"ssh_url\": \"git@github.com:ansible/ansible.git\",\n  \"clone_url\": \"https://github.com/ansible/ansible.git\",\n  \"svn_url\": \"https://github.com/ansible/ansible\",\n  \"homepage\": \"https://www.ansible.com/\",\n  \"size\": 91174,\n  \"stargazers_count\": 25552,\n  \"watchers_count\": 25552,\n  \"language\": \"Python\",\n  \"has_issues\": true,\n  \"has_projects\": true,\n  \"has_downloads\": true,\n  \"has_wiki\": false,\n  \"has_pages\": false,\n  \"forks_count\": 8893,\n  \"mirror_url\": null,\n  \"open_issues_count\": 4283,\n  \"forks\": 8893,\n  \"open_issues\": 4283,\n  \"watchers\": 25552,\n  \"default_branch\": \"devel\",\n  \"organization\": {\n    \"login\": \"ansible\",\n    \"id\": 1507452,\n    \"avatar_url\": \"https://avatars2.githubusercontent.com/u/1507452?v=4\",\n    \"gravatar_id\": \"\",\n    \"url\": \"https://api.github.com/users/ansible\",\n    \"html_url\": \"https://github.com/ansible\",\n    \"followers_url\": \"https://api.github.com/users/ansible/followers\",\n    \"following_url\": \"https://api.github.com/users/ansible/following{/other_user}\",\n    \"gists_url\": \"https://api.github.com/users/ansible/gists{/gist_id}\",\n    \"starred_url\": \"https://api.github.com/users/ansible/starred{/owner}{/repo}\",\n    \"subscriptions_url\": \"https://api.github.com/users/ansible/subscriptions\",\n    \"organizations_url\": \"https://api.github.com/users/ansible/orgs\",\n    \"repos_url\": \"https://api.github.com/users/ansible/repos\",\n    \"events_url\": \"https://api.github.com/users/ansible/events{/privacy}\",\n    \"received_events_url\": \"https://api.github.com/users/ansible/received_events\",\n    \"type\": \"Organization\",\n    \"site_admin\": false\n  },\n  \"network_count\": 8893,\n  \"subscribers_count\": 1733\n}\n\"\"\"\n               }\n\n\ndef test__get_json_data(mocker):\n    \"test the json conversion of _get_url_data\"\n\n    timeout = 30\n    params = {\n        'url': GITHUB_DATA['url'],\n        'timeout': timeout\n    }\n    module = mocker.Mock()\n    module.params = params\n\n    JenkinsPlugin._csrf_enabled = pass_function\n    JenkinsPlugin._get_installed_plugins = pass_function\n    JenkinsPlugin._get_url_data = mocker.Mock()\n    JenkinsPlugin._get_url_data.return_value = BytesIO(GITHUB_DATA['response'])\n    jenkins_plugin = JenkinsPlugin(module)\n\n    json_data = jenkins_plugin._get_json_data(\n        \"{url}\".format(url=GITHUB_DATA['url']),\n        'CSRF')\n\n    assert isinstance(json_data, collections.Mapping)\n", "comments": "         id   3638964     name    ansible      full name    ansible ansible      owner          login    ansible        id   1507452       avatar url    https   avatars2 githubusercontent com u 1507452 v 4        gravatar id            url    https   api github com users ansible        html url    https   github com ansible        followers url    https   api github com users ansible followers        following url    https   api github com users ansible following  user         gists url    https   api github com users ansible gists  gist id         starred url    https   api github com users ansible starred  owner   repo         subscriptions url    https   api github com users ansible subscriptions        organizations url    https   api github com users ansible orgs        repos url    https   api github com users ansible repos        events url    https   api github com users ansible events  privacy         received events url    https   api github com users ansible received events        type    organization        site admin   false         private   false     html url    https   github com ansible ansible      description    ansible radically simple it automation platform makes applications systems easier deploy       fork   false     url    https   api github com repos ansible ansible      forks url    https   api github com repos ansible ansible forks      keys url    https   api github com repos ansible ansible keys  key id       collaborators url    https   api github com repos ansible ansible collaborators  collaborator       teams url    https   api github com repos ansible ansible teams      hooks url    https   api github com repos ansible ansible hooks      issue events url    https   api github com repos ansible ansible issues events  number       events url    https   api github com repos ansible ansible events      assignees url    https   api github com repos ansible ansible assignees  user       branches url    https   api github com repos ansible ansible branches  branch       tags url    https   api github com repos ansible ansible tags      blobs url    https   api github com repos ansible ansible git blobs  sha       git tags url    https   api github com repos ansible ansible git tags  sha       git refs url    https   api github com repos ansible ansible git refs  sha       trees url    https   api github com repos ansible ansible git trees  sha       statuses url    https   api github com repos ansible ansible statuses  sha       languages url    https   api github com repos ansible ansible languages      stargazers url    https   api github com repos ansible ansible stargazers      contributors url    https   api github com repos ansible ansible contributors      subscribers url    https   api github com repos ansible ansible subscribers      subscription url    https   api github com repos ansible ansible subscription      commits url    https   api github com repos ansible ansible commits  sha       git commits url    https   api github com repos ansible ansible git commits  sha       comments url    https   api github com repos ansible ansible comments  number       issue comment url    https   api github com repos ansible ansible issues comments  number       contents url    https   api github com repos ansible ansible contents   path       compare url    https   api github com repos ansible ansible compare  base     head       merges url    https   api github com repos ansible ansible merges      archive url    https   api github com repos ansible ansible  archive format   ref       downloads url    https   api github com repos ansible ansible downloads      issues url    https   api github com repos ansible ansible issues  number       pulls url    https   api github com repos ansible ansible pulls  number       milestones url    https   api github com repos ansible ansible milestones  number       notifications url    https   api github com repos ansible ansible notifications  since participating       labels url    https   api github com repos ansible ansible labels  name       releases url    https   api github com repos ansible ansible releases  id       deployments url    https   api github com repos ansible ansible deployments      created    2012 03 06t14 58 02z      updated    2017 09 19t18 10 54z      pushed    2017 09 19t18 04 51z      git url    git   github com ansible ansible git      ssh url    git github com ansible ansible git      clone url    https   github com ansible ansible git      svn url    https   github com ansible ansible      homepage    https   www ansible com       size   91174     stargazers count   25552     watchers count   25552     language    python      issues   true     projects   true     downloads   true     wiki   false     pages   false     forks count   8893     mirror url   null     open issues count   4283     forks   8893     open issues   4283     watchers   25552     default branch    devel      organization          login    ansible        id   1507452       avatar url    https   avatars2 githubusercontent com u 1507452 v 4        gravatar id            url    https   api github com users ansible        html url    https   github com ansible        followers url    https   api github com users ansible followers        following url    https   api github com users ansible following  user         gists url    https   api github com users ansible gists  gist id         starred url    https   api github com users ansible starred  owner   repo         subscriptions url    https   api github com users ansible subscriptions        organizations url    https   api github com users ansible orgs        repos url    https   api github com users ansible repos        events url    https   api github com users ansible events  privacy         received events url    https   api github com users ansible received events        type    organization        site admin   false         network count   8893     subscribers count   1733       ", "content": "import collections\nfrom io import BytesIO\n\nfrom ansible.modules.web_infrastructure.jenkins_plugin import JenkinsPlugin\n\n\ndef pass_function(*args, **kwargs):\n    pass\n\n\nGITHUB_DATA = {\"url\": u'https://api.github.com/repos/ansible/ansible',\n               \"response\": b\"\"\"\n{\n  \"id\": 3638964,\n  \"name\": \"ansible\",\n  \"full_name\": \"ansible/ansible\",\n  \"owner\": {\n    \"login\": \"ansible\",\n    \"id\": 1507452,\n    \"avatar_url\": \"https://avatars2.githubusercontent.com/u/1507452?v=4\",\n    \"gravatar_id\": \"\",\n    \"url\": \"https://api.github.com/users/ansible\",\n    \"html_url\": \"https://github.com/ansible\",\n    \"followers_url\": \"https://api.github.com/users/ansible/followers\",\n    \"following_url\": \"https://api.github.com/users/ansible/following{/other_user}\",\n    \"gists_url\": \"https://api.github.com/users/ansible/gists{/gist_id}\",\n    \"starred_url\": \"https://api.github.com/users/ansible/starred{/owner}{/repo}\",\n    \"subscriptions_url\": \"https://api.github.com/users/ansible/subscriptions\",\n    \"organizations_url\": \"https://api.github.com/users/ansible/orgs\",\n    \"repos_url\": \"https://api.github.com/users/ansible/repos\",\n    \"events_url\": \"https://api.github.com/users/ansible/events{/privacy}\",\n    \"received_events_url\": \"https://api.github.com/users/ansible/received_events\",\n    \"type\": \"Organization\",\n    \"site_admin\": false\n  },\n  \"private\": false,\n  \"html_url\": \"https://github.com/ansible/ansible\",\n  \"description\": \"Ansible is a radically simple IT automation platform that makes your applications and systems easier to deploy.\",\n  \"fork\": false,\n  \"url\": \"https://api.github.com/repos/ansible/ansible\",\n  \"forks_url\": \"https://api.github.com/repos/ansible/ansible/forks\",\n  \"keys_url\": \"https://api.github.com/repos/ansible/ansible/keys{/key_id}\",\n  \"collaborators_url\": \"https://api.github.com/repos/ansible/ansible/collaborators{/collaborator}\",\n  \"teams_url\": \"https://api.github.com/repos/ansible/ansible/teams\",\n  \"hooks_url\": \"https://api.github.com/repos/ansible/ansible/hooks\",\n  \"issue_events_url\": \"https://api.github.com/repos/ansible/ansible/issues/events{/number}\",\n  \"events_url\": \"https://api.github.com/repos/ansible/ansible/events\",\n  \"assignees_url\": \"https://api.github.com/repos/ansible/ansible/assignees{/user}\",\n  \"branches_url\": \"https://api.github.com/repos/ansible/ansible/branches{/branch}\",\n  \"tags_url\": \"https://api.github.com/repos/ansible/ansible/tags\",\n  \"blobs_url\": \"https://api.github.com/repos/ansible/ansible/git/blobs{/sha}\",\n  \"git_tags_url\": \"https://api.github.com/repos/ansible/ansible/git/tags{/sha}\",\n  \"git_refs_url\": \"https://api.github.com/repos/ansible/ansible/git/refs{/sha}\",\n  \"trees_url\": \"https://api.github.com/repos/ansible/ansible/git/trees{/sha}\",\n  \"statuses_url\": \"https://api.github.com/repos/ansible/ansible/statuses/{sha}\",\n  \"languages_url\": \"https://api.github.com/repos/ansible/ansible/languages\",\n  \"stargazers_url\": \"https://api.github.com/repos/ansible/ansible/stargazers\",\n  \"contributors_url\": \"https://api.github.com/repos/ansible/ansible/contributors\",\n  \"subscribers_url\": \"https://api.github.com/repos/ansible/ansible/subscribers\",\n  \"subscription_url\": \"https://api.github.com/repos/ansible/ansible/subscription\",\n  \"commits_url\": \"https://api.github.com/repos/ansible/ansible/commits{/sha}\",\n  \"git_commits_url\": \"https://api.github.com/repos/ansible/ansible/git/commits{/sha}\",\n  \"comments_url\": \"https://api.github.com/repos/ansible/ansible/comments{/number}\",\n  \"issue_comment_url\": \"https://api.github.com/repos/ansible/ansible/issues/comments{/number}\",\n  \"contents_url\": \"https://api.github.com/repos/ansible/ansible/contents/{+path}\",\n  \"compare_url\": \"https://api.github.com/repos/ansible/ansible/compare/{base}...{head}\",\n  \"merges_url\": \"https://api.github.com/repos/ansible/ansible/merges\",\n  \"archive_url\": \"https://api.github.com/repos/ansible/ansible/{archive_format}{/ref}\",\n  \"downloads_url\": \"https://api.github.com/repos/ansible/ansible/downloads\",\n  \"issues_url\": \"https://api.github.com/repos/ansible/ansible/issues{/number}\",\n  \"pulls_url\": \"https://api.github.com/repos/ansible/ansible/pulls{/number}\",\n  \"milestones_url\": \"https://api.github.com/repos/ansible/ansible/milestones{/number}\",\n  \"notifications_url\": \"https://api.github.com/repos/ansible/ansible/notifications{?since,all,participating}\",\n  \"labels_url\": \"https://api.github.com/repos/ansible/ansible/labels{/name}\",\n  \"releases_url\": \"https://api.github.com/repos/ansible/ansible/releases{/id}\",\n  \"deployments_url\": \"https://api.github.com/repos/ansible/ansible/deployments\",\n  \"created_at\": \"2012-03-06T14:58:02Z\",\n  \"updated_at\": \"2017-09-19T18:10:54Z\",\n  \"pushed_at\": \"2017-09-19T18:04:51Z\",\n  \"git_url\": \"git://github.com/ansible/ansible.git\",\n  \"ssh_url\": \"git@github.com:ansible/ansible.git\",\n  \"clone_url\": \"https://github.com/ansible/ansible.git\",\n  \"svn_url\": \"https://github.com/ansible/ansible\",\n  \"homepage\": \"https://www.ansible.com/\",\n  \"size\": 91174,\n  \"stargazers_count\": 25552,\n  \"watchers_count\": 25552,\n  \"language\": \"Python\",\n  \"has_issues\": true,\n  \"has_projects\": true,\n  \"has_downloads\": true,\n  \"has_wiki\": false,\n  \"has_pages\": false,\n  \"forks_count\": 8893,\n  \"mirror_url\": null,\n  \"open_issues_count\": 4283,\n  \"forks\": 8893,\n  \"open_issues\": 4283,\n  \"watchers\": 25552,\n  \"default_branch\": \"devel\",\n  \"organization\": {\n    \"login\": \"ansible\",\n    \"id\": 1507452,\n    \"avatar_url\": \"https://avatars2.githubusercontent.com/u/1507452?v=4\",\n    \"gravatar_id\": \"\",\n    \"url\": \"https://api.github.com/users/ansible\",\n    \"html_url\": \"https://github.com/ansible\",\n    \"followers_url\": \"https://api.github.com/users/ansible/followers\",\n    \"following_url\": \"https://api.github.com/users/ansible/following{/other_user}\",\n    \"gists_url\": \"https://api.github.com/users/ansible/gists{/gist_id}\",\n    \"starred_url\": \"https://api.github.com/users/ansible/starred{/owner}{/repo}\",\n    \"subscriptions_url\": \"https://api.github.com/users/ansible/subscriptions\",\n    \"organizations_url\": \"https://api.github.com/users/ansible/orgs\",\n    \"repos_url\": \"https://api.github.com/users/ansible/repos\",\n    \"events_url\": \"https://api.github.com/users/ansible/events{/privacy}\",\n    \"received_events_url\": \"https://api.github.com/users/ansible/received_events\",\n    \"type\": \"Organization\",\n    \"site_admin\": false\n  },\n  \"network_count\": 8893,\n  \"subscribers_count\": 1733\n}\n\"\"\"\n               }\n\n\ndef test__get_json_data(mocker):\n    \"test the json conversion of _get_url_data\"\n\n    timeout = 30\n    params = {\n        'url': GITHUB_DATA['url'],\n        'timeout': timeout\n    }\n    module = mocker.Mock()\n    module.params = params\n\n    JenkinsPlugin._csrf_enabled = pass_function\n    JenkinsPlugin._get_installed_plugins = pass_function\n    JenkinsPlugin._get_url_data = mocker.Mock()\n    JenkinsPlugin._get_url_data.return_value = BytesIO(GITHUB_DATA['response'])\n    jenkins_plugin = JenkinsPlugin(module)\n\n    json_data = jenkins_plugin._get_json_data(\n        \"{url}\".format(url=GITHUB_DATA['url']),\n        'CSRF')\n\n    assert isinstance(json_data, collections.Mapping)\n", "description": "Ansible is a radically simple IT automation platform that makes your applications and systems easier to deploy. Avoid writing scripts or custom code to deploy and update your applications\u2014 automate in a language that approaches plain English, using SSH, with no agents to install on remote systems.", "file_name": "test_jenkins_plugin.py", "id": "b6858339bc1c54df6610e29665a12a94", "language": "Python", "project_name": "ansible", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/ansible-ansible/ansible-ansible-d30554b/test/units/modules/web_infrastructure/test_jenkins_plugin.py", "save_time": "", "source": "", "update_at": "2018-03-18T14:08:28Z", "url": "https://github.com/ansible/ansible", "wiki": false}