{"author": "odoo", "code": "# -*- coding: utf-8 -*-\n\n\nfrom odoo import api, fields, models\n\n\nclass HrEmployee(models.Model):\n    _inherit = \"hr.employee\"\n\n    goal_ids = fields.One2many('gamification.goal', string='Employee HR Goals', compute='_compute_employee_goals')\n    badge_ids = fields.One2many(\n        'gamification.badge.user', string='Employee Badges', compute='_compute_employee_badges',\n        help=\"All employee badges, linked to the employee either directly or through the user\"\n    )\n    has_badges = fields.Boolean(compute='_compute_employee_badges')\n    \n    direct_badge_ids = fields.One2many(\n        'gamification.badge.user', 'employee_id',\n        help=\"Badges directly linked to the employee\")\n\n    @api.depends('user_id.goal_ids.challenge_id.category')\n    def _compute_employee_goals(self):\n        for employee in self:\n            employee.goal_ids = self.env['gamification.goal'].search([\n                ('user_id', '=', employee.user_id.id),\n                ('challenge_id.category', '=', 'hr'),\n            ])\n\n    @api.depends('direct_badge_ids', 'user_id.badge_ids.employee_id')\n    def _compute_employee_badges(self):\n        for employee in self:\n            badge_ids = self.env['gamification.badge.user'].search([\n                '|', ('employee_id', '=', employee.id),\n                     '&', ('employee_id', '=', False),\n                          ('user_id', '=', employee.user_id.id)\n            ])\n            employee.has_badges = bool(badge_ids)\n            employee.badge_ids = badge_ids\n\n\nclass ResUsers(models.Model):\n    _inherit = 'res.users'\n\n    goal_ids = fields.One2many('gamification.goal', 'user_id')\n    badge_ids = fields.One2many('gamification.badge.user', 'user_id')\n", "comments": "      coding  utf 8        part odoo  see license file full copyright licensing details     necessary correct dependencies badge ids badges ", "content": "# -*- coding: utf-8 -*-\n# Part of Odoo. See LICENSE file for full copyright and licensing details.\n\nfrom odoo import api, fields, models\n\n\nclass HrEmployee(models.Model):\n    _inherit = \"hr.employee\"\n\n    goal_ids = fields.One2many('gamification.goal', string='Employee HR Goals', compute='_compute_employee_goals')\n    badge_ids = fields.One2many(\n        'gamification.badge.user', string='Employee Badges', compute='_compute_employee_badges',\n        help=\"All employee badges, linked to the employee either directly or through the user\"\n    )\n    has_badges = fields.Boolean(compute='_compute_employee_badges')\n    # necessary for correct dependencies of badge_ids and has_badges\n    direct_badge_ids = fields.One2many(\n        'gamification.badge.user', 'employee_id',\n        help=\"Badges directly linked to the employee\")\n\n    @api.depends('user_id.goal_ids.challenge_id.category')\n    def _compute_employee_goals(self):\n        for employee in self:\n            employee.goal_ids = self.env['gamification.goal'].search([\n                ('user_id', '=', employee.user_id.id),\n                ('challenge_id.category', '=', 'hr'),\n            ])\n\n    @api.depends('direct_badge_ids', 'user_id.badge_ids.employee_id')\n    def _compute_employee_badges(self):\n        for employee in self:\n            badge_ids = self.env['gamification.badge.user'].search([\n                '|', ('employee_id', '=', employee.id),\n                     '&', ('employee_id', '=', False),\n                          ('user_id', '=', employee.user_id.id)\n            ])\n            employee.has_badges = bool(badge_ids)\n            employee.badge_ids = badge_ids\n\n\nclass ResUsers(models.Model):\n    _inherit = 'res.users'\n\n    goal_ids = fields.One2many('gamification.goal', 'user_id')\n    badge_ids = fields.One2many('gamification.badge.user', 'user_id')\n", "description": "Odoo. Open Source Apps To Grow Your Business.", "file_name": "hr_employee.py", "id": "a3bbb57c81d016709530c6cda27933ee", "language": "Python", "project_name": "odoo", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/odoo-odoo/odoo-odoo-b25250f/addons/hr_gamification/models/hr_employee.py", "save_time": "", "source": "", "update_at": "2018-03-18T08:30:22Z", "url": "https://github.com/odoo/odoo", "wiki": true}