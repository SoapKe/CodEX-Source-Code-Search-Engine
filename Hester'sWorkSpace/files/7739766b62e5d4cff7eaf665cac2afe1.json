{"author": "tgalal", "code": "from .iq_picture import PictureIqProtocolEntity\nfrom yowsup.structs import ProtocolTreeNode\nimport time\nclass SetPictureIqProtocolEntity(PictureIqProtocolEntity):\n    \n    def __init__(self, jid, previewData, pictureData, pictureId = None, _id = None):\n        super(SetPictureIqProtocolEntity, self).__init__(jid, _id, \"set\")\n        self.setSetPictureProps(previewData, pictureData, pictureId)\n\n    def setSetPictureProps(self, previewData, pictureData, pictureId = None):\n        self.setPictureData(pictureData)\n        self.setPictureId(pictureId or str(int(time.time())))\n        self.setPreviewData(previewData)\n\n    def setPictureData(self, pictureData):\n        self.pictureData = pictureData\n\n    def getPictureData(self):\n        return self.pictureData\n\n    def setPreviewData(self, previewData):\n        self.previewData = previewData\n\n    def getPreviewData(self):\n        return self.previewData\n\n    def setPictureId(self, pictureId):\n        self.pictureId = pictureId\n\n    def getPictureId(self):\n        return self.pictureId\n\n    def toProtocolTreeNode(self):\n        node = super(PictureIqProtocolEntity, self).toProtocolTreeNode()\n        attribs = {\"type\": \"image\", \"id\": self.pictureId}\n\n        pictureNode = ProtocolTreeNode(\"picture\", attribs, None, self.getPictureData())\n        previewNode = ProtocolTreeNode(\"picture\", {\"type\": \"preview\"}, None, self.getPreviewData())\n\n        node.addChild(pictureNode)\n        node.addChild(previewNode)\n\n        return node\n\n    @staticmethod\n    def fromProtocolTreeNode(node):\n        entity = PictureIqProtocolEntity.fromProtocolTreeNode(node)\n        entity.__class__ = SetPictureIqProtocolEntity\n\n        pictureNode = None\n        previewNode = None\n\n        for child in node.getAllChildren(\"picture\"):\n            nodeType = child.getAttributeValue(\"type\")\n            if nodeType == \"image\":\n                pictureNode = child\n            elif nodeType == \"preview\":\n                previewNode = child\n\n        entity.setSetPictureProps(previewNode.getData(), pictureNode.getData(), pictureNode.getAttributeValue(\"id\"))\n        return entity", "comments": "         iq type  set  id    id    xmlns  w profile picture     jid              picture type  image  id    another id               binary bytes picture type set              picture        iq      ", "content": "from .iq_picture import PictureIqProtocolEntity\nfrom yowsup.structs import ProtocolTreeNode\nimport time\nclass SetPictureIqProtocolEntity(PictureIqProtocolEntity):\n    '''\n    <iq type=\"set\" id=\"{{id}}\" xmlns=\"w:profile:picture\", to={{jid}}\">\n        <picture type=\"image\" id=\"{{another_id}}\">\n        {{Binary bytes of the picture when type is set.}}\n        </picture>\n    </iq>\n'''\n    def __init__(self, jid, previewData, pictureData, pictureId = None, _id = None):\n        super(SetPictureIqProtocolEntity, self).__init__(jid, _id, \"set\")\n        self.setSetPictureProps(previewData, pictureData, pictureId)\n\n    def setSetPictureProps(self, previewData, pictureData, pictureId = None):\n        self.setPictureData(pictureData)\n        self.setPictureId(pictureId or str(int(time.time())))\n        self.setPreviewData(previewData)\n\n    def setPictureData(self, pictureData):\n        self.pictureData = pictureData\n\n    def getPictureData(self):\n        return self.pictureData\n\n    def setPreviewData(self, previewData):\n        self.previewData = previewData\n\n    def getPreviewData(self):\n        return self.previewData\n\n    def setPictureId(self, pictureId):\n        self.pictureId = pictureId\n\n    def getPictureId(self):\n        return self.pictureId\n\n    def toProtocolTreeNode(self):\n        node = super(PictureIqProtocolEntity, self).toProtocolTreeNode()\n        attribs = {\"type\": \"image\", \"id\": self.pictureId}\n\n        pictureNode = ProtocolTreeNode(\"picture\", attribs, None, self.getPictureData())\n        previewNode = ProtocolTreeNode(\"picture\", {\"type\": \"preview\"}, None, self.getPreviewData())\n\n        node.addChild(pictureNode)\n        node.addChild(previewNode)\n\n        return node\n\n    @staticmethod\n    def fromProtocolTreeNode(node):\n        entity = PictureIqProtocolEntity.fromProtocolTreeNode(node)\n        entity.__class__ = SetPictureIqProtocolEntity\n\n        pictureNode = None\n        previewNode = None\n\n        for child in node.getAllChildren(\"picture\"):\n            nodeType = child.getAttributeValue(\"type\")\n            if nodeType == \"image\":\n                pictureNode = child\n            elif nodeType == \"preview\":\n                previewNode = child\n\n        entity.setSetPictureProps(previewNode.getData(), pictureNode.getData(), pictureNode.getAttributeValue(\"id\"))\n        return entity", "description": "The python WhatsApp library", "file_name": "iq_picture_set.py", "id": "7739766b62e5d4cff7eaf665cac2afe1", "language": "Python", "project_name": "yowsup", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/tgalal-yowsup/tgalal-yowsup-03795cc/yowsup/layers/protocol_profiles/protocolentities/iq_picture_set.py", "save_time": "", "source": "", "update_at": "2018-03-18T13:01:40Z", "url": "https://github.com/tgalal/yowsup", "wiki": true}