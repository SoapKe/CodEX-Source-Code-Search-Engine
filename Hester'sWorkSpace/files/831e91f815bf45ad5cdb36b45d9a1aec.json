{"author": "rg3", "code": "\nfrom __future__ import unicode_literals\n\nimport re\n\nfrom .common import InfoExtractor\nfrom ..utils import ExtractorError\nfrom .rutv import RUTVIE\n\n\nclass VestiIE(InfoExtractor):\n    IE_DESC = '\u0412\u0435\u0441\u0442\u0438.Ru'\n    _VALID_URL = r'https?://(?:.+?\\.)?vesti\\.ru/(?P<id>.+)'\n\n    _TESTS = [\n        {\n            'url': 'http://www.vesti.ru/videos?vid=575582&cid=1',\n            'info_dict': {\n                'id': '765035',\n                'ext': 'mp4',\n                'title': '\u0412\u0435\u0441\u0442\u0438.net: \u0431\u0438\u0442\u043a\u043e\u0438\u043d\u044b \u0432 \u0420\u043e\u0441\u0441\u0438\u0438 \u043d\u0435 \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0437\u0430\u043a\u043e\u043d\u043d\u044b\u043c\u0438',\n                'description': 'md5:d4bb3859dc1177b28a94c5014c35a36b',\n                'duration': 302,\n            },\n            'params': {\n                \n                'skip_download': True,\n            },\n        },\n        {\n            'url': 'http://www.vesti.ru/doc.html?id=1349233',\n            'info_dict': {\n                'id': '773865',\n                'ext': 'mp4',\n                'title': '\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438 \u043c\u0438\u0442\u0438\u043d\u0433\u0430 \u0448\u0442\u0443\u0440\u043c\u0443\u044e\u0442 \u0414\u043e\u043d\u0435\u0446\u043a\u0443\u044e \u043e\u0431\u043b\u0430\u0441\u0442\u043d\u0443\u044e \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044e',\n                'description': 'md5:1a160e98b3195379b4c849f2f4958009',\n                'duration': 210,\n            },\n            'params': {\n                \n                'skip_download': True,\n            },\n        },\n        {\n            'url': 'http://www.vesti.ru/only_video.html?vid=576180',\n            'info_dict': {\n                'id': '766048',\n                'ext': 'mp4',\n                'title': '\u0421\u0428\u0410 \u0437\u0430\u043c\u043e\u0440\u043e\u0437\u0438\u043b\u043e, \u0411\u0440\u0438\u0442\u0430\u043d\u0438\u044e \u0437\u0430\u0442\u043e\u043f\u0438\u043b\u043e',\n                'description': 'md5:f0ed0695ec05aed27c56a70a58dc4cc1',\n                'duration': 87,\n            },\n            'params': {\n                \n                'skip_download': True,\n            },\n        },\n        {\n            'url': 'http://hitech.vesti.ru/news/view/id/4000',\n            'info_dict': {\n                'id': '766888',\n                'ext': 'mp4',\n                'title': '\u0412\u0435\u0441\u0442\u0438.net: \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442-\u0433\u0438\u0433\u0430\u043d\u0442\u044b \u043d\u0430\u0447\u0430\u043b\u0438 \u043f\u0435\u0440\u0435\u0442\u044f\u0433\u0438\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u044b\u0445 \"\u043e\u0434\u0435\u044f\u043b\"',\n                'description': 'md5:65ddd47f9830c4f42ed6475f8730c995',\n                'duration': 279,\n            },\n            'params': {\n                \n                'skip_download': True,\n            },\n        },\n        {\n            'url': 'http://sochi2014.vesti.ru/video/index/video_id/766403',\n            'info_dict': {\n                'id': '766403',\n                'ext': 'mp4',\n                'title': 'XXII \u0437\u0438\u043c\u043d\u0438\u0435 \u041e\u043b\u0438\u043c\u043f\u0438\u0439\u0441\u043a\u0438\u0435 \u0438\u0433\u0440\u044b. \u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0445\u043e\u043a\u043a\u0435\u0438\u0441\u0442\u044b \u0441\u0442\u0430\u0440\u0442\u043e\u0432\u0430\u043b\u0438 \u043d\u0430 \u041e\u043b\u0438\u043c\u043f\u0438\u0430\u0434\u0435 \u0441 \u043f\u043e\u0431\u0435\u0434\u044b',\n                'description': 'md5:55805dfd35763a890ff50fa9e35e31b3',\n                'duration': 271,\n            },\n            'params': {\n                \n                'skip_download': True,\n            },\n            'skip': 'Blocked outside Russia',\n        },\n        {\n            'url': 'http://sochi2014.vesti.ru/live/play/live_id/301',\n            'info_dict': {\n                'id': '51499',\n                'ext': 'flv',\n                'title': '\u0421\u043e\u0447\u0438-2014. \u0411\u0438\u0430\u0442\u043b\u043e\u043d. \u0418\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043e\u043d\u043a\u0430. \u041c\u0443\u0436\u0447\u0438\u043d\u044b ',\n                'description': 'md5:9e0ed5c9d2fa1efbfdfed90c9a6d179c',\n            },\n            'params': {\n                \n                'skip_download': True,\n            },\n            'skip': 'Translation has finished'\n        },\n    ]\n\n    def _real_extract(self, url):\n        mobj = re.match(self._VALID_URL, url)\n        video_id = mobj.group('id')\n\n        page = self._download_webpage(url, video_id, 'Downloading page')\n\n        mobj = re.search(\n            r'<meta[^>]+?property=\"og:video\"[^>]+?content=\"http://www\\.vesti\\.ru/i/flvplayer_videoHost\\.swf\\?vid=(?P<id>\\d+)',\n            page)\n        if mobj:\n            video_id = mobj.group('id')\n            page = self._download_webpage('http://www.vesti.ru/only_video.html?vid=%s' % video_id, video_id,\n                                          'Downloading video page')\n\n        rutv_url = RUTVIE._extract_url(page)\n        if rutv_url:\n            return self.url_result(rutv_url, 'RUTV')\n\n        raise ExtractorError('No video found', expected=True)\n", "comments": "# coding: utf-8\n# m3u8 download\n# m3u8 download\n# m3u8 download\n# m3u8 download\n# m3u8 download\n# rtmp download\n", "content": "# coding: utf-8\nfrom __future__ import unicode_literals\n\nimport re\n\nfrom .common import InfoExtractor\nfrom ..utils import ExtractorError\nfrom .rutv import RUTVIE\n\n\nclass VestiIE(InfoExtractor):\n    IE_DESC = '\u0412\u0435\u0441\u0442\u0438.Ru'\n    _VALID_URL = r'https?://(?:.+?\\.)?vesti\\.ru/(?P<id>.+)'\n\n    _TESTS = [\n        {\n            'url': 'http://www.vesti.ru/videos?vid=575582&cid=1',\n            'info_dict': {\n                'id': '765035',\n                'ext': 'mp4',\n                'title': '\u0412\u0435\u0441\u0442\u0438.net: \u0431\u0438\u0442\u043a\u043e\u0438\u043d\u044b \u0432 \u0420\u043e\u0441\u0441\u0438\u0438 \u043d\u0435 \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0437\u0430\u043a\u043e\u043d\u043d\u044b\u043c\u0438',\n                'description': 'md5:d4bb3859dc1177b28a94c5014c35a36b',\n                'duration': 302,\n            },\n            'params': {\n                # m3u8 download\n                'skip_download': True,\n            },\n        },\n        {\n            'url': 'http://www.vesti.ru/doc.html?id=1349233',\n            'info_dict': {\n                'id': '773865',\n                'ext': 'mp4',\n                'title': '\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438 \u043c\u0438\u0442\u0438\u043d\u0433\u0430 \u0448\u0442\u0443\u0440\u043c\u0443\u044e\u0442 \u0414\u043e\u043d\u0435\u0446\u043a\u0443\u044e \u043e\u0431\u043b\u0430\u0441\u0442\u043d\u0443\u044e \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044e',\n                'description': 'md5:1a160e98b3195379b4c849f2f4958009',\n                'duration': 210,\n            },\n            'params': {\n                # m3u8 download\n                'skip_download': True,\n            },\n        },\n        {\n            'url': 'http://www.vesti.ru/only_video.html?vid=576180',\n            'info_dict': {\n                'id': '766048',\n                'ext': 'mp4',\n                'title': '\u0421\u0428\u0410 \u0437\u0430\u043c\u043e\u0440\u043e\u0437\u0438\u043b\u043e, \u0411\u0440\u0438\u0442\u0430\u043d\u0438\u044e \u0437\u0430\u0442\u043e\u043f\u0438\u043b\u043e',\n                'description': 'md5:f0ed0695ec05aed27c56a70a58dc4cc1',\n                'duration': 87,\n            },\n            'params': {\n                # m3u8 download\n                'skip_download': True,\n            },\n        },\n        {\n            'url': 'http://hitech.vesti.ru/news/view/id/4000',\n            'info_dict': {\n                'id': '766888',\n                'ext': 'mp4',\n                'title': '\u0412\u0435\u0441\u0442\u0438.net: \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442-\u0433\u0438\u0433\u0430\u043d\u0442\u044b \u043d\u0430\u0447\u0430\u043b\u0438 \u043f\u0435\u0440\u0435\u0442\u044f\u0433\u0438\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u044b\u0445 \"\u043e\u0434\u0435\u044f\u043b\"',\n                'description': 'md5:65ddd47f9830c4f42ed6475f8730c995',\n                'duration': 279,\n            },\n            'params': {\n                # m3u8 download\n                'skip_download': True,\n            },\n        },\n        {\n            'url': 'http://sochi2014.vesti.ru/video/index/video_id/766403',\n            'info_dict': {\n                'id': '766403',\n                'ext': 'mp4',\n                'title': 'XXII \u0437\u0438\u043c\u043d\u0438\u0435 \u041e\u043b\u0438\u043c\u043f\u0438\u0439\u0441\u043a\u0438\u0435 \u0438\u0433\u0440\u044b. \u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0445\u043e\u043a\u043a\u0435\u0438\u0441\u0442\u044b \u0441\u0442\u0430\u0440\u0442\u043e\u0432\u0430\u043b\u0438 \u043d\u0430 \u041e\u043b\u0438\u043c\u043f\u0438\u0430\u0434\u0435 \u0441 \u043f\u043e\u0431\u0435\u0434\u044b',\n                'description': 'md5:55805dfd35763a890ff50fa9e35e31b3',\n                'duration': 271,\n            },\n            'params': {\n                # m3u8 download\n                'skip_download': True,\n            },\n            'skip': 'Blocked outside Russia',\n        },\n        {\n            'url': 'http://sochi2014.vesti.ru/live/play/live_id/301',\n            'info_dict': {\n                'id': '51499',\n                'ext': 'flv',\n                'title': '\u0421\u043e\u0447\u0438-2014. \u0411\u0438\u0430\u0442\u043b\u043e\u043d. \u0418\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043e\u043d\u043a\u0430. \u041c\u0443\u0436\u0447\u0438\u043d\u044b ',\n                'description': 'md5:9e0ed5c9d2fa1efbfdfed90c9a6d179c',\n            },\n            'params': {\n                # rtmp download\n                'skip_download': True,\n            },\n            'skip': 'Translation has finished'\n        },\n    ]\n\n    def _real_extract(self, url):\n        mobj = re.match(self._VALID_URL, url)\n        video_id = mobj.group('id')\n\n        page = self._download_webpage(url, video_id, 'Downloading page')\n\n        mobj = re.search(\n            r'<meta[^>]+?property=\"og:video\"[^>]+?content=\"http://www\\.vesti\\.ru/i/flvplayer_videoHost\\.swf\\?vid=(?P<id>\\d+)',\n            page)\n        if mobj:\n            video_id = mobj.group('id')\n            page = self._download_webpage('http://www.vesti.ru/only_video.html?vid=%s' % video_id, video_id,\n                                          'Downloading video page')\n\n        rutv_url = RUTVIE._extract_url(page)\n        if rutv_url:\n            return self.url_result(rutv_url, 'RUTV')\n\n        raise ExtractorError('No video found', expected=True)\n", "description": "Command-line program to download videos from YouTube.com and other video sites", "file_name": "vesti.py", "language": "Python", "project_name": "youtube-dl", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/rg3_youtube-dl/rg3-youtube-dl-6202f08/youtube_dl/extractor/vesti.py", "save_time": "", "source": "", "update_at": "2018-03-07T09:18:39Z", "url": "https://github.com/rg3/youtube-dl", "wiki": false}