{"author": "getredash", "code": "from __future__ import print_function\nimport json\nfrom redash import models\n\nif __name__ == '__main__':\n    for vis in models.Visualization.select():\n        if vis.type == 'COUNTER':\n            options = json.loads(vis.options)\n            print(\"Before: \", options)\n            if 'rowNumber' in options and options['rowNumber'] is not None:\n                options['rowNumber'] += 1\n            else:\n                options['rowNumber'] = 1\n\n            if 'counterColName' not in options:\n                options['counterColName'] = 'counter'\n\n            if 'targetColName' not in options:\n                options['targetColName'] = 'target'\n            options['targetRowNumber'] = options['rowNumber']\n\n            print(\"After: \", options)\n            vis.options = json.dumps(options)\n            vis.save()\n", "comments": "", "content": "from __future__ import print_function\nimport json\nfrom redash import models\n\nif __name__ == '__main__':\n    for vis in models.Visualization.select():\n        if vis.type == 'COUNTER':\n            options = json.loads(vis.options)\n            print(\"Before: \", options)\n            if 'rowNumber' in options and options['rowNumber'] is not None:\n                options['rowNumber'] += 1\n            else:\n                options['rowNumber'] = 1\n\n            if 'counterColName' not in options:\n                options['counterColName'] = 'counter'\n\n            if 'targetColName' not in options:\n                options['targetColName'] = 'target'\n            options['targetRowNumber'] = options['rowNumber']\n\n            print(\"After: \", options)\n            vis.options = json.dumps(options)\n            vis.save()\n", "description": "Make Your Company Data Driven. Connect to any data source, easily visualize and share your data.", "file_name": "0013_update_counter_options.py", "id": "33217e590c60e8f7daf9c1c92215ca03", "language": "Python", "project_name": "redash", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/getredash-redash/getredash-redash-0410d83/old_migrations/0013_update_counter_options.py", "save_time": "", "source": "", "update_at": "2018-03-18T12:54:55Z", "url": "https://github.com/getredash/redash", "wiki": false}