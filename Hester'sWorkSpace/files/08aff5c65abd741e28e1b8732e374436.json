{"author": "rg3", "code": "\nfrom __future__ import unicode_literals\n\nfrom .common import InfoExtractor\nfrom .cbs import CBSIE\nfrom ..utils import (\n    parse_duration,\n)\n\n\nclass CBSNewsIE(CBSIE):\n    IE_NAME = 'cbsnews'\n    IE_DESC = 'CBS News'\n    _VALID_URL = r'https?://(?:www\\.)?cbsnews\\.com/(?:news|videos)/(?P<id>[\\da-z_-]+)'\n\n    _TESTS = [\n        {\n            \n            'url': 'http://www.cbsnews.com/news/artificial-intelligence-positioned-to-be-a-game-changer/',\n            'info_dict': {\n                'id': '_B6Ga3VJrI4iQNKsir_cdFo9Re_YJHE_',\n                'ext': 'mp4',\n                'title': 'Artificial Intelligence',\n                'description': 'md5:8818145f9974431e0fb58a1b8d69613c',\n                'thumbnail': r're:^https?://.*\\.jpg$',\n                'duration': 1606,\n                'uploader': 'CBSI-NEW',\n                'timestamp': 1498431900,\n                'upload_date': '20170625',\n            },\n            'params': {\n                \n                'skip_download': True,\n            },\n        },\n        {\n            'url': 'http://www.cbsnews.com/videos/fort-hood-shooting-army-downplays-mental-illness-as-cause-of-attack/',\n            'info_dict': {\n                'id': 'SNJBOYzXiWBOvaLsdzwH8fmtP1SCd91Y',\n                'ext': 'mp4',\n                'title': 'Fort Hood shooting: Army downplays mental illness as cause of attack',\n                'description': 'md5:4a6983e480542d8b333a947bfc64ddc7',\n                'upload_date': '20140404',\n                'timestamp': 1396650660,\n                'uploader': 'CBSI-NEW',\n                'thumbnail': r're:^https?://.*\\.jpg$',\n                'duration': 205,\n                'subtitles': {\n                    'en': [{\n                        'ext': 'ttml',\n                    }],\n                },\n            },\n            'params': {\n                \n                'skip_download': True,\n            },\n        },\n        {\n            \n            'url': 'http://www.cbsnews.com/news/maria-ridulph-murder-will-the-nations-oldest-cold-case-to-go-to-trial-ever-get-solved/',\n            'info_dict': {\n                'id': 'QpM5BJjBVEAUFi7ydR9LusS69DPLqPJ1',\n                'ext': 'mp4',\n                'title': 'Cold as Ice',\n                'description': 'Can a childhood memory of a friend\\'s murder solve a 1957 cold case? \"48 Hours\" correspondent Erin Moriarty has the latest.',\n                'upload_date': '20170604',\n                'timestamp': 1496538000,\n                'uploader': 'CBSI-NEW',\n            },\n            'params': {\n                'skip_download': True,\n            },\n        },\n    ]\n\n    def _real_extract(self, url):\n        video_id = self._match_id(url)\n\n        webpage = self._download_webpage(url, video_id)\n\n        video_info = self._parse_json(self._html_search_regex(\n            r'(?:<ul class=\"media-list items\" id=\"media-related-items\"[^>]*><li data-video-info|<div id=\"cbsNewsVideoPlayer\" data-video-player-options)=\\'({.+?})\\'',\n            webpage, 'video JSON info', default='{}'), video_id, fatal=False)\n\n        if video_info:\n            item = video_info['item'] if 'item' in video_info else video_info\n        else:\n            state = self._parse_json(self._search_regex(\n                r'data-cbsvideoui-options=([\"\\'])(?P<json>{.+?})\\1', webpage,\n                'playlist JSON info', group='json'), video_id)['state']\n            item = state['playlist'][state['pid']]\n\n        return self._extract_video_info(item['mpxRefId'], 'cbsnews')\n\n\nclass CBSNewsLiveVideoIE(InfoExtractor):\n    IE_NAME = 'cbsnews:livevideo'\n    IE_DESC = 'CBS News Live Videos'\n    _VALID_URL = r'https?://(?:www\\.)?cbsnews\\.com/live/video/(?P<id>[^/?\n\n    \n    _TEST = {\n        'url': 'http://www.cbsnews.com/live/video/clinton-sanders-prepare-to-face-off-in-nh/',\n        'info_dict': {\n            'id': 'clinton-sanders-prepare-to-face-off-in-nh',\n            'ext': 'mp4',\n            'title': 'Clinton, Sanders Prepare To Face Off In NH',\n            'duration': 334,\n        },\n        'skip': 'Video gone',\n    }\n\n    def _real_extract(self, url):\n        display_id = self._match_id(url)\n\n        video_info = self._download_json(\n            'http://feeds.cbsn.cbsnews.com/rundown/story', display_id, query={\n                'device': 'desktop',\n                'dvr_slug': display_id,\n            })\n\n        formats = self._extract_akamai_formats(video_info['url'], display_id)\n        self._sort_formats(formats)\n\n        return {\n            'id': display_id,\n            'display_id': display_id,\n            'title': video_info['headline'],\n            'thumbnail': video_info.get('thumbnail_url_hd') or video_info.get('thumbnail_url_sd'),\n            'duration': parse_duration(video_info.get('segmentDur')),\n            'formats': formats,\n        }\n", "comments": "# coding: utf-8\n# 60 minutes\n# m3u8 download\n# m3u8 download\n# 48 hours\n#]+)'\n# Live videos get deleted soon. See http://www.cbsnews.com/live/ for the latest examples\n", "content": "# coding: utf-8\nfrom __future__ import unicode_literals\n\nfrom .common import InfoExtractor\nfrom .cbs import CBSIE\nfrom ..utils import (\n    parse_duration,\n)\n\n\nclass CBSNewsIE(CBSIE):\n    IE_NAME = 'cbsnews'\n    IE_DESC = 'CBS News'\n    _VALID_URL = r'https?://(?:www\\.)?cbsnews\\.com/(?:news|videos)/(?P<id>[\\da-z_-]+)'\n\n    _TESTS = [\n        {\n            # 60 minutes\n            'url': 'http://www.cbsnews.com/news/artificial-intelligence-positioned-to-be-a-game-changer/',\n            'info_dict': {\n                'id': '_B6Ga3VJrI4iQNKsir_cdFo9Re_YJHE_',\n                'ext': 'mp4',\n                'title': 'Artificial Intelligence',\n                'description': 'md5:8818145f9974431e0fb58a1b8d69613c',\n                'thumbnail': r're:^https?://.*\\.jpg$',\n                'duration': 1606,\n                'uploader': 'CBSI-NEW',\n                'timestamp': 1498431900,\n                'upload_date': '20170625',\n            },\n            'params': {\n                # m3u8 download\n                'skip_download': True,\n            },\n        },\n        {\n            'url': 'http://www.cbsnews.com/videos/fort-hood-shooting-army-downplays-mental-illness-as-cause-of-attack/',\n            'info_dict': {\n                'id': 'SNJBOYzXiWBOvaLsdzwH8fmtP1SCd91Y',\n                'ext': 'mp4',\n                'title': 'Fort Hood shooting: Army downplays mental illness as cause of attack',\n                'description': 'md5:4a6983e480542d8b333a947bfc64ddc7',\n                'upload_date': '20140404',\n                'timestamp': 1396650660,\n                'uploader': 'CBSI-NEW',\n                'thumbnail': r're:^https?://.*\\.jpg$',\n                'duration': 205,\n                'subtitles': {\n                    'en': [{\n                        'ext': 'ttml',\n                    }],\n                },\n            },\n            'params': {\n                # m3u8 download\n                'skip_download': True,\n            },\n        },\n        {\n            # 48 hours\n            'url': 'http://www.cbsnews.com/news/maria-ridulph-murder-will-the-nations-oldest-cold-case-to-go-to-trial-ever-get-solved/',\n            'info_dict': {\n                'id': 'QpM5BJjBVEAUFi7ydR9LusS69DPLqPJ1',\n                'ext': 'mp4',\n                'title': 'Cold as Ice',\n                'description': 'Can a childhood memory of a friend\\'s murder solve a 1957 cold case? \"48 Hours\" correspondent Erin Moriarty has the latest.',\n                'upload_date': '20170604',\n                'timestamp': 1496538000,\n                'uploader': 'CBSI-NEW',\n            },\n            'params': {\n                'skip_download': True,\n            },\n        },\n    ]\n\n    def _real_extract(self, url):\n        video_id = self._match_id(url)\n\n        webpage = self._download_webpage(url, video_id)\n\n        video_info = self._parse_json(self._html_search_regex(\n            r'(?:<ul class=\"media-list items\" id=\"media-related-items\"[^>]*><li data-video-info|<div id=\"cbsNewsVideoPlayer\" data-video-player-options)=\\'({.+?})\\'',\n            webpage, 'video JSON info', default='{}'), video_id, fatal=False)\n\n        if video_info:\n            item = video_info['item'] if 'item' in video_info else video_info\n        else:\n            state = self._parse_json(self._search_regex(\n                r'data-cbsvideoui-options=([\"\\'])(?P<json>{.+?})\\1', webpage,\n                'playlist JSON info', group='json'), video_id)['state']\n            item = state['playlist'][state['pid']]\n\n        return self._extract_video_info(item['mpxRefId'], 'cbsnews')\n\n\nclass CBSNewsLiveVideoIE(InfoExtractor):\n    IE_NAME = 'cbsnews:livevideo'\n    IE_DESC = 'CBS News Live Videos'\n    _VALID_URL = r'https?://(?:www\\.)?cbsnews\\.com/live/video/(?P<id>[^/?#]+)'\n\n    # Live videos get deleted soon. See http://www.cbsnews.com/live/ for the latest examples\n    _TEST = {\n        'url': 'http://www.cbsnews.com/live/video/clinton-sanders-prepare-to-face-off-in-nh/',\n        'info_dict': {\n            'id': 'clinton-sanders-prepare-to-face-off-in-nh',\n            'ext': 'mp4',\n            'title': 'Clinton, Sanders Prepare To Face Off In NH',\n            'duration': 334,\n        },\n        'skip': 'Video gone',\n    }\n\n    def _real_extract(self, url):\n        display_id = self._match_id(url)\n\n        video_info = self._download_json(\n            'http://feeds.cbsn.cbsnews.com/rundown/story', display_id, query={\n                'device': 'desktop',\n                'dvr_slug': display_id,\n            })\n\n        formats = self._extract_akamai_formats(video_info['url'], display_id)\n        self._sort_formats(formats)\n\n        return {\n            'id': display_id,\n            'display_id': display_id,\n            'title': video_info['headline'],\n            'thumbnail': video_info.get('thumbnail_url_hd') or video_info.get('thumbnail_url_sd'),\n            'duration': parse_duration(video_info.get('segmentDur')),\n            'formats': formats,\n        }\n", "description": "Command-line program to download videos from YouTube.com and other video sites", "file_name": "cbsnews.py", "language": "Python", "project_name": "youtube-dl", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/rg3_youtube-dl/rg3-youtube-dl-6202f08/youtube_dl/extractor/cbsnews.py", "save_time": "", "source": "", "update_at": "2018-03-07T09:18:39Z", "url": "https://github.com/rg3/youtube-dl", "wiki": false}