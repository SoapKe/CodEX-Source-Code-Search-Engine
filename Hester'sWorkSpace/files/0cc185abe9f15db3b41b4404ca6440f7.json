{"author": "python", "code": "\n\n Usage:\n   py -3 purge.py 3.5.1rc1\n\n\n__author__ = 'Steve Dower <steve.dower@python.org>'\n__version__ = '1.0.0'\n\nimport re\nimport sys\n\nfrom urllib.request import *\n\nVERSION_RE = re.compile(r'(\\d+\\.\\d+\\.\\d+)(\\w+\\d+)?$')\n\ntry:\n    m = VERSION_RE.match(sys.argv[1])\n    if not m:\n        print('Invalid version:', sys.argv[1])\n        print('Expected something like \"3.5.1rc1\"')\n        sys.exit(1)\nexcept LookupError:\n    print('Missing version argument. Expected something like \"3.5.1rc1\"')\n    sys.exit(1)\n\nURL = \"https://www.python.org/ftp/python/{}/\".format(m.group(1))\nREL = m.group(2) or ''\n\nFILES = [\n    \"core.msi\",\n    \"core_d.msi\",\n    \"core_pdb.msi\",\n    \"dev.msi\",\n    \"dev_d.msi\",\n    \"doc.msi\",\n    \"exe.msi\",\n    \"exe_d.msi\",\n    \"exe_pdb.msi\",\n    \"launcher.msi\",\n    \"lib.msi\",\n    \"lib_d.msi\",\n    \"lib_pdb.msi\",\n    \"path.msi\",\n    \"pip.msi\",\n    \"tcltk.msi\",\n    \"tcltk_d.msi\",\n    \"tcltk_pdb.msi\",\n    \"test.msi\",\n    \"test_d.msi\",\n    \"test_pdb.msi\",\n    \"tools.msi\",\n    \"ucrt.msi\",\n    \"Windows6.0-KB2999226-x64.msu\",\n    \"Windows6.0-KB2999226-x86.msu\",\n    \"Windows6.1-KB2999226-x64.msu\",\n    \"Windows6.1-KB2999226-x86.msu\",\n    \"Windows8.1-KB2999226-x64.msu\",\n    \"Windows8.1-KB2999226-x86.msu\",\n    \"Windows8-RT-KB2999226-x64.msu\",\n    \"Windows8-RT-KB2999226-x86.msu\",\n]\nPATHS = [\n    \"python-{}.exe\".format(m.group(0)),\n    \"python-{}-webinstall.exe\".format(m.group(0)),\n    \"python-{}-amd64.exe\".format(m.group(0)),\n    \"python-{}-amd64-webinstall.exe\".format(m.group(0)),\n] + [\"win32{}/{}\".format(REL, f) for f in FILES] + [\"amd64{}/{}\".format(REL, f) for f in FILES]\n\nprint('Purged:')\nfor n in PATHS:\n    u = URL + n\n    with urlopen(Request(u, method='PURGE', headers={'Fastly-Soft-Purge': 1})) as r:\n        r.read()\n    print('  ', u)\n", "comments": "  purges fastly cache windows download files       usage       py  3 purge py 3 5 1rc1    ", "content": "# Purges the Fastly cache for Windows download files\n#\n# Usage:\n#   py -3 purge.py 3.5.1rc1\n#\n\n__author__ = 'Steve Dower <steve.dower@python.org>'\n__version__ = '1.0.0'\n\nimport re\nimport sys\n\nfrom urllib.request import *\n\nVERSION_RE = re.compile(r'(\\d+\\.\\d+\\.\\d+)(\\w+\\d+)?$')\n\ntry:\n    m = VERSION_RE.match(sys.argv[1])\n    if not m:\n        print('Invalid version:', sys.argv[1])\n        print('Expected something like \"3.5.1rc1\"')\n        sys.exit(1)\nexcept LookupError:\n    print('Missing version argument. Expected something like \"3.5.1rc1\"')\n    sys.exit(1)\n\nURL = \"https://www.python.org/ftp/python/{}/\".format(m.group(1))\nREL = m.group(2) or ''\n\nFILES = [\n    \"core.msi\",\n    \"core_d.msi\",\n    \"core_pdb.msi\",\n    \"dev.msi\",\n    \"dev_d.msi\",\n    \"doc.msi\",\n    \"exe.msi\",\n    \"exe_d.msi\",\n    \"exe_pdb.msi\",\n    \"launcher.msi\",\n    \"lib.msi\",\n    \"lib_d.msi\",\n    \"lib_pdb.msi\",\n    \"path.msi\",\n    \"pip.msi\",\n    \"tcltk.msi\",\n    \"tcltk_d.msi\",\n    \"tcltk_pdb.msi\",\n    \"test.msi\",\n    \"test_d.msi\",\n    \"test_pdb.msi\",\n    \"tools.msi\",\n    \"ucrt.msi\",\n    \"Windows6.0-KB2999226-x64.msu\",\n    \"Windows6.0-KB2999226-x86.msu\",\n    \"Windows6.1-KB2999226-x64.msu\",\n    \"Windows6.1-KB2999226-x86.msu\",\n    \"Windows8.1-KB2999226-x64.msu\",\n    \"Windows8.1-KB2999226-x86.msu\",\n    \"Windows8-RT-KB2999226-x64.msu\",\n    \"Windows8-RT-KB2999226-x86.msu\",\n]\nPATHS = [\n    \"python-{}.exe\".format(m.group(0)),\n    \"python-{}-webinstall.exe\".format(m.group(0)),\n    \"python-{}-amd64.exe\".format(m.group(0)),\n    \"python-{}-amd64-webinstall.exe\".format(m.group(0)),\n] + [\"win32{}/{}\".format(REL, f) for f in FILES] + [\"amd64{}/{}\".format(REL, f) for f in FILES]\n\nprint('Purged:')\nfor n in PATHS:\n    u = URL + n\n    with urlopen(Request(u, method='PURGE', headers={'Fastly-Soft-Purge': 1})) as r:\n        r.read()\n    print('  ', u)\n", "description": "The Python programming language", "file_name": "purge.py", "id": "0cc185abe9f15db3b41b4404ca6440f7", "language": "Python", "project_name": "cpython", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/python-cpython/python-cpython-fe2bbb1/Tools/msi/purge.py", "save_time": "", "source": "", "update_at": "2018-03-18T13:51:39Z", "url": "https://github.com/python/cpython", "wiki": false}