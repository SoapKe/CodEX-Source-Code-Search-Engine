{"author": "tgalal", "code": "from yowsup.structs import ProtocolTreeNode\nfrom .iq_sync import SyncIqProtocolEntity\nfrom yowsup.layers.protocol_iq.protocolentities import IqProtocolEntity\n\nclass ResultStatusesIqProtocolEntity(IqProtocolEntity):\n    \n    XMLNS = 'status'\n    def __init__(self, _id, _from, statuses):\n        super(ResultStatusesIqProtocolEntity, self).__init__(self.__class__.XMLNS, _id, 'result', _from=_from)\n        self.setResultStatusesProps(statuses)\n\n    def setResultStatusesProps(self, statuses):\n        assert type(statuses) is dict, \"statuses must be dict\"\n        self.statuses = statuses\n\n    def __str__(self):\n        out = super(ResultStatusesIqProtocolEntity, self).__str__()\n        out += \"Statuses: %s\\n\" % ','.join(jid + '(' + str(v) + ')' for jid, v in self.statuses.items())\n        return out\n\n    def toProtocolTreeNode(self):\n        node = super(ResultStatusesIqProtocolEntity, self).toProtocolTreeNode()\n        users = [ProtocolTreeNode('user', {'jid': jid, 't': t}, None, status) for jid, (status, t) in self.statuses.items()]\n        statusNode = ProtocolTreeNode('status', None, users)\n        node.addChild(statusNode)\n        return node\n\n    @staticmethod\n    def fromProtocolTreeNode(node):\n        statusNode = node.getChild('status')\n        users = statusNode.getAllChildren()\n        statuses = dict()\n        for user in users:\n            statuses[user['jid']] = (user.getData(), user['t'])\n\n        entity = IqProtocolEntity.fromProtocolTreeNode(node)\n        entity.__class__ = ResultStatusesIqProtocolEntity\n        entity.setResultStatusesProps(statuses)\n        return entity\n", "comments": "         iq type  result   whatsapp net  id  1            status               user jid   number  whatsapp net   1330555420                    status message                  hex  status message hex                user               user jid   number  whatsapp net   1420813055                    status message                  hex  status message hex                user            status        iq          ", "content": "from yowsup.structs import ProtocolTreeNode\nfrom .iq_sync import SyncIqProtocolEntity\nfrom yowsup.layers.protocol_iq.protocolentities import IqProtocolEntity\n\nclass ResultStatusesIqProtocolEntity(IqProtocolEntity):\n    '''\n    <iq type=\"result\" from=\"s.whatsapp.net\" id=\"1\">\n        <status>\n            <user jid=\"{number}@s.whatsapp.net\" t=\"1330555420\">\n                {status message}\n                HEX:{status message in hex}\n            </user>\n            <user jid=\"{number}@s.whatsapp.net\" t=\"1420813055\">\n                {status message}\n                HEX:{status message in hex}\n            </user>\n        </status>\n    </iq>\n    '''\n    XMLNS = 'status'\n    def __init__(self, _id, _from, statuses):\n        super(ResultStatusesIqProtocolEntity, self).__init__(self.__class__.XMLNS, _id, 'result', _from=_from)\n        self.setResultStatusesProps(statuses)\n\n    def setResultStatusesProps(self, statuses):\n        assert type(statuses) is dict, \"statuses must be dict\"\n        self.statuses = statuses\n\n    def __str__(self):\n        out = super(ResultStatusesIqProtocolEntity, self).__str__()\n        out += \"Statuses: %s\\n\" % ','.join(jid + '(' + str(v) + ')' for jid, v in self.statuses.items())\n        return out\n\n    def toProtocolTreeNode(self):\n        node = super(ResultStatusesIqProtocolEntity, self).toProtocolTreeNode()\n        users = [ProtocolTreeNode('user', {'jid': jid, 't': t}, None, status) for jid, (status, t) in self.statuses.items()]\n        statusNode = ProtocolTreeNode('status', None, users)\n        node.addChild(statusNode)\n        return node\n\n    @staticmethod\n    def fromProtocolTreeNode(node):\n        statusNode = node.getChild('status')\n        users = statusNode.getAllChildren()\n        statuses = dict()\n        for user in users:\n            statuses[user['jid']] = (user.getData(), user['t'])\n\n        entity = IqProtocolEntity.fromProtocolTreeNode(node)\n        entity.__class__ = ResultStatusesIqProtocolEntity\n        entity.setResultStatusesProps(statuses)\n        return entity\n", "description": "The python WhatsApp library", "file_name": "iq_statuses_result.py", "id": "3cbfecbbf2949b83c144f120bb7a5cfe", "language": "Python", "project_name": "yowsup", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/tgalal-yowsup/tgalal-yowsup-03795cc/yowsup/layers/protocol_contacts/protocolentities/iq_statuses_result.py", "save_time": "", "source": "", "update_at": "2018-03-18T13:01:40Z", "url": "https://github.com/tgalal/yowsup", "wiki": true}