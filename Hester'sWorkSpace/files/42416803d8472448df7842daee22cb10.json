{"author": "rg3", "code": "\nfrom __future__ import unicode_literals\n\nimport datetime\nimport io\nimport json\nimport textwrap\n\n\natom_template = textwrap.dedent()\n\nnow = datetime.datetime.now()\nnow_iso = now.isoformat() + 'Z'\n\natom_template = atom_template.replace('@TIMESTAMP@', now_iso)\n\nversions_info = json.load(open('update/versions.json'))\nversions = list(versions_info['versions'].keys())\nversions.sort()\n\nentries = []\nfor v in versions:\n    fields = v.split('.')\n    year, month, day = map(int, fields[:3])\n    faked = 0\n    patchlevel = 0\n    while True:\n        try:\n            datetime.date(year, month, day)\n        except ValueError:\n            day -= 1\n            faked += 1\n            assert day > 0\n            continue\n        break\n    if len(fields) >= 4:\n        try:\n            patchlevel = int(fields[3])\n        except ValueError:\n            patchlevel = 1\n    timestamp = '%04d-%02d-%02dT00:%02d:%02dZ' % (year, month, day, faked, patchlevel)\n\n    entry = entry_template.replace('@TIMESTAMP@', timestamp)\n    entry = entry.replace('@VERSION@', v)\n    entries.append(entry)\n\nentries_str = textwrap.indent(''.join(entries), '\\t')\natom_template = atom_template.replace('@ENTRIES@', entries_str)\n\nwith io.open('update/releases.atom', 'w', encoding='utf-8') as atom_file:\n    atom_file.write(atom_template)\n", "comments": "\\\n    <?xml version=\"1.0\" encoding=\"utf-8\"?>\n    <feed xmlns=\"http://www.w3.org/2005/Atom\">\n        <link rel=\"self\" href=\"http://rg3.github.io/youtube-dl/update/releases.atom\" />\n        <title>youtube-dl releases</title>\n        <id>https://yt-dl.org/feed/youtube-dl-updates-feed</id>\n        <updated>@TIMESTAMP@</updated>\n        @ENTRIES@\n    </feed>\"\"\")\n\nentry_template = textwrap.dedent(\"\"\"\n    <entry>\n        <id>https://yt-dl.org/feed/youtube-dl-updates-feed/youtube-dl-@VERSION@</id>\n        <title>New version @VERSION@</title>\n        <link href=\"http://rg3.github.io/youtube-dl\" />\n        <content type=\"xhtml\">\n            <div xmlns=\"http://www.w3.org/1999/xhtml\">\n                Downloads available at <a href=\"https://yt-dl.org/downloads/@VERSION@/\">https://yt-dl.org/downloads/@VERSION@/</a>\n            </div>\n        </content>\n        <author>\n            <name>The youtube-dl maintainers</name>\n        </author>\n        <updated>@TIMESTAMP@</updated>\n    </entry>\n    \n \n#!/usr/bin/env python3\n", "content": "#!/usr/bin/env python3\nfrom __future__ import unicode_literals\n\nimport datetime\nimport io\nimport json\nimport textwrap\n\n\natom_template = textwrap.dedent(\"\"\"\\\n    <?xml version=\"1.0\" encoding=\"utf-8\"?>\n    <feed xmlns=\"http://www.w3.org/2005/Atom\">\n        <link rel=\"self\" href=\"http://rg3.github.io/youtube-dl/update/releases.atom\" />\n        <title>youtube-dl releases</title>\n        <id>https://yt-dl.org/feed/youtube-dl-updates-feed</id>\n        <updated>@TIMESTAMP@</updated>\n        @ENTRIES@\n    </feed>\"\"\")\n\nentry_template = textwrap.dedent(\"\"\"\n    <entry>\n        <id>https://yt-dl.org/feed/youtube-dl-updates-feed/youtube-dl-@VERSION@</id>\n        <title>New version @VERSION@</title>\n        <link href=\"http://rg3.github.io/youtube-dl\" />\n        <content type=\"xhtml\">\n            <div xmlns=\"http://www.w3.org/1999/xhtml\">\n                Downloads available at <a href=\"https://yt-dl.org/downloads/@VERSION@/\">https://yt-dl.org/downloads/@VERSION@/</a>\n            </div>\n        </content>\n        <author>\n            <name>The youtube-dl maintainers</name>\n        </author>\n        <updated>@TIMESTAMP@</updated>\n    </entry>\n    \"\"\")\n\nnow = datetime.datetime.now()\nnow_iso = now.isoformat() + 'Z'\n\natom_template = atom_template.replace('@TIMESTAMP@', now_iso)\n\nversions_info = json.load(open('update/versions.json'))\nversions = list(versions_info['versions'].keys())\nversions.sort()\n\nentries = []\nfor v in versions:\n    fields = v.split('.')\n    year, month, day = map(int, fields[:3])\n    faked = 0\n    patchlevel = 0\n    while True:\n        try:\n            datetime.date(year, month, day)\n        except ValueError:\n            day -= 1\n            faked += 1\n            assert day > 0\n            continue\n        break\n    if len(fields) >= 4:\n        try:\n            patchlevel = int(fields[3])\n        except ValueError:\n            patchlevel = 1\n    timestamp = '%04d-%02d-%02dT00:%02d:%02dZ' % (year, month, day, faked, patchlevel)\n\n    entry = entry_template.replace('@TIMESTAMP@', timestamp)\n    entry = entry.replace('@VERSION@', v)\n    entries.append(entry)\n\nentries_str = textwrap.indent(''.join(entries), '\\t')\natom_template = atom_template.replace('@ENTRIES@', entries_str)\n\nwith io.open('update/releases.atom', 'w', encoding='utf-8') as atom_file:\n    atom_file.write(atom_template)\n", "description": "Command-line program to download videos from YouTube.com and other video sites", "file_name": "update-feed.py", "language": "Python", "project_name": "youtube-dl", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/rg3_youtube-dl/rg3-youtube-dl-6202f08/devscripts/gh-pages/update-feed.py", "save_time": "", "source": "", "update_at": "2018-03-07T09:18:39Z", "url": "https://github.com/rg3/youtube-dl", "wiki": false}