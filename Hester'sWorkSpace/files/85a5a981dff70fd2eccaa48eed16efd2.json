{"author": "getredash", "code": "from __future__ import print_function\nfrom redash.models import db, Change, AccessPermission, Query, Dashboard\nfrom playhouse.migrate import PostgresqlMigrator, migrate\n\nif __name__ == '__main__':\n\n    if not Change.table_exists():\n        Change.create_table()\n\n    if not AccessPermission.table_exists():\n        AccessPermission.create_table()\n\n    migrator = PostgresqlMigrator(db.database)\n\n    try:\n        migrate(\n            migrator.add_column('queries', 'version', Query.version),\n            migrator.add_column('dashboards', 'version', Dashboard.version)\n        )\n    except Exception as ex:\n        print(\"Error while adding version column to queries/dashboards. Maybe it already exists?\")\n        print(ex)\n\n", "comments": "", "content": "from __future__ import print_function\nfrom redash.models import db, Change, AccessPermission, Query, Dashboard\nfrom playhouse.migrate import PostgresqlMigrator, migrate\n\nif __name__ == '__main__':\n\n    if not Change.table_exists():\n        Change.create_table()\n\n    if not AccessPermission.table_exists():\n        AccessPermission.create_table()\n\n    migrator = PostgresqlMigrator(db.database)\n\n    try:\n        migrate(\n            migrator.add_column('queries', 'version', Query.version),\n            migrator.add_column('dashboards', 'version', Dashboard.version)\n        )\n    except Exception as ex:\n        print(\"Error while adding version column to queries/dashboards. Maybe it already exists?\")\n        print(ex)\n\n", "description": "Make Your Company Data Driven. Connect to any data source, easily visualize and share your data.", "file_name": "0026_add_access_control_tables.py", "id": "85a5a981dff70fd2eccaa48eed16efd2", "language": "Python", "project_name": "redash", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/getredash-redash/getredash-redash-0410d83/old_migrations/0026_add_access_control_tables.py", "save_time": "", "source": "", "update_at": "2018-03-18T12:54:55Z", "url": "https://github.com/getredash/redash", "wiki": false}