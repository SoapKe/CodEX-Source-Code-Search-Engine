{"author": "odoo", "code": "# -*- coding: utf-8 -*-\n\nfrom datetime import timedelta\nfrom odoo.tests import common\nfrom odoo import fields\n\n\nclass TestSaleOrderDates(common.TransactionCase):\n\n    def test_sale_order_requested_date(self):\n\n        \n        \n        new_order = self.env.ref('sale.sale_order_6').copy({'requested_date': '2010-07-12'})\n        \n        new_order.action_confirm()\n        \n        security_delay = timedelta(days=new_order.company_id.security_lead)\n        requested_date = fields.Datetime.from_string(new_order.requested_date)\n        right_date = fields.Datetime.to_string(requested_date - security_delay)\n        for line in new_order.order_line:\n            self.assertEqual(line.move_ids[0].date_expected, right_date, \"The expected date for the Stock Move is wrong\")\n", "comments": "      coding  utf 8        in order test requested date feature sales orders odoo     i copy demo sales order requested date 2010 07 12    i confirm sales order     i verify procurements stock moves generated correct date ", "content": "# -*- coding: utf-8 -*-\n\nfrom datetime import timedelta\nfrom odoo.tests import common\nfrom odoo import fields\n\n\nclass TestSaleOrderDates(common.TransactionCase):\n\n    def test_sale_order_requested_date(self):\n\n        # In order to test the Requested Date feature in Sales Orders in Odoo,\n        # I copy a demo Sales Order with Requested Date on 2010-07-12\n        new_order = self.env.ref('sale.sale_order_6').copy({'requested_date': '2010-07-12'})\n        # I confirm the Sales Order.\n        new_order.action_confirm()\n        # I verify that the Procurements and Stock Moves have been generated with the correct date\n        security_delay = timedelta(days=new_order.company_id.security_lead)\n        requested_date = fields.Datetime.from_string(new_order.requested_date)\n        right_date = fields.Datetime.to_string(requested_date - security_delay)\n        for line in new_order.order_line:\n            self.assertEqual(line.move_ids[0].date_expected, right_date, \"The expected date for the Stock Move is wrong\")\n", "description": "Odoo. Open Source Apps To Grow Your Business.", "file_name": "test_requested_date.py", "id": "1d794130ce1fd9516636eed5c6cab98f", "language": "Python", "project_name": "odoo", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/odoo-odoo/odoo-odoo-b25250f/addons/sale_order_dates/tests/test_requested_date.py", "save_time": "", "source": "", "update_at": "2018-03-18T08:30:22Z", "url": "https://github.com/odoo/odoo", "wiki": true}