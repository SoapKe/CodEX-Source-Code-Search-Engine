{"author": "nvbn", "code": "import pytest\nfrom tests.functional.plots import with_confirmation, without_confirmation, \\\n    refuse_with_confirmation, history_changed, history_not_changed, \\\n    select_command_with_arrows, how_to_configure\n\n\npython_3 = ('thefuck/python3-zsh',\n            u\n\n\n@pytest.fixture(params=[(python_3, False),\n                        (python_3, True),\n                        (python_2, False)])\ndef proc(request, spawnu, TIMEOUT):\n    container, instant_mode = request.param\n    proc = spawnu(*container)\n    proc.sendline(u'pip install /src')\n    assert proc.expect([TIMEOUT, u'Successfully installed'])\n    proc.sendline(init_zshrc.format(\n        u'--enable-experimental-instant-mode' if instant_mode else ''))\n    proc.sendline(u\"zsh\")\n    if instant_mode:\n        assert proc.expect([TIMEOUT, u'instant mode ready: True'])\n    return proc\n\n\n@pytest.mark.functional\ndef test_with_confirmation(proc, TIMEOUT):\n    with_confirmation(proc, TIMEOUT)\n    history_changed(proc, TIMEOUT, u'echo test')\n\n\n@pytest.mark.functional\ndef test_select_command_with_arrows(proc, TIMEOUT):\n    select_command_with_arrows(proc, TIMEOUT)\n    history_changed(proc, TIMEOUT, u'git help')\n\n\n@pytest.mark.functional\ndef test_refuse_with_confirmation(proc, TIMEOUT):\n    refuse_with_confirmation(proc, TIMEOUT)\n    history_not_changed(proc, TIMEOUT)\n\n\n@pytest.mark.functional\ndef test_without_confirmation(proc, TIMEOUT):\n    without_confirmation(proc, TIMEOUT)\n    history_changed(proc, TIMEOUT, u'echo test')\n\n\n@pytest.mark.functional\ndef test_how_to_configure_alias(proc, TIMEOUT):\n    proc.sendline(u'unfunction fuck')\n    how_to_configure(proc, TIMEOUT)\n", "comments": "FROM python:3\n                RUN apt-get update\n                RUN apt-get install -yy zsh''',\n            u'sh')\n\npython_2 = ('thefuck/python2-zsh',\n            u'''FROM python:2\n                RUN apt-get update\n                RUN apt-get install -yy zsh''',\n            u'sh')\n\n\ninit_zshrc = u'''echo '\nexport SHELL=/usr/bin/zsh\nexport HISTFILE=~/.zsh_history\necho > $HISTFILE\nexport SAVEHIST=100\nexport HISTSIZE=100\neval $(thefuck --alias {})\nsetopt INC_APPEND_HISTORY\necho \"instant mode ready: $THEFUCK_INSTANT_MODE\"\n' > ~/.zshrc\nc\n", "content": "import pytest\nfrom tests.functional.plots import with_confirmation, without_confirmation, \\\n    refuse_with_confirmation, history_changed, history_not_changed, \\\n    select_command_with_arrows, how_to_configure\n\n\npython_3 = ('thefuck/python3-zsh',\n            u'''FROM python:3\n                RUN apt-get update\n                RUN apt-get install -yy zsh''',\n            u'sh')\n\npython_2 = ('thefuck/python2-zsh',\n            u'''FROM python:2\n                RUN apt-get update\n                RUN apt-get install -yy zsh''',\n            u'sh')\n\n\ninit_zshrc = u'''echo '\nexport SHELL=/usr/bin/zsh\nexport HISTFILE=~/.zsh_history\necho > $HISTFILE\nexport SAVEHIST=100\nexport HISTSIZE=100\neval $(thefuck --alias {})\nsetopt INC_APPEND_HISTORY\necho \"instant mode ready: $THEFUCK_INSTANT_MODE\"\n' > ~/.zshrc'''\n\n\n@pytest.fixture(params=[(python_3, False),\n                        (python_3, True),\n                        (python_2, False)])\ndef proc(request, spawnu, TIMEOUT):\n    container, instant_mode = request.param\n    proc = spawnu(*container)\n    proc.sendline(u'pip install /src')\n    assert proc.expect([TIMEOUT, u'Successfully installed'])\n    proc.sendline(init_zshrc.format(\n        u'--enable-experimental-instant-mode' if instant_mode else ''))\n    proc.sendline(u\"zsh\")\n    if instant_mode:\n        assert proc.expect([TIMEOUT, u'instant mode ready: True'])\n    return proc\n\n\n@pytest.mark.functional\ndef test_with_confirmation(proc, TIMEOUT):\n    with_confirmation(proc, TIMEOUT)\n    history_changed(proc, TIMEOUT, u'echo test')\n\n\n@pytest.mark.functional\ndef test_select_command_with_arrows(proc, TIMEOUT):\n    select_command_with_arrows(proc, TIMEOUT)\n    history_changed(proc, TIMEOUT, u'git help')\n\n\n@pytest.mark.functional\ndef test_refuse_with_confirmation(proc, TIMEOUT):\n    refuse_with_confirmation(proc, TIMEOUT)\n    history_not_changed(proc, TIMEOUT)\n\n\n@pytest.mark.functional\ndef test_without_confirmation(proc, TIMEOUT):\n    without_confirmation(proc, TIMEOUT)\n    history_changed(proc, TIMEOUT, u'echo test')\n\n\n@pytest.mark.functional\ndef test_how_to_configure_alias(proc, TIMEOUT):\n    proc.sendline(u'unfunction fuck')\n    how_to_configure(proc, TIMEOUT)\n", "description": "Magnificent app which corrects your previous console command.", "file_name": "test_zsh.py", "language": "Python", "project_name": "thefuck", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/nvbn_thefuck/nvbn-thefuck-284d49d/tests/functional/test_zsh.py", "save_time": "", "source": "", "update_at": "2018-03-07T09:34:29Z", "url": "https://github.com/nvbn/thefuck", "wiki": true}