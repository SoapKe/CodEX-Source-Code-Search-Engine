{"author": "nvbn", "code": "import re\nimport subprocess\nfrom thefuck.utils import for_app, eager, replace_command, cache, which\n\n\n@for_app('gem')\ndef match(command):\n    return ('ERROR:  While executing gem ... (Gem::CommandLineError)'\n            in command.output\n            and 'Unknown command' in command.output)\n\n\ndef _get_unknown_command(command):\n    return re.findall(r'Unknown command (.*)$', command.output)[0]\n\n\n@eager\ndef _get_all_commands():\n    proc = subprocess.Popen(['gem', 'help', 'commands'],\n                            stdout=subprocess.PIPE)\n\n    for line in proc.stdout.readlines():\n        line = line.decode()\n\n        if line.startswith('    '):\n            yield line.strip().split(' ')[0]\n\n\nif which('gem'):\n    _get_all_commands = cache(which('gem'))(_get_all_commands)\n\n\ndef get_new_command(command):\n    unknown_command = _get_unknown_command(command)\n    all_commands = _get_all_commands()\n    return replace_command(command, unknown_command, all_commands)\n", "comments": "", "content": "import re\nimport subprocess\nfrom thefuck.utils import for_app, eager, replace_command, cache, which\n\n\n@for_app('gem')\ndef match(command):\n    return ('ERROR:  While executing gem ... (Gem::CommandLineError)'\n            in command.output\n            and 'Unknown command' in command.output)\n\n\ndef _get_unknown_command(command):\n    return re.findall(r'Unknown command (.*)$', command.output)[0]\n\n\n@eager\ndef _get_all_commands():\n    proc = subprocess.Popen(['gem', 'help', 'commands'],\n                            stdout=subprocess.PIPE)\n\n    for line in proc.stdout.readlines():\n        line = line.decode()\n\n        if line.startswith('    '):\n            yield line.strip().split(' ')[0]\n\n\nif which('gem'):\n    _get_all_commands = cache(which('gem'))(_get_all_commands)\n\n\ndef get_new_command(command):\n    unknown_command = _get_unknown_command(command)\n    all_commands = _get_all_commands()\n    return replace_command(command, unknown_command, all_commands)\n", "description": "Magnificent app which corrects your previous console command.", "file_name": "gem_unknown_command.py", "language": "Python", "project_name": "thefuck", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/nvbn_thefuck/nvbn-thefuck-284d49d/thefuck/rules/gem_unknown_command.py", "save_time": "", "source": "", "update_at": "2018-03-07T09:34:29Z", "url": "https://github.com/nvbn/thefuck", "wiki": true}