{"author": "ansible", "code": "import unittest\n\nfrom ansible.modules.cloud.google.gcp_url_map import _build_path_matchers, _build_url_map_dict\n\n\nclass TestGCPUrlMap(unittest.TestCase):\n    \n    params_dict = {\n        'url_map_name': 'foo_url_map_name',\n        'description': 'foo_url_map description',\n        'host_rules': [\n            {\n                'description': 'host rules description',\n                'hosts': [\n                        'www.example.com',\n                        'www2.example.com'\n                ],\n                'path_matcher': 'host_rules_path_matcher'\n            }\n        ],\n        'path_matchers': [\n            {\n                'name': 'path_matcher_one',\n                'description': 'path matcher one',\n                'defaultService': 'bes-pathmatcher-one-default',\n                'pathRules': [\n                        {\n                            'service': 'my-one-bes',\n                            'paths': [\n                                '/',\n                                '/aboutus'\n                            ]\n                        }\n                ]\n            },\n            {\n                'name': 'path_matcher_two',\n                'description': 'path matcher two',\n                'defaultService': 'bes-pathmatcher-two-default',\n                'pathRules': [\n                        {\n                            'service': 'my-two-bes',\n                            'paths': [\n                                '/webapp',\n                                '/graphs'\n                            ]\n                        }\n                ]\n            }\n        ]\n    }\n\n    def test__build_path_matchers(self):\n        input_list = [\n            {\n                'defaultService': 'bes-pathmatcher-one-default',\n                'description': 'path matcher one',\n                'name': 'path_matcher_one',\n                'pathRules': [\n                    {\n                        'paths': [\n                            '/',\n                            '/aboutus'\n                        ],\n                        'service': 'my-one-bes'\n                    }\n                ]\n            },\n            {\n                'defaultService': 'bes-pathmatcher-two-default',\n                'description': 'path matcher two',\n                'name': 'path_matcher_two',\n                'pathRules': [\n                    {\n                        'paths': [\n                            '/webapp',\n                            '/graphs'\n                        ],\n                        'service': 'my-two-bes'\n                    }\n                ]\n            }\n        ]\n        expected = [\n            {\n                'defaultService': 'https://www.googleapis.com/compute/v1/projects/my-project/global/backendServices/bes-pathmatcher-one-default',\n                'description': 'path matcher one',\n                'name': 'path_matcher_one',\n                'pathRules': [\n                    {\n                        'paths': [\n                            '/',\n                            '/aboutus'\n                        ],\n                        'service': 'https://www.googleapis.com/compute/v1/projects/my-project/global/backendServices/my-one-bes'\n                    }\n                ]\n            },\n            {\n                'defaultService': 'https://www.googleapis.com/compute/v1/projects/my-project/global/backendServices/bes-pathmatcher-two-default',\n                'description': 'path matcher two',\n                'name': 'path_matcher_two',\n                'pathRules': [\n                    {\n                        'paths': [\n                            '/webapp',\n                            '/graphs'\n                        ],\n                        'service': 'https://www.googleapis.com/compute/v1/projects/my-project/global/backendServices/my-two-bes'\n                    }\n                ]\n            }\n        ]\n        actual = _build_path_matchers(input_list, 'my-project')\n        self.assertEqual(expected, actual)\n\n    def test__build_url_map_dict(self):\n\n        expected = {\n            'description': 'foo_url_map description',\n            'hostRules': [\n                {\n                    'description': 'host rules description',\n                    'hosts': [\n                        'www.example.com',\n                        'www2.example.com'\n                    ],\n                    'pathMatcher': 'host_rules_path_matcher'\n                }\n            ],\n            'name': 'foo_url_map_name',\n            'pathMatchers': [\n                {\n                    'defaultService': 'https://www.googleapis.com/compute/v1/projects/my-project/global/backendServices/bes-pathmatcher-one-default',\n                    'description': 'path matcher one',\n                    'name': 'path_matcher_one',\n                    'pathRules': [\n                        {\n                            'paths': [\n                                '/',\n                                '/aboutus'\n                            ],\n                            'service': 'https://www.googleapis.com/compute/v1/projects/my-project/global/backendServices/my-one-bes'\n                        }\n                    ]\n                },\n                {\n                    'defaultService': 'https://www.googleapis.com/compute/v1/projects/my-project/global/backendServices/bes-pathmatcher-two-default',\n                    'description': 'path matcher two',\n                    'name': 'path_matcher_two',\n                    'pathRules': [\n                        {\n                            'paths': [\n                                '/webapp',\n                                '/graphs'\n                            ],\n                            'service': 'https://www.googleapis.com/compute/v1/projects/my-project/global/backendServices/my-two-bes'\n                        }\n                    ]\n                }\n            ]\n        }\n        actual = _build_url_map_dict(self.params_dict, 'my-project')\n        self.assertEqual(expected, actual)\n", "comments": "   unit tests gcp url map module     ", "content": "import unittest\n\nfrom ansible.modules.cloud.google.gcp_url_map import _build_path_matchers, _build_url_map_dict\n\n\nclass TestGCPUrlMap(unittest.TestCase):\n    \"\"\"Unit tests for gcp_url_map module.\"\"\"\n    params_dict = {\n        'url_map_name': 'foo_url_map_name',\n        'description': 'foo_url_map description',\n        'host_rules': [\n            {\n                'description': 'host rules description',\n                'hosts': [\n                        'www.example.com',\n                        'www2.example.com'\n                ],\n                'path_matcher': 'host_rules_path_matcher'\n            }\n        ],\n        'path_matchers': [\n            {\n                'name': 'path_matcher_one',\n                'description': 'path matcher one',\n                'defaultService': 'bes-pathmatcher-one-default',\n                'pathRules': [\n                        {\n                            'service': 'my-one-bes',\n                            'paths': [\n                                '/',\n                                '/aboutus'\n                            ]\n                        }\n                ]\n            },\n            {\n                'name': 'path_matcher_two',\n                'description': 'path matcher two',\n                'defaultService': 'bes-pathmatcher-two-default',\n                'pathRules': [\n                        {\n                            'service': 'my-two-bes',\n                            'paths': [\n                                '/webapp',\n                                '/graphs'\n                            ]\n                        }\n                ]\n            }\n        ]\n    }\n\n    def test__build_path_matchers(self):\n        input_list = [\n            {\n                'defaultService': 'bes-pathmatcher-one-default',\n                'description': 'path matcher one',\n                'name': 'path_matcher_one',\n                'pathRules': [\n                    {\n                        'paths': [\n                            '/',\n                            '/aboutus'\n                        ],\n                        'service': 'my-one-bes'\n                    }\n                ]\n            },\n            {\n                'defaultService': 'bes-pathmatcher-two-default',\n                'description': 'path matcher two',\n                'name': 'path_matcher_two',\n                'pathRules': [\n                    {\n                        'paths': [\n                            '/webapp',\n                            '/graphs'\n                        ],\n                        'service': 'my-two-bes'\n                    }\n                ]\n            }\n        ]\n        expected = [\n            {\n                'defaultService': 'https://www.googleapis.com/compute/v1/projects/my-project/global/backendServices/bes-pathmatcher-one-default',\n                'description': 'path matcher one',\n                'name': 'path_matcher_one',\n                'pathRules': [\n                    {\n                        'paths': [\n                            '/',\n                            '/aboutus'\n                        ],\n                        'service': 'https://www.googleapis.com/compute/v1/projects/my-project/global/backendServices/my-one-bes'\n                    }\n                ]\n            },\n            {\n                'defaultService': 'https://www.googleapis.com/compute/v1/projects/my-project/global/backendServices/bes-pathmatcher-two-default',\n                'description': 'path matcher two',\n                'name': 'path_matcher_two',\n                'pathRules': [\n                    {\n                        'paths': [\n                            '/webapp',\n                            '/graphs'\n                        ],\n                        'service': 'https://www.googleapis.com/compute/v1/projects/my-project/global/backendServices/my-two-bes'\n                    }\n                ]\n            }\n        ]\n        actual = _build_path_matchers(input_list, 'my-project')\n        self.assertEqual(expected, actual)\n\n    def test__build_url_map_dict(self):\n\n        expected = {\n            'description': 'foo_url_map description',\n            'hostRules': [\n                {\n                    'description': 'host rules description',\n                    'hosts': [\n                        'www.example.com',\n                        'www2.example.com'\n                    ],\n                    'pathMatcher': 'host_rules_path_matcher'\n                }\n            ],\n            'name': 'foo_url_map_name',\n            'pathMatchers': [\n                {\n                    'defaultService': 'https://www.googleapis.com/compute/v1/projects/my-project/global/backendServices/bes-pathmatcher-one-default',\n                    'description': 'path matcher one',\n                    'name': 'path_matcher_one',\n                    'pathRules': [\n                        {\n                            'paths': [\n                                '/',\n                                '/aboutus'\n                            ],\n                            'service': 'https://www.googleapis.com/compute/v1/projects/my-project/global/backendServices/my-one-bes'\n                        }\n                    ]\n                },\n                {\n                    'defaultService': 'https://www.googleapis.com/compute/v1/projects/my-project/global/backendServices/bes-pathmatcher-two-default',\n                    'description': 'path matcher two',\n                    'name': 'path_matcher_two',\n                    'pathRules': [\n                        {\n                            'paths': [\n                                '/webapp',\n                                '/graphs'\n                            ],\n                            'service': 'https://www.googleapis.com/compute/v1/projects/my-project/global/backendServices/my-two-bes'\n                        }\n                    ]\n                }\n            ]\n        }\n        actual = _build_url_map_dict(self.params_dict, 'my-project')\n        self.assertEqual(expected, actual)\n", "description": "Ansible is a radically simple IT automation platform that makes your applications and systems easier to deploy. Avoid writing scripts or custom code to deploy and update your applications\u2014 automate in a language that approaches plain English, using SSH, with no agents to install on remote systems.", "file_name": "test_gcp_url_map.py", "id": "de9e1f2ea2462ac93fa6784e08c5f0a3", "language": "Python", "project_name": "ansible", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/ansible-ansible/ansible-ansible-d30554b/test/units/modules/cloud/google/test_gcp_url_map.py", "save_time": "", "source": "", "update_at": "2018-03-18T14:08:28Z", "url": "https://github.com/ansible/ansible", "wiki": false}