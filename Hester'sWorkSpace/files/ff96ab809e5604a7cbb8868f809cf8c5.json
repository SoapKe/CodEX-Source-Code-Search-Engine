{"author": "odoo", "code": "\n\nfrom odoo import api, fields, models\n\n\nclass Applicant(models.Model):\n    _inherit = \"hr.applicant\"\n\n    survey_id = fields.Many2one('survey.survey', related='job_id.survey_id', string=\"Survey\")\n    response_id = fields.Many2one('survey.user_input', \"Response\", ondelete=\"set null\", oldname=\"response\")\n\n    @api.multi\n    def action_start_survey(self):\n        self.ensure_one()\n        \n        if not self.response_id:\n            response = self.env['survey.user_input'].create({'survey_id': self.survey_id.id, 'partner_id': self.partner_id.id})\n            self.response_id = response.id\n        else:\n            response = self.response_id\n        \n        return self.survey_id.with_context(survey_token=response.token).action_start_survey()\n\n    @api.multi\n    def action_print_survey(self):\n        \"\"\" If response is available then print this response otherwise print survey form (print template of the survey) \"\"\"\n        self.ensure_one()\n        if not self.response_id:\n            return self.survey_id.action_print_survey()\n        else:\n            response = self.response_id\n            return self.survey_id.with_context(survey_token=response.token).action_print_survey()\n", "comments": "    if response available print response otherwise print survey form (print template survey)        part odoo  see license file full copyright licensing details     create response link applicant    grab token response start surveying ", "content": "# Part of Odoo. See LICENSE file for full copyright and licensing details.\n\nfrom odoo import api, fields, models\n\n\nclass Applicant(models.Model):\n    _inherit = \"hr.applicant\"\n\n    survey_id = fields.Many2one('survey.survey', related='job_id.survey_id', string=\"Survey\")\n    response_id = fields.Many2one('survey.user_input', \"Response\", ondelete=\"set null\", oldname=\"response\")\n\n    @api.multi\n    def action_start_survey(self):\n        self.ensure_one()\n        # create a response and link it to this applicant\n        if not self.response_id:\n            response = self.env['survey.user_input'].create({'survey_id': self.survey_id.id, 'partner_id': self.partner_id.id})\n            self.response_id = response.id\n        else:\n            response = self.response_id\n        # grab the token of the response and start surveying\n        return self.survey_id.with_context(survey_token=response.token).action_start_survey()\n\n    @api.multi\n    def action_print_survey(self):\n        \"\"\" If response is available then print this response otherwise print survey form (print template of the survey) \"\"\"\n        self.ensure_one()\n        if not self.response_id:\n            return self.survey_id.action_print_survey()\n        else:\n            response = self.response_id\n            return self.survey_id.with_context(survey_token=response.token).action_print_survey()\n", "description": "Odoo. Open Source Apps To Grow Your Business.", "file_name": "hr_applicant.py", "id": "ff96ab809e5604a7cbb8868f809cf8c5", "language": "Python", "project_name": "odoo", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/odoo-odoo/odoo-odoo-b25250f/addons/hr_recruitment_survey/models/hr_applicant.py", "save_time": "", "source": "", "update_at": "2018-03-18T08:30:22Z", "url": "https://github.com/odoo/odoo", "wiki": true}