{"author": "rg3", "code": "\nfrom __future__ import unicode_literals\n\nfrom .common import InfoExtractor\nfrom ..utils import (\n    int_or_none,\n    parse_age_limit,\n    parse_iso8601,\n)\n\n\nclass IndavideoEmbedIE(InfoExtractor):\n    _VALID_URL = r'https?://(?:(?:embed\\.)?indavideo\\.hu/player/video/|assets\\.indavideo\\.hu/swf/player\\.swf\\?.*\\b(?:v(?:ID|id))=)(?P<id>[\\da-f]+)'\n    _TESTS = [{\n        'url': 'http://indavideo.hu/player/video/1bdc3c6d80/',\n        'md5': 'f79b009c66194acacd40712a6778acfa',\n        'info_dict': {\n            'id': '1837039',\n            'ext': 'mp4',\n            'title': 'Cicat\u00e1nc',\n            'description': '',\n            'thumbnail': r're:^https?://.*\\.jpg$',\n            'uploader': 'cukiajanlo',\n            'uploader_id': '83729',\n            'timestamp': 1439193826,\n            'upload_date': '20150810',\n            'duration': 72,\n            'age_limit': 0,\n            'tags': ['t\u00e1nc', 'cica', 'cuki', 'cukiajanlo', 'newsroom'],\n        },\n    }, {\n        'url': 'http://embed.indavideo.hu/player/video/1bdc3c6d80?autostart=1&hide=1',\n        'only_matching': True,\n    }, {\n        'url': 'http://assets.indavideo.hu/swf/player.swf?v=fe25e500&vID=1bdc3c6d80&autostart=1&hide=1&i=1',\n        'only_matching': True,\n    }]\n\n    def _real_extract(self, url):\n        video_id = self._match_id(url)\n\n        video = self._download_json(\n            'http://amfphp.indavideo.hu/SYm0json.php/player.playerHandler.getVideoData/%s' % video_id,\n            video_id)['data']\n\n        title = video['title']\n\n        video_urls = video.get('video_files', [])\n        video_file = video.get('video_file')\n        if video:\n            video_urls.append(video_file)\n        video_urls = list(set(video_urls))\n\n        video_prefix = video_urls[0].rsplit('/', 1)[0]\n\n        for flv_file in video.get('flv_files', []):\n            flv_url = '%s/%s' % (video_prefix, flv_file)\n            if flv_url not in video_urls:\n                video_urls.append(flv_url)\n\n        formats = [{\n            'url': video_url,\n            'height': int_or_none(self._search_regex(\n                r'\\.(\\d{3,4})\\.mp4(?:\\?|$)', video_url, 'height', default=None)),\n        } for video_url in video_urls]\n        self._sort_formats(formats)\n\n        timestamp = video.get('date')\n        if timestamp:\n            \n            timestamp = parse_iso8601(timestamp + ' +0200', ' ')\n\n        thumbnails = [{\n            'url': self._proto_relative_url(thumbnail)\n        } for thumbnail in video.get('thumbnails', [])]\n\n        tags = [tag['title'] for tag in video.get('tags') or []]\n\n        return {\n            'id': video.get('id') or video_id,\n            'title': title,\n            'description': video.get('description'),\n            'thumbnails': thumbnails,\n            'uploader': video.get('user_name'),\n            'uploader_id': video.get('user_id'),\n            'timestamp': timestamp,\n            'duration': int_or_none(video.get('length')),\n            'age_limit': parse_age_limit(video.get('age_limit')),\n            'tags': tags,\n            'formats': formats,\n        }\n\n\nclass IndavideoIE(InfoExtractor):\n    _VALID_URL = r'https?://(?:.+?\\.)?indavideo\\.hu/video/(?P<id>[^/\n    _TESTS = [{\n        'url': 'http://indavideo.hu/video/Vicces_cica_1',\n        'md5': '8c82244ba85d2a2310275b318eb51eac',\n        'info_dict': {\n            'id': '1335611',\n            'display_id': 'Vicces_cica_1',\n            'ext': 'mp4',\n            'title': 'Vicces cica',\n            'description': 'J\u00e1tszik a tablettel. :D',\n            'thumbnail': r're:^https?://.*\\.jpg$',\n            'uploader': 'Jet_Pack',\n            'uploader_id': '491217',\n            'timestamp': 1390821212,\n            'upload_date': '20140127',\n            'duration': 7,\n            'age_limit': 0,\n            'tags': ['vicces', 'macska', 'cica', '\u00fcgyes', 'nevet\u00e9s', 'j\u00e1tszik', 'Cukis\u00e1g', 'Jet_Pack'],\n        },\n    }, {\n        'url': 'http://index.indavideo.hu/video/2015_0728_beregszasz',\n        'only_matching': True,\n    }, {\n        'url': 'http://auto.indavideo.hu/video/Sajat_utanfutoban_a_kis_tacsko',\n        'only_matching': True,\n    }, {\n        'url': 'http://erotika.indavideo.hu/video/Amator_tini_punci',\n        'only_matching': True,\n    }, {\n        'url': 'http://film.indavideo.hu/video/f_hrom_nagymamm_volt',\n        'only_matching': True,\n    }, {\n        'url': 'http://palyazat.indavideo.hu/video/Embertelen_dal_Dodgem_egyuttes',\n        'only_matching': True,\n    }]\n\n    def _real_extract(self, url):\n        display_id = self._match_id(url)\n\n        webpage = self._download_webpage(url, display_id)\n        embed_url = self._search_regex(\n            r'<link[^>]+rel=\"video_src\"[^>]+href=\"(.+?)\"', webpage, 'embed url')\n\n        return {\n            '_type': 'url_transparent',\n            'ie_key': 'IndavideoEmbed',\n            'url': embed_url,\n            'display_id': display_id,\n        }\n", "comments": "# coding: utf-8\n# upload date is in CEST\n#?]+)'\n", "content": "# coding: utf-8\nfrom __future__ import unicode_literals\n\nfrom .common import InfoExtractor\nfrom ..utils import (\n    int_or_none,\n    parse_age_limit,\n    parse_iso8601,\n)\n\n\nclass IndavideoEmbedIE(InfoExtractor):\n    _VALID_URL = r'https?://(?:(?:embed\\.)?indavideo\\.hu/player/video/|assets\\.indavideo\\.hu/swf/player\\.swf\\?.*\\b(?:v(?:ID|id))=)(?P<id>[\\da-f]+)'\n    _TESTS = [{\n        'url': 'http://indavideo.hu/player/video/1bdc3c6d80/',\n        'md5': 'f79b009c66194acacd40712a6778acfa',\n        'info_dict': {\n            'id': '1837039',\n            'ext': 'mp4',\n            'title': 'Cicat\u00e1nc',\n            'description': '',\n            'thumbnail': r're:^https?://.*\\.jpg$',\n            'uploader': 'cukiajanlo',\n            'uploader_id': '83729',\n            'timestamp': 1439193826,\n            'upload_date': '20150810',\n            'duration': 72,\n            'age_limit': 0,\n            'tags': ['t\u00e1nc', 'cica', 'cuki', 'cukiajanlo', 'newsroom'],\n        },\n    }, {\n        'url': 'http://embed.indavideo.hu/player/video/1bdc3c6d80?autostart=1&hide=1',\n        'only_matching': True,\n    }, {\n        'url': 'http://assets.indavideo.hu/swf/player.swf?v=fe25e500&vID=1bdc3c6d80&autostart=1&hide=1&i=1',\n        'only_matching': True,\n    }]\n\n    def _real_extract(self, url):\n        video_id = self._match_id(url)\n\n        video = self._download_json(\n            'http://amfphp.indavideo.hu/SYm0json.php/player.playerHandler.getVideoData/%s' % video_id,\n            video_id)['data']\n\n        title = video['title']\n\n        video_urls = video.get('video_files', [])\n        video_file = video.get('video_file')\n        if video:\n            video_urls.append(video_file)\n        video_urls = list(set(video_urls))\n\n        video_prefix = video_urls[0].rsplit('/', 1)[0]\n\n        for flv_file in video.get('flv_files', []):\n            flv_url = '%s/%s' % (video_prefix, flv_file)\n            if flv_url not in video_urls:\n                video_urls.append(flv_url)\n\n        formats = [{\n            'url': video_url,\n            'height': int_or_none(self._search_regex(\n                r'\\.(\\d{3,4})\\.mp4(?:\\?|$)', video_url, 'height', default=None)),\n        } for video_url in video_urls]\n        self._sort_formats(formats)\n\n        timestamp = video.get('date')\n        if timestamp:\n            # upload date is in CEST\n            timestamp = parse_iso8601(timestamp + ' +0200', ' ')\n\n        thumbnails = [{\n            'url': self._proto_relative_url(thumbnail)\n        } for thumbnail in video.get('thumbnails', [])]\n\n        tags = [tag['title'] for tag in video.get('tags') or []]\n\n        return {\n            'id': video.get('id') or video_id,\n            'title': title,\n            'description': video.get('description'),\n            'thumbnails': thumbnails,\n            'uploader': video.get('user_name'),\n            'uploader_id': video.get('user_id'),\n            'timestamp': timestamp,\n            'duration': int_or_none(video.get('length')),\n            'age_limit': parse_age_limit(video.get('age_limit')),\n            'tags': tags,\n            'formats': formats,\n        }\n\n\nclass IndavideoIE(InfoExtractor):\n    _VALID_URL = r'https?://(?:.+?\\.)?indavideo\\.hu/video/(?P<id>[^/#?]+)'\n    _TESTS = [{\n        'url': 'http://indavideo.hu/video/Vicces_cica_1',\n        'md5': '8c82244ba85d2a2310275b318eb51eac',\n        'info_dict': {\n            'id': '1335611',\n            'display_id': 'Vicces_cica_1',\n            'ext': 'mp4',\n            'title': 'Vicces cica',\n            'description': 'J\u00e1tszik a tablettel. :D',\n            'thumbnail': r're:^https?://.*\\.jpg$',\n            'uploader': 'Jet_Pack',\n            'uploader_id': '491217',\n            'timestamp': 1390821212,\n            'upload_date': '20140127',\n            'duration': 7,\n            'age_limit': 0,\n            'tags': ['vicces', 'macska', 'cica', '\u00fcgyes', 'nevet\u00e9s', 'j\u00e1tszik', 'Cukis\u00e1g', 'Jet_Pack'],\n        },\n    }, {\n        'url': 'http://index.indavideo.hu/video/2015_0728_beregszasz',\n        'only_matching': True,\n    }, {\n        'url': 'http://auto.indavideo.hu/video/Sajat_utanfutoban_a_kis_tacsko',\n        'only_matching': True,\n    }, {\n        'url': 'http://erotika.indavideo.hu/video/Amator_tini_punci',\n        'only_matching': True,\n    }, {\n        'url': 'http://film.indavideo.hu/video/f_hrom_nagymamm_volt',\n        'only_matching': True,\n    }, {\n        'url': 'http://palyazat.indavideo.hu/video/Embertelen_dal_Dodgem_egyuttes',\n        'only_matching': True,\n    }]\n\n    def _real_extract(self, url):\n        display_id = self._match_id(url)\n\n        webpage = self._download_webpage(url, display_id)\n        embed_url = self._search_regex(\n            r'<link[^>]+rel=\"video_src\"[^>]+href=\"(.+?)\"', webpage, 'embed url')\n\n        return {\n            '_type': 'url_transparent',\n            'ie_key': 'IndavideoEmbed',\n            'url': embed_url,\n            'display_id': display_id,\n        }\n", "description": "Command-line program to download videos from YouTube.com and other video sites", "file_name": "indavideo.py", "language": "Python", "project_name": "youtube-dl", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/rg3_youtube-dl/rg3-youtube-dl-6202f08/youtube_dl/extractor/indavideo.py", "save_time": "", "source": "", "update_at": "2018-03-07T09:18:39Z", "url": "https://github.com/rg3/youtube-dl", "wiki": false}