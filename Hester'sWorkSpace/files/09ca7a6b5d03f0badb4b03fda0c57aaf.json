{"author": "ansible", "code": "# (c) 2017, Brian Coca\n# (c) 2017 Ansible Project\n# GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)\n\n\nfrom __future__ import (absolute_import, division, print_function)\n__metaclass__ = type\n\nDOCUMENTATION = '''\n    cache: yaml\n    short_description: YAML formatted files.\n    description:\n        - This cache uses YAML formatted, per host, files saved to the filesystem.\n    version_added: \"2.3\"\n    author: Brian Coca (@bcoca)\n    options:\n      _uri:\n        required: True\n        description:\n          - Path in which the cache plugin will save the files\n        type: list\n        env:\n          - name: ANSIBLE_CACHE_PLUGIN_CONNECTION\n        ini:\n          - key: fact_caching_connection\n            section: defaults\n      _prefix:\n        description: User defined prefix to use when creating the files\n        env:\n          - name: ANSIBLE_CACHE_PLUGIN_PREFIX\n        ini:\n          - key: fact_caching_prefix\n          - section: defaults\n      _timeout:\n        default: 86400\n        description: Expiration timeout for the cache plugin data\n        env:\n          - name: ANSIBLE_CACHE_PLUGIN_TIMEOUT\n        ini:\n          - key: fact_caching_timeout\n            section: defaults\n        type: integer\n'''\n\n\nimport codecs\n\nimport yaml\n\nfrom ansible.parsing.yaml.loader import AnsibleLoader\nfrom ansible.parsing.yaml.dumper import AnsibleDumper\nfrom ansible.plugins.cache import BaseFileCacheModule\n\n\nclass CacheModule(BaseFileCacheModule):\n    \n\n    def _load(self, filepath):\n        with codecs.open(filepath, 'r', encoding='utf-8') as f:\n            return AnsibleLoader(f).get_single_data()\n\n    def _dump(self, value, filepath):\n        with codecs.open(filepath, 'w', encoding='utf-8') as f:\n            yaml.dump(value, f, Dumper=AnsibleDumper, default_flow_style=False)\n", "comments": "        a caching module backed yaml files                   cache  yaml     short description  yaml formatted files      description            this cache uses yaml formatted  per host  files saved filesystem      version added   2 3      author  brian coca ( bcoca)     options         uri          required  true         description              path cache plugin save files         type  list         env              name  ansible cache plugin connection         ini              key  fact caching connection             section  defaults        prefix          description  user defined prefix use creating files         env              name  ansible cache plugin prefix         ini              key  fact caching prefix             section  defaults        timeout          default  86400         description  expiration timeout cache plugin data         env              name  ansible cache plugin timeout         ini              key  fact caching timeout             section  defaults         type  integer        (c) 2017  brian coca    (c) 2017 ansible project    gnu general public license v3 0  (see copying https   www gnu org licenses gpl 3 0 txt)    make coding python3 ish ", "content": "# (c) 2017, Brian Coca\n# (c) 2017 Ansible Project\n# GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)\n\n# Make coding more python3-ish\nfrom __future__ import (absolute_import, division, print_function)\n__metaclass__ = type\n\nDOCUMENTATION = '''\n    cache: yaml\n    short_description: YAML formatted files.\n    description:\n        - This cache uses YAML formatted, per host, files saved to the filesystem.\n    version_added: \"2.3\"\n    author: Brian Coca (@bcoca)\n    options:\n      _uri:\n        required: True\n        description:\n          - Path in which the cache plugin will save the files\n        type: list\n        env:\n          - name: ANSIBLE_CACHE_PLUGIN_CONNECTION\n        ini:\n          - key: fact_caching_connection\n            section: defaults\n      _prefix:\n        description: User defined prefix to use when creating the files\n        env:\n          - name: ANSIBLE_CACHE_PLUGIN_PREFIX\n        ini:\n          - key: fact_caching_prefix\n          - section: defaults\n      _timeout:\n        default: 86400\n        description: Expiration timeout for the cache plugin data\n        env:\n          - name: ANSIBLE_CACHE_PLUGIN_TIMEOUT\n        ini:\n          - key: fact_caching_timeout\n            section: defaults\n        type: integer\n'''\n\n\nimport codecs\n\nimport yaml\n\nfrom ansible.parsing.yaml.loader import AnsibleLoader\nfrom ansible.parsing.yaml.dumper import AnsibleDumper\nfrom ansible.plugins.cache import BaseFileCacheModule\n\n\nclass CacheModule(BaseFileCacheModule):\n    \"\"\"\n    A caching module backed by yaml files.\n    \"\"\"\n\n    def _load(self, filepath):\n        with codecs.open(filepath, 'r', encoding='utf-8') as f:\n            return AnsibleLoader(f).get_single_data()\n\n    def _dump(self, value, filepath):\n        with codecs.open(filepath, 'w', encoding='utf-8') as f:\n            yaml.dump(value, f, Dumper=AnsibleDumper, default_flow_style=False)\n", "description": "Ansible is a radically simple IT automation platform that makes your applications and systems easier to deploy. Avoid writing scripts or custom code to deploy and update your applications\u2014 automate in a language that approaches plain English, using SSH, with no agents to install on remote systems.", "file_name": "yaml.py", "id": "09ca7a6b5d03f0badb4b03fda0c57aaf", "language": "Python", "project_name": "ansible", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/ansible-ansible/ansible-ansible-d30554b/lib/ansible/plugins/cache/yaml.py", "save_time": "", "source": "", "update_at": "2018-03-18T14:08:28Z", "url": "https://github.com/ansible/ansible", "wiki": false}