{"author": "odoo", "code": "# -*- coding: utf-8 -*-\n\n\nfrom odoo import api, fields, models\n\n\nclass MailMessage(models.Model):\n    _inherit = 'mail.message'\n\n    rating_ids = fields.One2many('rating.rating', 'message_id', string='Related ratings')\n    rating_value = fields.Float(\"Rating Value\", compute='_compute_rating_value', store=True)\n\n    @api.multi\n    @api.depends('rating_ids', 'rating_ids.rating')\n    def _compute_rating_value(self):\n        ratings = self.env['rating.rating'].search([('message_id', 'in', self.ids), ('consumed', '=', True)], order='create_date DESC')\n        mapping = dict((r.message_id.id, r.rating) for r in ratings)\n        for message in self:\n            message.rating_value = mapping.get(message.id, 0.0)\n", "comments": "      coding  utf 8        part odoo  see license file full copyright licensing details  ", "content": "# -*- coding: utf-8 -*-\n# Part of Odoo. See LICENSE file for full copyright and licensing details.\n\nfrom odoo import api, fields, models\n\n\nclass MailMessage(models.Model):\n    _inherit = 'mail.message'\n\n    rating_ids = fields.One2many('rating.rating', 'message_id', string='Related ratings')\n    rating_value = fields.Float(\"Rating Value\", compute='_compute_rating_value', store=True)\n\n    @api.multi\n    @api.depends('rating_ids', 'rating_ids.rating')\n    def _compute_rating_value(self):\n        ratings = self.env['rating.rating'].search([('message_id', 'in', self.ids), ('consumed', '=', True)], order='create_date DESC')\n        mapping = dict((r.message_id.id, r.rating) for r in ratings)\n        for message in self:\n            message.rating_value = mapping.get(message.id, 0.0)\n", "description": "Odoo. Open Source Apps To Grow Your Business.", "file_name": "mail_message.py", "id": "666d375ceced568ffef41b6c42aa8185", "language": "Python", "project_name": "odoo", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/odoo-odoo/odoo-odoo-b25250f/addons/rating/models/mail_message.py", "save_time": "", "source": "", "update_at": "2018-03-18T08:30:22Z", "url": "https://github.com/odoo/odoo", "wiki": true}