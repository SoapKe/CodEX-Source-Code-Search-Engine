{"author": "tgalal", "code": "from yowsup.layers.interface                           import YowInterfaceLayer, ProtocolEntityCallback\n\nclass EchoLayer(YowInterfaceLayer):\n\n    @ProtocolEntityCallback(\"message\")\n    def onMessage(self, messageProtocolEntity):\n\n        if messageProtocolEntity.getType() == 'text':\n            self.onTextMessage(messageProtocolEntity)\n        elif messageProtocolEntity.getType() == 'media':\n            self.onMediaMessage(messageProtocolEntity)\n\n        self.toLower(messageProtocolEntity.forward(messageProtocolEntity.getFrom()))\n        self.toLower(messageProtocolEntity.ack())\n        self.toLower(messageProtocolEntity.ack(True))\n\n\n    @ProtocolEntityCallback(\"receipt\")\n    def onReceipt(self, entity):\n        self.toLower(entity.ack())\n\n    def onTextMessage(self,messageProtocolEntity):\n        \n        print(\"Echoing %s to %s\" % (messageProtocolEntity.getBody(), messageProtocolEntity.getFrom(False)))\n\n    def onMediaMessage(self, messageProtocolEntity):\n        \n        if messageProtocolEntity.getMediaType() == \"image\":\n            print(\"Echoing image %s to %s\" % (messageProtocolEntity.url, messageProtocolEntity.getFrom(False)))\n\n        elif messageProtocolEntity.getMediaType() == \"location\":\n            print(\"Echoing location (%s, %s) to %s\" % (messageProtocolEntity.getLatitude(), messageProtocolEntity.getLongitude(), messageProtocolEntity.getFrom(False)))\n\n        elif messageProtocolEntity.getMediaType() == \"vcard\":\n            print(\"Echoing vcard (%s, %s) to %s\" % (messageProtocolEntity.getName(), messageProtocolEntity.getCardData(), messageProtocolEntity.getFrom(False)))\n", "comments": "  print info    print info ", "content": "from yowsup.layers.interface                           import YowInterfaceLayer, ProtocolEntityCallback\n\nclass EchoLayer(YowInterfaceLayer):\n\n    @ProtocolEntityCallback(\"message\")\n    def onMessage(self, messageProtocolEntity):\n\n        if messageProtocolEntity.getType() == 'text':\n            self.onTextMessage(messageProtocolEntity)\n        elif messageProtocolEntity.getType() == 'media':\n            self.onMediaMessage(messageProtocolEntity)\n\n        self.toLower(messageProtocolEntity.forward(messageProtocolEntity.getFrom()))\n        self.toLower(messageProtocolEntity.ack())\n        self.toLower(messageProtocolEntity.ack(True))\n\n\n    @ProtocolEntityCallback(\"receipt\")\n    def onReceipt(self, entity):\n        self.toLower(entity.ack())\n\n    def onTextMessage(self,messageProtocolEntity):\n        # just print info\n        print(\"Echoing %s to %s\" % (messageProtocolEntity.getBody(), messageProtocolEntity.getFrom(False)))\n\n    def onMediaMessage(self, messageProtocolEntity):\n        # just print info\n        if messageProtocolEntity.getMediaType() == \"image\":\n            print(\"Echoing image %s to %s\" % (messageProtocolEntity.url, messageProtocolEntity.getFrom(False)))\n\n        elif messageProtocolEntity.getMediaType() == \"location\":\n            print(\"Echoing location (%s, %s) to %s\" % (messageProtocolEntity.getLatitude(), messageProtocolEntity.getLongitude(), messageProtocolEntity.getFrom(False)))\n\n        elif messageProtocolEntity.getMediaType() == \"vcard\":\n            print(\"Echoing vcard (%s, %s) to %s\" % (messageProtocolEntity.getName(), messageProtocolEntity.getCardData(), messageProtocolEntity.getFrom(False)))\n", "description": "The python WhatsApp library", "file_name": "layer.py", "id": "a0877b219eb5ed461cc650dab23976bd", "language": "Python", "project_name": "yowsup", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/tgalal-yowsup/tgalal-yowsup-03795cc/yowsup/demos/echoclient/layer.py", "save_time": "", "source": "", "update_at": "2018-03-18T13:01:40Z", "url": "https://github.com/tgalal/yowsup", "wiki": true}