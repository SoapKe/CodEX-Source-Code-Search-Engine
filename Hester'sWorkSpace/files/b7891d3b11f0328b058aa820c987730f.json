{"author": "mitmproxy", "code": "# (this script works best with --anticache)\nfrom bs4 import BeautifulSoup\nfrom mitmproxy import ctx, http\n\n\nclass Injector:\n    def load(self, loader):\n        loader.add_option(\n            \"iframe\", str, \"\", \"IFrame to inject\"\n        )\n\n    def response(self, flow: http.HTTPFlow) -> None:\n        if ctx.options.iframe:\n            html = BeautifulSoup(flow.response.content, \"html.parser\")\n            if html.body:\n                iframe = html.new_tag(\n                    \"iframe\",\n                    src=ctx.options.iframe,\n                    frameborder=0,\n                    height=0,\n                    width=0)\n                html.body.insert(0, iframe)\n                flow.response.content = str(html).encode(\"utf8\")\n\n\naddons = [Injector()]\n", "comments": "  (this script works best   anticache) ", "content": "# (this script works best with --anticache)\nfrom bs4 import BeautifulSoup\nfrom mitmproxy import ctx, http\n\n\nclass Injector:\n    def load(self, loader):\n        loader.add_option(\n            \"iframe\", str, \"\", \"IFrame to inject\"\n        )\n\n    def response(self, flow: http.HTTPFlow) -> None:\n        if ctx.options.iframe:\n            html = BeautifulSoup(flow.response.content, \"html.parser\")\n            if html.body:\n                iframe = html.new_tag(\n                    \"iframe\",\n                    src=ctx.options.iframe,\n                    frameborder=0,\n                    height=0,\n                    width=0)\n                html.body.insert(0, iframe)\n                flow.response.content = str(html).encode(\"utf8\")\n\n\naddons = [Injector()]\n", "description": "An interactive TLS-capable intercepting HTTP proxy for penetration testers and software developers.", "file_name": "modify_body_inject_iframe.py", "id": "b7891d3b11f0328b058aa820c987730f", "language": "Python", "project_name": "mitmproxy", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/mitmproxy-mitmproxy/mitmproxy-mitmproxy-3c7725a/examples/simple/modify_body_inject_iframe.py", "save_time": "", "source": "", "update_at": "2018-03-18T11:30:56Z", "url": "https://github.com/mitmproxy/mitmproxy", "wiki": false}