{"author": "odoo", "code": "# -*- coding: utf-8 -*-\n\n\nfrom odoo.addons.website_sale.controllers.main import WebsiteSale\nfrom odoo.http import request\nfrom odoo.tools import ustr\nfrom odoo.tools.pycompat import izip\n\nclass WebsiteSale(WebsiteSale):\n\n    def get_attribute_value_ids(self, product):\n        res = super(WebsiteSale, self).get_attribute_value_ids(product)\n        variant_ids = [r[0] for r in res]\n        \n        for r, variant in izip(res, request.env['product.product'].sudo().browse(variant_ids)):\n            r.extend([{\n                'virtual_available': variant.virtual_available,\n                'product_type': variant.type,\n                'inventory_availability': variant.inventory_availability,\n                'available_threshold': variant.available_threshold,\n                'custom_message': variant.custom_message,\n                'product_template': variant.product_tmpl_id.id,\n                'cart_qty': variant.cart_qty,\n                'uom_name': variant.uom_id.name,\n            }])\n\n        return res\n", "comments": "      coding  utf 8        part odoo  see license file full copyright licensing details     recordsets conserve order ", "content": "# -*- coding: utf-8 -*-\n# Part of Odoo. See LICENSE file for full copyright and licensing details.\n\nfrom odoo.addons.website_sale.controllers.main import WebsiteSale\nfrom odoo.http import request\nfrom odoo.tools import ustr\nfrom odoo.tools.pycompat import izip\n\nclass WebsiteSale(WebsiteSale):\n\n    def get_attribute_value_ids(self, product):\n        res = super(WebsiteSale, self).get_attribute_value_ids(product)\n        variant_ids = [r[0] for r in res]\n        # recordsets conserve the order\n        for r, variant in izip(res, request.env['product.product'].sudo().browse(variant_ids)):\n            r.extend([{\n                'virtual_available': variant.virtual_available,\n                'product_type': variant.type,\n                'inventory_availability': variant.inventory_availability,\n                'available_threshold': variant.available_threshold,\n                'custom_message': variant.custom_message,\n                'product_template': variant.product_tmpl_id.id,\n                'cart_qty': variant.cart_qty,\n                'uom_name': variant.uom_id.name,\n            }])\n\n        return res\n", "description": "Odoo. Open Source Apps To Grow Your Business.", "file_name": "main.py", "id": "ff5ba74dcd7baf568fee171e50cff8f6", "language": "Python", "project_name": "odoo", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/odoo-odoo/odoo-odoo-b25250f/addons/website_sale_stock/controllers/main.py", "save_time": "", "source": "", "update_at": "2018-03-18T08:30:22Z", "url": "https://github.com/odoo/odoo", "wiki": true}