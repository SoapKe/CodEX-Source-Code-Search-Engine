{"author": "HelloZeroNet", "code": "from bitcoinrpc.authproxy import AuthServiceProxy, JSONRPCException\nimport time, json, os, sys, re, socket\n\n\ndef initRpc(config):\n    \n    rpc_data = {\n        'connect': '127.0.0.1',\n        'port': '8336',\n        'user': 'PLACEHOLDER',\n        'password': 'PLACEHOLDER',\n        'clienttimeout': '900'\n    }\n    try:\n        fptr = open(config, 'r')\n        lines = fptr.readlines()\n        fptr.close()\n    except:\n        return None  \n\n    for line in lines:\n        if not line.startswith('rpc'):\n            continue\n        key_val = line.split(None, 1)[0]\n        (key, val) = key_val.split('=', 1)\n        if not key or not val:\n            continue\n        rpc_data[key[3:]] = val\n\n    url = 'http://%(user)s:%(password)s@%(connect)s:%(port)s' % rpc_data\n\n    return url, int(rpc_data['clienttimeout'])\n\n\n\ndef lookupDomain(domain):\n    domain = domain.lower()\n\n    \n    if domain[-4:] == \".bit\":\n        domain = domain[0:-4]\n\n    \n    if domain.find(\".\") != -1:\n        subdomain = domain[0:domain.find(\".\")]\n        domain = domain[domain.find(\".\")+1:]\n    else:\n        subdomain = \"\"\n\n    try:\n        domain_object = rpc.name_show(\"d/\"+domain)\n    except:\n        \n        return None\n\n    domain_json = json.loads(domain_object[\"value\"])\n\n    try:\n        domain_address = domain_json[\"zeronet\"][subdomain]\n    except:\n        \n        return None\n\n    return domain_address\n\n\n\n\n\n\nif sys.platform == \"win32\":\n    namecoin_location = os.getenv('APPDATA') + \"/Namecoin/\"\nelse:\n    namecoin_location = os.path.expanduser(\"~/.namecoin/\")\n\n\nrpc_auth, rpc_timeout = initRpc(namecoin_location + \"namecoin.conf\")\nrpc = AuthServiceProxy(rpc_auth, timeout=rpc_timeout)\n", "comments": "   initialize namecoin rpc       connecting rpc    or take appropriate action    either returns domain address none exist    supports subdomains  bit end   remove  bit end   check subdomain   domain exist   domain exists zeronet value    loading config       check whether platform windows linux    on linux namecoin installed    namecoin  windows  appdata  namecoin    initialize rpc connection ", "content": "from bitcoinrpc.authproxy import AuthServiceProxy, JSONRPCException\nimport time, json, os, sys, re, socket\n\n# Connecting to RPC\ndef initRpc(config):\n    \"\"\"Initialize Namecoin RPC\"\"\"\n    rpc_data = {\n        'connect': '127.0.0.1',\n        'port': '8336',\n        'user': 'PLACEHOLDER',\n        'password': 'PLACEHOLDER',\n        'clienttimeout': '900'\n    }\n    try:\n        fptr = open(config, 'r')\n        lines = fptr.readlines()\n        fptr.close()\n    except:\n        return None  # Or take some other appropriate action\n\n    for line in lines:\n        if not line.startswith('rpc'):\n            continue\n        key_val = line.split(None, 1)[0]\n        (key, val) = key_val.split('=', 1)\n        if not key or not val:\n            continue\n        rpc_data[key[3:]] = val\n\n    url = 'http://%(user)s:%(password)s@%(connect)s:%(port)s' % rpc_data\n\n    return url, int(rpc_data['clienttimeout'])\n\n# Either returns domain's address or none if it doesn't exist\n# Supports subdomains and .bit on the end\ndef lookupDomain(domain):\n    domain = domain.lower()\n\n    #remove .bit on end\n    if domain[-4:] == \".bit\":\n        domain = domain[0:-4]\n\n    #check for subdomain\n    if domain.find(\".\") != -1:\n        subdomain = domain[0:domain.find(\".\")]\n        domain = domain[domain.find(\".\")+1:]\n    else:\n        subdomain = \"\"\n\n    try:\n        domain_object = rpc.name_show(\"d/\"+domain)\n    except:\n        #domain doesn't exist\n        return None\n\n    domain_json = json.loads(domain_object[\"value\"])\n\n    try:\n        domain_address = domain_json[\"zeronet\"][subdomain]\n    except:\n        #domain exists but doesn't have any zeronet value\n        return None\n\n    return domain_address\n\n# Loading config...\n\n# Check whether platform is on windows or linux\n# On linux namecoin is installed under ~/.namecoin, while on on windows it is in %appdata%/Namecoin\n\nif sys.platform == \"win32\":\n    namecoin_location = os.getenv('APPDATA') + \"/Namecoin/\"\nelse:\n    namecoin_location = os.path.expanduser(\"~/.namecoin/\")\n\n# Initialize rpc connection\nrpc_auth, rpc_timeout = initRpc(namecoin_location + \"namecoin.conf\")\nrpc = AuthServiceProxy(rpc_auth, timeout=rpc_timeout)\n", "description": "ZeroNet - Decentralized websites using Bitcoin crypto and BitTorrent network", "file_name": "domainLookup.py", "id": "715abc83c9180c4febbac617bab559a0", "language": "Python", "project_name": "ZeroNet", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/HelloZeroNet-ZeroNet/HelloZeroNet-ZeroNet-8828629/plugins/disabled-Zeroname-local/domainLookup.py", "save_time": "", "source": "", "update_at": "2018-03-18T12:17:52Z", "url": "https://github.com/HelloZeroNet/ZeroNet", "wiki": true}