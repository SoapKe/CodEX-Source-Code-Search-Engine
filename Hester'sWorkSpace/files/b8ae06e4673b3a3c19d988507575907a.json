{"author": "rg3", "code": "\nfrom __future__ import unicode_literals\n\nfrom .common import InfoExtractor\nfrom ..utils import (\n    int_or_none,\n    parse_duration,\n)\n\n\nclass RtlNlIE(InfoExtractor):\n    IE_NAME = 'rtl.nl'\n    IE_DESC = 'rtl.nl and rtlxl.nl'\n    _VALID_URL = r\n\n    _TESTS = [{\n        'url': 'http://www.rtlxl.nl/\n        'md5': '473d1946c1fdd050b2c0161a4b13c373',\n        'info_dict': {\n            'id': '82b1aad1-4a14-3d7b-b554-b0aed1b2c416',\n            'ext': 'mp4',\n            'title': 'RTL Nieuws',\n            'description': 'md5:d41d8cd98f00b204e9800998ecf8427e',\n            'timestamp': 1461951000,\n            'upload_date': '20160429',\n            'duration': 1167.96,\n        },\n    }, {\n        \n        'url': 'http://www.rtl.nl/system/videoplayer/derden/rtlnieuws/video_embed.html\n        'md5': 'dea7474214af1271d91ef332fb8be7ea',\n        'info_dict': {\n            'id': '84ae5571-ac25-4225-ae0c-ef8d9efb2aed',\n            'ext': 'mp4',\n            'timestamp': 1424039400,\n            'title': 'RTL Nieuws - Nieuwe beelden Kopenhagen: chaos direct na aanslag',\n            'thumbnail': r're:^https?://screenshots\\.rtl\\.nl/(?:[^/]+/)*sz=[0-9]+x[0-9]+/uuid=84ae5571-ac25-4225-ae0c-ef8d9efb2aed$',\n            'upload_date': '20150215',\n            'description': 'Er zijn nieuwe beelden vrijgegeven die vlak na de aanslag in Kopenhagen zijn gemaakt. Op de video is goed te zien hoe omstanders zich bekommeren om \u00e9\u00e9n van de slachtoffers, terwijl de eerste agenten ter plaatse komen.',\n        }\n    }, {\n        \n        \n        'url': 'http://www.rtl.nl/system/videoplayer/derden/rtlnieuws/video_embed.html\n        'info_dict': {\n            'id': 'f536aac0-1dc3-4314-920e-3bd1c5b3811a',\n            'ext': 'mp4',\n            'title': 'RTL Nieuws - Meer beelden van overval juwelier',\n            'thumbnail': r're:^https?://screenshots\\.rtl\\.nl/(?:[^/]+/)*sz=[0-9]+x[0-9]+/uuid=f536aac0-1dc3-4314-920e-3bd1c5b3811a$',\n            'timestamp': 1437233400,\n            'upload_date': '20150718',\n            'duration': 30.474,\n        },\n        'params': {\n            'skip_download': True,\n        },\n    }, {\n        \n        'url': 'http://www.rtlxl.nl/\n        'only_matching': True,\n    }, {\n        'url': 'http://www.rtl.nl/system/videoplayer/derden/embed.html\n        'only_matching': True,\n    }, {\n        'url': 'http://rtlxl.nl/?_ga=1.204735956.572365465.1466978370\n        'only_matching': True,\n    }, {\n        'url': 'https://www.rtl.nl/video/c603c9c2-601d-4b5e-8175-64f1e942dc7d/',\n        'only_matching': True,\n    }, {\n        'url': 'https://static.rtl.nl/embed/?uuid=1a2970fc-5c0b-43ff-9fdc-927e39e6d1bc&autoplay=false&publicatiepunt=rtlnieuwsnl',\n        'only_matching': True,\n    }]\n\n    def _real_extract(self, url):\n        uuid = self._match_id(url)\n        info = self._download_json(\n            'http://www.rtl.nl/system/s4m/vfd/version=2/uuid=%s/fmt=adaptive/' % uuid,\n            uuid)\n\n        material = info['material'][0]\n        title = info['abstracts'][0]['name']\n        subtitle = material.get('title')\n        if subtitle:\n            title += ' - %s' % subtitle\n        description = material.get('synopsis')\n\n        meta = info.get('meta', {})\n\n        videopath = material['videopath']\n        m3u8_url = meta.get('videohost', 'http://manifest.us.rtl.nl') + videopath\n\n        formats = self._extract_m3u8_formats(\n            m3u8_url, uuid, 'mp4', m3u8_id='hls', fatal=False)\n        self._sort_formats(formats)\n\n        thumbnails = []\n\n        for p in ('poster_base_url', '\"thumb_base_url\"'):\n            if not meta.get(p):\n                continue\n\n            thumbnails.append({\n                'url': self._proto_relative_url(meta[p] + uuid),\n                'width': int_or_none(self._search_regex(\n                    r'/sz=([0-9]+)', meta[p], 'thumbnail width', fatal=False)),\n                'height': int_or_none(self._search_regex(\n                    r'/sz=[0-9]+x([0-9]+)',\n                    meta[p], 'thumbnail height', fatal=False))\n            })\n\n        return {\n            'id': uuid,\n            'title': title,\n            'formats': formats,\n            'timestamp': material['original_date'],\n            'description': description,\n            'duration': parse_duration(material.get('duration')),\n            'thumbnails': thumbnails,\n        }\n", "comments": "(?x)\n        https?://(?:(?:www|static)\\.)?\n        (?:\n            rtlxl\\.nl/[^\\#]*\\#!/[^/]+/|\n            rtl\\.nl/(?:(?:system/videoplayer/(?:[^/]+/)+(?:video_)?embed\\.html|embed)\\b.+?\\buuid=|video/)\n        )\n        (?P<id>[0-9a-f-]+)\n)\n# coding: utf-8\n#!/rtl-nieuws-132237/82b1aad1-4a14-3d7b-b554-b0aed1b2c416',\n# best format avaialble a3t\n#uuid=84ae5571-ac25-4225-ae0c-ef8d9efb2aed/autoplay=false',\n# empty synopsis and missing episodes (see https://github.com/rg3/youtube-dl/issues/6275)\n# best format available nettv\n#uuid=f536aac0-1dc3-4314-920e-3bd1c5b3811a/autoplay=false',\n# encrypted m3u8 streams, georestricted\n#!/afl-2-257632/52a74543-c504-4cde-8aa8-ec66fe8d68a7',\n#!/uuid=bb0353b0-d6a4-1dad-90e9-18fe75b8d1f0',\n#!/rtl-nieuws-132237/3c487912-023b-49ac-903e-2c5d79f8410f',\n", "content": "# coding: utf-8\nfrom __future__ import unicode_literals\n\nfrom .common import InfoExtractor\nfrom ..utils import (\n    int_or_none,\n    parse_duration,\n)\n\n\nclass RtlNlIE(InfoExtractor):\n    IE_NAME = 'rtl.nl'\n    IE_DESC = 'rtl.nl and rtlxl.nl'\n    _VALID_URL = r'''(?x)\n        https?://(?:(?:www|static)\\.)?\n        (?:\n            rtlxl\\.nl/[^\\#]*\\#!/[^/]+/|\n            rtl\\.nl/(?:(?:system/videoplayer/(?:[^/]+/)+(?:video_)?embed\\.html|embed)\\b.+?\\buuid=|video/)\n        )\n        (?P<id>[0-9a-f-]+)'''\n\n    _TESTS = [{\n        'url': 'http://www.rtlxl.nl/#!/rtl-nieuws-132237/82b1aad1-4a14-3d7b-b554-b0aed1b2c416',\n        'md5': '473d1946c1fdd050b2c0161a4b13c373',\n        'info_dict': {\n            'id': '82b1aad1-4a14-3d7b-b554-b0aed1b2c416',\n            'ext': 'mp4',\n            'title': 'RTL Nieuws',\n            'description': 'md5:d41d8cd98f00b204e9800998ecf8427e',\n            'timestamp': 1461951000,\n            'upload_date': '20160429',\n            'duration': 1167.96,\n        },\n    }, {\n        # best format avaialble a3t\n        'url': 'http://www.rtl.nl/system/videoplayer/derden/rtlnieuws/video_embed.html#uuid=84ae5571-ac25-4225-ae0c-ef8d9efb2aed/autoplay=false',\n        'md5': 'dea7474214af1271d91ef332fb8be7ea',\n        'info_dict': {\n            'id': '84ae5571-ac25-4225-ae0c-ef8d9efb2aed',\n            'ext': 'mp4',\n            'timestamp': 1424039400,\n            'title': 'RTL Nieuws - Nieuwe beelden Kopenhagen: chaos direct na aanslag',\n            'thumbnail': r're:^https?://screenshots\\.rtl\\.nl/(?:[^/]+/)*sz=[0-9]+x[0-9]+/uuid=84ae5571-ac25-4225-ae0c-ef8d9efb2aed$',\n            'upload_date': '20150215',\n            'description': 'Er zijn nieuwe beelden vrijgegeven die vlak na de aanslag in Kopenhagen zijn gemaakt. Op de video is goed te zien hoe omstanders zich bekommeren om \u00e9\u00e9n van de slachtoffers, terwijl de eerste agenten ter plaatse komen.',\n        }\n    }, {\n        # empty synopsis and missing episodes (see https://github.com/rg3/youtube-dl/issues/6275)\n        # best format available nettv\n        'url': 'http://www.rtl.nl/system/videoplayer/derden/rtlnieuws/video_embed.html#uuid=f536aac0-1dc3-4314-920e-3bd1c5b3811a/autoplay=false',\n        'info_dict': {\n            'id': 'f536aac0-1dc3-4314-920e-3bd1c5b3811a',\n            'ext': 'mp4',\n            'title': 'RTL Nieuws - Meer beelden van overval juwelier',\n            'thumbnail': r're:^https?://screenshots\\.rtl\\.nl/(?:[^/]+/)*sz=[0-9]+x[0-9]+/uuid=f536aac0-1dc3-4314-920e-3bd1c5b3811a$',\n            'timestamp': 1437233400,\n            'upload_date': '20150718',\n            'duration': 30.474,\n        },\n        'params': {\n            'skip_download': True,\n        },\n    }, {\n        # encrypted m3u8 streams, georestricted\n        'url': 'http://www.rtlxl.nl/#!/afl-2-257632/52a74543-c504-4cde-8aa8-ec66fe8d68a7',\n        'only_matching': True,\n    }, {\n        'url': 'http://www.rtl.nl/system/videoplayer/derden/embed.html#!/uuid=bb0353b0-d6a4-1dad-90e9-18fe75b8d1f0',\n        'only_matching': True,\n    }, {\n        'url': 'http://rtlxl.nl/?_ga=1.204735956.572365465.1466978370#!/rtl-nieuws-132237/3c487912-023b-49ac-903e-2c5d79f8410f',\n        'only_matching': True,\n    }, {\n        'url': 'https://www.rtl.nl/video/c603c9c2-601d-4b5e-8175-64f1e942dc7d/',\n        'only_matching': True,\n    }, {\n        'url': 'https://static.rtl.nl/embed/?uuid=1a2970fc-5c0b-43ff-9fdc-927e39e6d1bc&autoplay=false&publicatiepunt=rtlnieuwsnl',\n        'only_matching': True,\n    }]\n\n    def _real_extract(self, url):\n        uuid = self._match_id(url)\n        info = self._download_json(\n            'http://www.rtl.nl/system/s4m/vfd/version=2/uuid=%s/fmt=adaptive/' % uuid,\n            uuid)\n\n        material = info['material'][0]\n        title = info['abstracts'][0]['name']\n        subtitle = material.get('title')\n        if subtitle:\n            title += ' - %s' % subtitle\n        description = material.get('synopsis')\n\n        meta = info.get('meta', {})\n\n        videopath = material['videopath']\n        m3u8_url = meta.get('videohost', 'http://manifest.us.rtl.nl') + videopath\n\n        formats = self._extract_m3u8_formats(\n            m3u8_url, uuid, 'mp4', m3u8_id='hls', fatal=False)\n        self._sort_formats(formats)\n\n        thumbnails = []\n\n        for p in ('poster_base_url', '\"thumb_base_url\"'):\n            if not meta.get(p):\n                continue\n\n            thumbnails.append({\n                'url': self._proto_relative_url(meta[p] + uuid),\n                'width': int_or_none(self._search_regex(\n                    r'/sz=([0-9]+)', meta[p], 'thumbnail width', fatal=False)),\n                'height': int_or_none(self._search_regex(\n                    r'/sz=[0-9]+x([0-9]+)',\n                    meta[p], 'thumbnail height', fatal=False))\n            })\n\n        return {\n            'id': uuid,\n            'title': title,\n            'formats': formats,\n            'timestamp': material['original_date'],\n            'description': description,\n            'duration': parse_duration(material.get('duration')),\n            'thumbnails': thumbnails,\n        }\n", "description": "Command-line program to download videos from YouTube.com and other video sites", "file_name": "rtlnl.py", "language": "Python", "project_name": "youtube-dl", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/rg3_youtube-dl/rg3-youtube-dl-6202f08/youtube_dl/extractor/rtlnl.py", "save_time": "", "source": "", "update_at": "2018-03-07T09:18:39Z", "url": "https://github.com/rg3/youtube-dl", "wiki": false}