{"author": "ansible", "code": "import json\n\nfrom ansible.compat.tests import unittest\nfrom ansible.compat.tests.mock import patch\nfrom ansible.module_utils import basic\nfrom ansible.module_utils._text import to_bytes\n\n\ndef set_module_args(args):\n    args = json.dumps({'ANSIBLE_MODULE_ARGS': args})\n    basic._ANSIBLE_ARGS = to_bytes(args)\n\n\nclass AnsibleExitJson(Exception):\n    pass\n\n\nclass AnsibleFailJson(Exception):\n    pass\n\n\ndef exit_json(*args, **kwargs):\n    if 'changed' not in kwargs:\n        kwargs['changed'] = False\n    raise AnsibleExitJson(kwargs)\n\n\ndef fail_json(*args, **kwargs):\n    kwargs['failed'] = True\n    raise AnsibleFailJson(kwargs)\n\n\nclass ModuleTestCase(unittest.TestCase):\n\n    def setUp(self):\n        self.mock_module = patch.multiple(basic.AnsibleModule, exit_json=exit_json, fail_json=fail_json)\n        self.mock_module.start()\n        self.addCleanup(self.mock_module.stop)\n", "comments": "", "content": "import json\n\nfrom ansible.compat.tests import unittest\nfrom ansible.compat.tests.mock import patch\nfrom ansible.module_utils import basic\nfrom ansible.module_utils._text import to_bytes\n\n\ndef set_module_args(args):\n    args = json.dumps({'ANSIBLE_MODULE_ARGS': args})\n    basic._ANSIBLE_ARGS = to_bytes(args)\n\n\nclass AnsibleExitJson(Exception):\n    pass\n\n\nclass AnsibleFailJson(Exception):\n    pass\n\n\ndef exit_json(*args, **kwargs):\n    if 'changed' not in kwargs:\n        kwargs['changed'] = False\n    raise AnsibleExitJson(kwargs)\n\n\ndef fail_json(*args, **kwargs):\n    kwargs['failed'] = True\n    raise AnsibleFailJson(kwargs)\n\n\nclass ModuleTestCase(unittest.TestCase):\n\n    def setUp(self):\n        self.mock_module = patch.multiple(basic.AnsibleModule, exit_json=exit_json, fail_json=fail_json)\n        self.mock_module.start()\n        self.addCleanup(self.mock_module.stop)\n", "description": "Ansible is a radically simple IT automation platform that makes your applications and systems easier to deploy. Avoid writing scripts or custom code to deploy and update your applications\u2014 automate in a language that approaches plain English, using SSH, with no agents to install on remote systems.", "file_name": "utils.py", "id": "9e52483cafea4c55f8faf5fead16938e", "language": "Python", "project_name": "ansible", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/ansible-ansible/ansible-ansible-d30554b/test/units/modules/utils.py", "save_time": "", "source": "", "update_at": "2018-03-18T14:08:28Z", "url": "https://github.com/ansible/ansible", "wiki": false}