{"author": "odoo", "code": "# -*- coding: utf-8 -*-\n\n\nfrom operator import itemgetter\nfrom odoo import api, models\n\nclass IrUiView(models.Model):\n    _inherit = 'ir.ui.view'\n\n    @api.model\n    def _validate_custom_views(self, model):\n        \n        result = super(IrUiView, self)._validate_custom_views(model)\n\n        self._cr.execute(\"\"\"\n            SELECT max(v.id)\n               FROM ir_ui_view v\n          LEFT JOIN ir_model_data md ON (md.model = 'ir.ui.view' AND md.res_id = v.id)\n          LEFT JOIN ir_module_module m ON (m.name = md.module)\n              WHERE m.imported = true\n                AND v.model = %s\n                AND v.active = true\n           GROUP BY coalesce(v.inherit_id, v.id)\n        \"\"\", [model])\n\n        ids = (row[0] for row in self._cr.fetchall())\n        views = self.with_context(load_all_views=True).browse(ids)\n        return views._check_xml() and result\n", "comments": "                select max(v id)                from ir ui view v           left join ir model data md on (md model    ir ui view  and md res id   v id)           left join ir module module on (m name   md module)               where imported   true                 and v model                    and v active   true            group by coalesce(v inherit id  v id)                    coding  utf 8        part odoo  see license file full copyright licensing details     views imported modules considered custom views ", "content": "# -*- coding: utf-8 -*-\n# Part of Odoo. See LICENSE file for full copyright and licensing details.\n\nfrom operator import itemgetter\nfrom odoo import api, models\n\nclass IrUiView(models.Model):\n    _inherit = 'ir.ui.view'\n\n    @api.model\n    def _validate_custom_views(self, model):\n        # views from imported modules should be considered as custom views\n        result = super(IrUiView, self)._validate_custom_views(model)\n\n        self._cr.execute(\"\"\"\n            SELECT max(v.id)\n               FROM ir_ui_view v\n          LEFT JOIN ir_model_data md ON (md.model = 'ir.ui.view' AND md.res_id = v.id)\n          LEFT JOIN ir_module_module m ON (m.name = md.module)\n              WHERE m.imported = true\n                AND v.model = %s\n                AND v.active = true\n           GROUP BY coalesce(v.inherit_id, v.id)\n        \"\"\", [model])\n\n        ids = (row[0] for row in self._cr.fetchall())\n        views = self.with_context(load_all_views=True).browse(ids)\n        return views._check_xml() and result\n", "description": "Odoo. Open Source Apps To Grow Your Business.", "file_name": "ir_ui_view.py", "id": "0fdbcdec8ffb7baf01eba64ea171db52", "language": "Python", "project_name": "odoo", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/odoo-odoo/odoo-odoo-b25250f/addons/base_import_module/models/ir_ui_view.py", "save_time": "", "source": "", "update_at": "2018-03-18T08:30:22Z", "url": "https://github.com/odoo/odoo", "wiki": true}