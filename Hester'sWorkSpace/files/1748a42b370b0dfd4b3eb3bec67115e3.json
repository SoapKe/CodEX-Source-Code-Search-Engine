{"author": "ansible", "code": "\n\"\"\"\n\n\n @author: Vilian Atmadzhov (vilian.atmadzhov@paddypowerbetfair.com) GitHub ID: vivobg\n\n module_check: not supported\n\n Copyright: (c) 2017 Gaurav Rastogi, <grastogi@avinetworks.com>\n                     Vilian Atmadzhov, <vilian.atmadzhov@paddypowerbetfair.com>\n GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)\n\n\"\"\"\n\nANSIBLE_METADATA = {'metadata_version': '1.1',\n                    'status': ['preview'],\n                    'supported_by': 'community'}\n\n\nDOCUMENTATION = '''\n---\nmodule: avi_api_version\nauthor: Vilian Atmadzhov (vilian.atmadzhov@paddypowerbetfair.com)\n\nshort_description: Avi API Version Module\ndescription:\n    - This module can be used to obtain the version of the Avi REST API. U(https://avinetworks.com/)\nversion_added: 2.5\nrequirements: [ avisdk ]\noptions: {}\nextends_documentation_fragment:\n    - avi\n'''\n\nEXAMPLES = '''\n  - name: Get AVI API version\n    avi_api_version:\n      controller: \"\"\n      username: \"\"\n      password: \"\"\n      tenant: \"\"\n    register: avi_controller_version\n'''\n\n\nRETURN = '''\nobj:\n    description: Avi REST resource\n    returned: success, changed\n    type: dict\n'''\n\nfrom ansible.module_utils.basic import AnsibleModule\n\ntry:\n    from ansible.module_utils.network.avi.avi import (\n        avi_common_argument_spec, HAS_AVI, AviCredentials)\n    from avi.sdk.avi_api import ApiSession\nexcept ImportError:\n    HAS_AVI = False\n\n\ndef main():\n    module = AnsibleModule(argument_spec=avi_common_argument_spec())\n    if not HAS_AVI:\n        return module.fail_json(msg=(\n            'Avi python API SDK (avisdk) is not installed. '\n            'For more details visit https://github.com/avinetworks/sdk.'))\n    try:\n        api_creds = AviCredentials()\n        api_creds.update_from_ansible_module(module)\n        api = ApiSession.get_session(\n            api_creds.controller, api_creds.username,\n            password=api_creds.password,\n            timeout=api_creds.timeout, tenant=api_creds.tenant,\n            tenant_uuid=api_creds.tenant_uuid, token=api_creds.token,\n            port=api_creds.port)\n\n        remote_api_version = api.remote_api_version\n        remote = {}\n        for key in remote_api_version.keys():\n            remote[key.lower()] = remote_api_version[key]\n        api.close()\n        module.exit_json(changed=False, obj=remote)\n    except Exception as e:\n        module.fail_json(msg=\"Unable to get an AVI session. {}\".format(e))\n\nif __name__ == '__main__':\n    main()\n", "comments": "      created july 24  2017      author  vilian atmadzhov (vilian atmadzhov paddypowerbetfair com) github id  vivobg     module check  supported     copyright  (c) 2017 gaurav rastogi   grastogi avinetworks com                        vilian atmadzhov   vilian atmadzhov paddypowerbetfair com    gnu general public license v3 0  (see copying https   www gnu org licenses gpl 3 0 txt)                module  avi api version author  vilian atmadzhov (vilian atmadzhov paddypowerbetfair com)  short description  avi api version module description        this module used obtain version avi rest api  u(https   avinetworks com ) version added  2 5 requirements    avisdk   options     extends documentation fragment        avi      examples           name  get avi api version     avi api version        controller           username           password           tenant         register  avi controller version       return       obj      description  avi rest resource     returned  success  changed     type  dict         usr bin python    created july 24  2017        author  vilian atmadzhov (vilian atmadzhov paddypowerbetfair com) github id  vivobg       module check  supported       copyright  (c) 2017 gaurav rastogi   grastogi avinetworks com                         vilian atmadzhov   vilian atmadzhov paddypowerbetfair com     gnu general public license v3 0  (see copying https   www gnu org licenses gpl 3 0 txt)    ", "content": "#!/usr/bin/python\n\"\"\"\n# Created on July 24, 2017\n#\n# @author: Vilian Atmadzhov (vilian.atmadzhov@paddypowerbetfair.com) GitHub ID: vivobg\n#\n# module_check: not supported\n#\n# Copyright: (c) 2017 Gaurav Rastogi, <grastogi@avinetworks.com>\n#                     Vilian Atmadzhov, <vilian.atmadzhov@paddypowerbetfair.com>\n# GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)\n#\n\"\"\"\n\nANSIBLE_METADATA = {'metadata_version': '1.1',\n                    'status': ['preview'],\n                    'supported_by': 'community'}\n\n\nDOCUMENTATION = '''\n---\nmodule: avi_api_version\nauthor: Vilian Atmadzhov (vilian.atmadzhov@paddypowerbetfair.com)\n\nshort_description: Avi API Version Module\ndescription:\n    - This module can be used to obtain the version of the Avi REST API. U(https://avinetworks.com/)\nversion_added: 2.5\nrequirements: [ avisdk ]\noptions: {}\nextends_documentation_fragment:\n    - avi\n'''\n\nEXAMPLES = '''\n  - name: Get AVI API version\n    avi_api_version:\n      controller: \"\"\n      username: \"\"\n      password: \"\"\n      tenant: \"\"\n    register: avi_controller_version\n'''\n\n\nRETURN = '''\nobj:\n    description: Avi REST resource\n    returned: success, changed\n    type: dict\n'''\n\nfrom ansible.module_utils.basic import AnsibleModule\n\ntry:\n    from ansible.module_utils.network.avi.avi import (\n        avi_common_argument_spec, HAS_AVI, AviCredentials)\n    from avi.sdk.avi_api import ApiSession\nexcept ImportError:\n    HAS_AVI = False\n\n\ndef main():\n    module = AnsibleModule(argument_spec=avi_common_argument_spec())\n    if not HAS_AVI:\n        return module.fail_json(msg=(\n            'Avi python API SDK (avisdk) is not installed. '\n            'For more details visit https://github.com/avinetworks/sdk.'))\n    try:\n        api_creds = AviCredentials()\n        api_creds.update_from_ansible_module(module)\n        api = ApiSession.get_session(\n            api_creds.controller, api_creds.username,\n            password=api_creds.password,\n            timeout=api_creds.timeout, tenant=api_creds.tenant,\n            tenant_uuid=api_creds.tenant_uuid, token=api_creds.token,\n            port=api_creds.port)\n\n        remote_api_version = api.remote_api_version\n        remote = {}\n        for key in remote_api_version.keys():\n            remote[key.lower()] = remote_api_version[key]\n        api.close()\n        module.exit_json(changed=False, obj=remote)\n    except Exception as e:\n        module.fail_json(msg=\"Unable to get an AVI session. {}\".format(e))\n\nif __name__ == '__main__':\n    main()\n", "description": "Ansible is a radically simple IT automation platform that makes your applications and systems easier to deploy. Avoid writing scripts or custom code to deploy and update your applications\u2014 automate in a language that approaches plain English, using SSH, with no agents to install on remote systems.", "file_name": "avi_api_version.py", "id": "1748a42b370b0dfd4b3eb3bec67115e3", "language": "Python", "project_name": "ansible", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/ansible-ansible/ansible-ansible-d30554b/lib/ansible/modules/network/avi/avi_api_version.py", "save_time": "", "source": "", "update_at": "2018-03-18T14:08:28Z", "url": "https://github.com/ansible/ansible", "wiki": false}