{"author": "tgalal", "code": "from yowsup.structs import ProtocolEntity, ProtocolTreeNode\nfrom .message_media import MediaMessageProtocolEntity\n\nclass VCardMediaMessageProtocolEntity(MediaMessageProtocolEntity):\n    '''\n    <message t=\"{{TIME_STAMP}}\" from=\"{{CONTACT_JID}}\" \n    offline=\"{{OFFLINE}}\" type=\"text\" id=\"{{MESSAGE_ID}}\" notify=\"{{NOTIFY_NAME}}\">\n        <media type=\"vcard\">\n            <vcard name=\"Hany Yasser\">\n                BEGIN:VCARD\n                VERSION:3.0\n                N:Yasser;Hany;;;\n                FN:Hany Yasser\n                PHOTO;BASE64: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\n                BDAY;value=date:1989-01-05\n                ORG:Vodafone Egypt;\n                item1.EMAIL;type=INTERNET:hanyyasser@hotmail.com\n                item1.X-ABLabel:INTERNET\n                item2.EMAIL;type=INTERNET:hanybotbot@hotmail.com\n                item2.X-ABLabel:INTERNET\n                item3.ADR;type=HOME:;;Heliopolis;Cairo;Al Qahirah;;Egypt\n                item4.ADR;type=HOME:;;;cairo;;;Egypt\n                item5.URL:http://www.facebook.com/profile.php?id=626850952\n                item5.X-ABLabel:_$!<HomePage>!$_\n                X-FACEBOOK:hany.yasser1\n                END:VCARD\n            </vcard>\n        </media>\n    </message>\n    '''\n\n\n    def __init__(self, name, card_data, _id = None, _from = None, to = None, notify = None, timestamp = None, participant = None,\n            preview = None, offline = None, retry = None):\n\n        super(VCardMediaMessageProtocolEntity, self).__init__(\"vcard\", _id, _from, to, notify, timestamp, participant, preview, offline, retry)\n        self.setVcardMediaProps(name,card_data)\n\n    def __str__(self):\n        out  = super(MediaMessageProtocolEntity, self).__str__()\n        out += \"Name: %s\\n\" % self.name\n        out += \"Card Data: %s\\n\" % self.card_data\n        return out\n\n    def getName(self):\n        return self.name\n\n    def getCardData(self):\n        return self.card_data\n   \n    def setVcardMediaProps(self, name, card_data):\n        self.name = name\n        self.card_data = card_data\n\n    def toProtocolTreeNode(self):\n        node = super(VCardMediaMessageProtocolEntity, self).toProtocolTreeNode()\n        mediaNode = node.getChild(\"media\")\n        mediaNode[\"type\"] = \"vcard\"\n        vcardNode = ProtocolTreeNode(\"vcard\", {\"name\":self.name}, None,self.card_data)\n        mediaNode.addChild(vcardNode)\n        return node\n\n    @staticmethod\n    def fromProtocolTreeNode(node):\n        entity = MediaMessageProtocolEntity.fromProtocolTreeNode(node)\n        entity.__class__ = VCardMediaMessageProtocolEntity\n        mediaNode = node.getChild(\"media\")\n        entity.setVcardMediaProps(\n            mediaNode.getAllChildren()[0].getAttributeValue('name'),\n            mediaNode.getChild(\"vcard\").getData()\n        )\n        return entity", "comments": "         message    time stamp       contact jid         offline    offline    type  text  id    message id    notify    notify name              media type  vcard                vcard name  hany yasser                   begin vcard                 version 3 0                 n yasser hany                    fn hany yasser                 photo base64  9j 4aaqskzjrgabaqeasabiaad 4qbyrxhpzgaatu0akgaaaagaagesaamaaaabaaeaaidpaaqaaaabaaaajgaaaaaaa6abaamaaaabaaeaakacaaqaaaabaaaaqkadaaqaaaabaaaaqaaaaad 7qa4ughvdg9zag9widmumaa4qklnbaqaaaaaaaa4qklnbcuaaaaaabduhyzzjwcybomaczjs ej  8aaeqgaqabaaweiaairaqmraf eab8aaaefaqebaqebaaaaaaaaaaabagmebqyhcakkc  ealuqaaibawmcbamfbqqeaaabfqecawaeequsitfbbhnryqcicrqygzghccncscevuthwjdnicoijchyxgbkajsynkckqndu2nzg5okneruzhselku1rvvldywvpjzgvmz2hpann0dxz3ehl6g4sfhoeiiyqsk5svlpeymzqio6slpqeoqaqys7s1tre4ubrcw8tfxsfiycrs09tv1tfy2drh4upk5ebn6onq8flz9px29 j5 v eab8baambaqebaqebaqeaaaaaaaabagmebqyhcakkc  ealuraaibagqeawqhbqqeaaecdwabagmrbauhmqysqvehyxetijkbcbrckagxwqkjm1lwfwjy0qowjdthjfexgbkajicokso1njc4otpdrevgr0hjslnuvvzxwflay2rlzmdoawpzdhv2d3h5eokdhiwgh4ijipktljwwl5izmqkjpkwmp6ipqrkztlw2t7i5usldxmxgx8jjytlt1nxw19jz2ulj5oxm5 jp6vlz9px29 j5 v baemabgygbgygcgygcg4kcgooeg4odg4sfxisehisfxwxfxcxfxcchbwchbwchciiiiiiiicnjycnlcwslcwslcwslp baembbwchcwolewokey4fgh8uli4uli4uli4uli4uli4uli4uli4uli4uli4uli4uli4uli4uli4uli4uli4uli4ulv daaqabp aaawdaqaceqmrad8a83lpgaqzn ixgnqzb wpwbkjnv7kgwc5 wcen9dxix3pogtcrefjg3ocbvfzmx2xl8a9pooa9u0b4tdvlh 0tavdzmybkiudkqrkgqsqbkc49o9ebej9am8pxx2bzkuyjawhmjovca4pc4i7jnelcm1box5m6kxnpm5vnx77een17d6vt6avantnabxitnwn4dvpeus3lxiioh5hg5ypul059zvtxlouphduygs7gzro yxocb6a7eoltusa5u9sqbcxznagdenbyxhevymspc0rgvydg9o1a96d9upt5rwk c d6ck0qk0hxd5h 9dy2u9b2rppcngmp6xp9vkgenjwmdsmgrgn3p44qponhvvve9yblsyw8ikxys21vhtk 56v7b4t8f3nhsks91gx anhlxqjbgqty2tgcna kvno0m2n0pyr1oxi431f8r3d7jef6mbaz964hudhscblsz5ofxp2rwzxzdys6rlc0c26xurhcnrkhbvahtpivuvedrdiawz4dixxarrwvj oqce9ezxfg3wlgnc22ysnsizufawc9bz6116utucbuywsrrefb23slcg6v72rrafjgbvoqwoeo78hjvttavfddvpyrwno4lyix3sstg5xz3hfr9a4n7bd6bfw9orxsssybaqncpyngdxx161614t8jxet3 8abxidrhzavuxdu3fmxlmwpp xtxqqtk9be2uynj94ymfb64zwsxdnj5uengas3bmawrkg1gdii ikna avqksoyrwo1onjxvmtkrgtuj 0e3 d9ilfr5trzcsxuu0h zjxjh4k165fqg4txradj dnpn3ri bvt9h8oaxcmf6lsw772by wdovdm90qscphj6vui2gke581rypndqqjkvkj3smcpyzyy6ae elct43e78m f43twi57u4 y4b25byga8cyhne3ytbtk7lflttwcc8nhx8k8v of5edk0 borxjp4bd jqkrltk7ahjpgmztp e8fxetsgtuluzh7hyulz ook7xqesnn g2ra bnmlu8mnmc8hi2uwwmdcdpjjotnpsvodnupi0 v5log wog wc2kssh9ca7dxwnh8a6fpak7rxpl6x6kal qjrvltqwe5545qc9u1z104cbe1pkl3fsqw4szj8qzblsp  s ghgifjjaa2gdhpgy49qzixn2t2rf1nulk5xvl66u4 ylaq20zh8tp rd bo38duyzlndwhclt6r2rvkr3kv7elb3celix8zi3dgam mcdt6dmvbpjzdfvnlj6bvmfhooap0r6jmqujxnoyh9p8a9dfk wazrozeilefothbda9nzmsfyaqlblyz57arv0vumzjbbz 8ixj ddd8qbxpw0w0phk6zasb0g8fq86ecx2c8y6siqn6bg39k6txs0pv7dptnnjabfzreubwqfumdttmpg2rmqut vdnvu07ygkpx4eoysvukyzz 9k                  bday value date 1989 01 05                 org vodafone egypt                  item1 email type internet hanyyasser hotmail com                 item1 x ablabel internet                 item2 email type internet hanybotbot hotmail com                 item2 x ablabel internet                 item3 adr type home   heliopolis cairo al qahirah  egypt                 item4 adr type home    cairo   egypt                 item5 url http   www facebook com profile php id 626850952                 item5 x ablabel     homepage                     x facebook hany yasser1                 end vcard               vcard            media        message          ", "content": "from yowsup.structs import ProtocolEntity, ProtocolTreeNode\nfrom .message_media import MediaMessageProtocolEntity\n\nclass VCardMediaMessageProtocolEntity(MediaMessageProtocolEntity):\n    '''\n    <message t=\"{{TIME_STAMP}}\" from=\"{{CONTACT_JID}}\" \n    offline=\"{{OFFLINE}}\" type=\"text\" id=\"{{MESSAGE_ID}}\" notify=\"{{NOTIFY_NAME}}\">\n        <media type=\"vcard\">\n            <vcard name=\"Hany Yasser\">\n                BEGIN:VCARD\n                VERSION:3.0\n                N:Yasser;Hany;;;\n                FN:Hany Yasser\n                PHOTO;BASE64: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\n                BDAY;value=date:1989-01-05\n                ORG:Vodafone Egypt;\n                item1.EMAIL;type=INTERNET:hanyyasser@hotmail.com\n                item1.X-ABLabel:INTERNET\n                item2.EMAIL;type=INTERNET:hanybotbot@hotmail.com\n                item2.X-ABLabel:INTERNET\n                item3.ADR;type=HOME:;;Heliopolis;Cairo;Al Qahirah;;Egypt\n                item4.ADR;type=HOME:;;;cairo;;;Egypt\n                item5.URL:http://www.facebook.com/profile.php?id=626850952\n                item5.X-ABLabel:_$!<HomePage>!$_\n                X-FACEBOOK:hany.yasser1\n                END:VCARD\n            </vcard>\n        </media>\n    </message>\n    '''\n\n\n    def __init__(self, name, card_data, _id = None, _from = None, to = None, notify = None, timestamp = None, participant = None,\n            preview = None, offline = None, retry = None):\n\n        super(VCardMediaMessageProtocolEntity, self).__init__(\"vcard\", _id, _from, to, notify, timestamp, participant, preview, offline, retry)\n        self.setVcardMediaProps(name,card_data)\n\n    def __str__(self):\n        out  = super(MediaMessageProtocolEntity, self).__str__()\n        out += \"Name: %s\\n\" % self.name\n        out += \"Card Data: %s\\n\" % self.card_data\n        return out\n\n    def getName(self):\n        return self.name\n\n    def getCardData(self):\n        return self.card_data\n   \n    def setVcardMediaProps(self, name, card_data):\n        self.name = name\n        self.card_data = card_data\n\n    def toProtocolTreeNode(self):\n        node = super(VCardMediaMessageProtocolEntity, self).toProtocolTreeNode()\n        mediaNode = node.getChild(\"media\")\n        mediaNode[\"type\"] = \"vcard\"\n        vcardNode = ProtocolTreeNode(\"vcard\", {\"name\":self.name}, None,self.card_data)\n        mediaNode.addChild(vcardNode)\n        return node\n\n    @staticmethod\n    def fromProtocolTreeNode(node):\n        entity = MediaMessageProtocolEntity.fromProtocolTreeNode(node)\n        entity.__class__ = VCardMediaMessageProtocolEntity\n        mediaNode = node.getChild(\"media\")\n        entity.setVcardMediaProps(\n            mediaNode.getAllChildren()[0].getAttributeValue('name'),\n            mediaNode.getChild(\"vcard\").getData()\n        )\n        return entity", "description": "The python WhatsApp library", "file_name": "message_media_vcard.py", "id": "a84d98c1f814fa801503b185b48ac9c9", "language": "Python", "project_name": "yowsup", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/tgalal-yowsup/tgalal-yowsup-03795cc/yowsup/layers/protocol_media/protocolentities/message_media_vcard.py", "save_time": "", "source": "", "update_at": "2018-03-18T13:01:40Z", "url": "https://github.com/tgalal/yowsup", "wiki": true}