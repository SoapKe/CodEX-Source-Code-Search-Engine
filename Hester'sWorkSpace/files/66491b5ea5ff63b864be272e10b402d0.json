{"author": "django", "code": "import copy\nimport datetime\n\nfrom django.contrib.auth.models import User\nfrom django.db import models\n\n\nclass RevisionableModel(models.Model):\n    base = models.ForeignKey('self', models.SET_NULL, null=True)\n    title = models.CharField(blank=True, max_length=255)\n    when = models.DateTimeField(default=datetime.datetime.now)\n\n    def __str__(self):\n        return \"%s (%s, %s)\" % (self.title, self.id, self.base.id)\n\n    def save(self, *args, force_insert=None, force_update=None, **kwargs):\n        super().save(*args, force_insert=force_insert, force_update=force_update, **kwargs)\n        if not self.base:\n            self.base = self\n            super().save(*args, **kwargs)\n\n    def new_revision(self):\n        new_revision = copy.copy(self)\n        new_revision.pk = None\n        return new_revision\n\n\nclass Order(models.Model):\n    created_by = models.ForeignKey(User, models.CASCADE)\n    text = models.TextField()\n\n\nclass TestObject(models.Model):\n    first = models.CharField(max_length=20)\n    second = models.CharField(max_length=20)\n    third = models.CharField(max_length=20)\n\n    def __str__(self):\n        return 'TestObject: %s,%s,%s' % (self.first, self.second, self.third)\n", "comments": "", "content": "import copy\nimport datetime\n\nfrom django.contrib.auth.models import User\nfrom django.db import models\n\n\nclass RevisionableModel(models.Model):\n    base = models.ForeignKey('self', models.SET_NULL, null=True)\n    title = models.CharField(blank=True, max_length=255)\n    when = models.DateTimeField(default=datetime.datetime.now)\n\n    def __str__(self):\n        return \"%s (%s, %s)\" % (self.title, self.id, self.base.id)\n\n    def save(self, *args, force_insert=None, force_update=None, **kwargs):\n        super().save(*args, force_insert=force_insert, force_update=force_update, **kwargs)\n        if not self.base:\n            self.base = self\n            super().save(*args, **kwargs)\n\n    def new_revision(self):\n        new_revision = copy.copy(self)\n        new_revision.pk = None\n        return new_revision\n\n\nclass Order(models.Model):\n    created_by = models.ForeignKey(User, models.CASCADE)\n    text = models.TextField()\n\n\nclass TestObject(models.Model):\n    first = models.CharField(max_length=20)\n    second = models.CharField(max_length=20)\n    third = models.CharField(max_length=20)\n\n    def __str__(self):\n        return 'TestObject: %s,%s,%s' % (self.first, self.second, self.third)\n", "description": "The Web framework for perfectionists with deadlines.", "file_name": "models.py", "id": "66491b5ea5ff63b864be272e10b402d0", "language": "Python", "project_name": "django", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/django-django/django-django-274e3e2/tests/extra_regress/models.py", "save_time": "", "source": "", "update_at": "2018-03-18T13:39:10Z", "url": "https://github.com/django/django", "wiki": false}