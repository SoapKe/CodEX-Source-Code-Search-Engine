{"author": "rg3", "code": "\nfrom __future__ import unicode_literals\n\nimport re\n\nfrom .common import InfoExtractor\nfrom ..utils import (\n    clean_html,\n    unified_strdate,\n)\n\n\nclass NovaIE(InfoExtractor):\n    IE_DESC = 'TN.cz, Pr\u00e1sk.tv, Nova.cz, Novaplus.cz, FANDA.tv, Kr\u00e1sn\u00e1.cz and Doma.cz'\n    _VALID_URL = r'https?://(?:[^.]+\\.)?(?P<site>tv(?:noviny)?|tn|novaplus|vymena|fanda|krasna|doma|prask)\\.nova\\.cz/(?:[^/]+/)+(?P<id>[^/]+?)(?:\\.html|/|$)'\n    _TESTS = [{\n        'url': 'http://tvnoviny.nova.cz/clanek/novinky/co-na-sebe-sportaci-praskli-vime-jestli-pujde-hrdlicka-na-materskou.html?utm_source=tvnoviny&utm_medium=cpfooter&utm_campaign=novaplus',\n        'info_dict': {\n            'id': '1608920',\n            'display_id': 'co-na-sebe-sportaci-praskli-vime-jestli-pujde-hrdlicka-na-materskou',\n            'ext': 'flv',\n            'title': 'Duel: Michal Hrdli\u010dka a Petr Sucho\u0148',\n            'description': 'md5:d0cc509858eee1b1374111c588c6f5d5',\n            'thumbnail': r're:^https?://.*\\.(?:jpg)',\n        },\n        'params': {\n            \n            'skip_download': True,\n        }\n    }, {\n        'url': 'http://tn.nova.cz/clanek/tajemstvi-ukryte-v-podzemi-specialni-nemocnice-v-prazske-krci.html\n        'md5': '1dd7b9d5ea27bc361f110cd855a19bd3',\n        'info_dict': {\n            'id': '1757139',\n            'display_id': 'tajemstvi-ukryte-v-podzemi-specialni-nemocnice-v-prazske-krci',\n            'ext': 'mp4',\n            'title': 'Podzemn\u00ed nemocnice v pra\u017esk\u00e9 Kr\u010di',\n            'description': 'md5:f0a42dd239c26f61c28f19e62d20ef53',\n            'thumbnail': r're:^https?://.*\\.(?:jpg)',\n        }\n    }, {\n        'url': 'http://novaplus.nova.cz/porad/policie-modrava/video/5591-policie-modrava-15-dil-blondynka-na-hrbitove',\n        'info_dict': {\n            'id': '1756825',\n            'display_id': '5591-policie-modrava-15-dil-blondynka-na-hrbitove',\n            'ext': 'flv',\n            'title': 'Policie Modrava - 15. d\u00edl - Blond\u00fdnka na h\u0159bitov\u011b',\n            'description': 'md5:dc24e50be5908df83348e50d1431295e',  \n            'thumbnail': r're:^https?://.*\\.(?:jpg)',\n        },\n        'params': {\n            \n            'skip_download': True,\n        }\n    }, {\n        'url': 'http://novaplus.nova.cz/porad/televizni-noviny/video/5585-televizni-noviny-30-5-2015/',\n        'info_dict': {\n            'id': '1756858',\n            'ext': 'flv',\n            'title': 'Televizn\u00ed noviny - 30. 5. 2015',\n            'thumbnail': r're:^https?://.*\\.(?:jpg)',\n            'upload_date': '20150530',\n        },\n        'params': {\n            \n            'skip_download': True,\n        }\n    }, {\n        'url': 'http://fanda.nova.cz/clanek/fun-and-games/krvavy-epos-zaklinac-3-divoky-hon-vychazi-vyhrajte-ho-pro-sebe.html',\n        'info_dict': {\n            'id': '1753621',\n            'ext': 'mp4',\n            'title': 'Zakl\u00edna\u010d 3: Divok\u00fd hon',\n            'description': 're:.*Pokud se stejn\u011b jako my nem\u016f\u017eete.*',\n            'thumbnail': r're:https?://.*\\.jpg(\\?.*)?',\n            'upload_date': '20150521',\n        },\n        'params': {\n            \n            'skip_download': True,\n        }\n    }, {\n        'url': 'http://sport.tn.nova.cz/clanek/sport/hokej/nhl/zivot-jde-dal-hodnotil-po-vyrazeni-z-playoff-jiri-sekac.html',\n        'only_matching': True,\n    }, {\n        'url': 'http://fanda.nova.cz/clanek/fun-and-games/krvavy-epos-zaklinac-3-divoky-hon-vychazi-vyhrajte-ho-pro-sebe.html',\n        'only_matching': True,\n    }, {\n        'url': 'http://doma.nova.cz/clanek/zdravi/prijdte-se-zapsat-do-registru-kostni-drene-jiz-ve-stredu-3-cervna.html',\n        'only_matching': True,\n    }, {\n        'url': 'http://prask.nova.cz/clanek/novinky/co-si-na-sobe-nase-hvezdy-nechaly-pojistit.html',\n        'only_matching': True,\n    }, {\n        'url': 'http://tv.nova.cz/clanek/novinky/zivot-je-zivot-bondovsky-trailer.html',\n        'only_matching': True,\n    }]\n\n    def _real_extract(self, url):\n        mobj = re.match(self._VALID_URL, url)\n        display_id = mobj.group('id')\n        site = mobj.group('site')\n\n        webpage = self._download_webpage(url, display_id)\n\n        video_id = self._search_regex(\n            [r\"(?:media|video_id)\\s*:\\s*'(\\d+)'\",\n             r'media=(\\d+)',\n             r'id=\"article_video_(\\d+)\"',\n             r'id=\"player_(\\d+)\"'],\n            webpage, 'video id')\n\n        config_url = self._search_regex(\n            r'src=\"(http://tn\\.nova\\.cz/bin/player/videojs/config\\.php\\?[^\"]+)\"',\n            webpage, 'config url', default=None)\n\n        if not config_url:\n            DEFAULT_SITE_ID = '23000'\n            SITES = {\n                'tvnoviny': DEFAULT_SITE_ID,\n                'novaplus': DEFAULT_SITE_ID,\n                'vymena': DEFAULT_SITE_ID,\n                'krasna': DEFAULT_SITE_ID,\n                'fanda': '30',\n                'tn': '30',\n                'doma': '30',\n            }\n\n            site_id = self._search_regex(\n                r'site=(\\d+)', webpage, 'site id', default=None) or SITES.get(site, DEFAULT_SITE_ID)\n\n            config_url = ('http://tn.nova.cz/bin/player/videojs/config.php?site=%s&media=%s&jsVar=vjsconfig'\n                          % (site_id, video_id))\n\n        config = self._download_json(\n            config_url, display_id,\n            'Downloading config JSON',\n            transform_source=lambda s: s[s.index('{'):s.rindex('}') + 1])\n\n        mediafile = config['mediafile']\n        video_url = mediafile['src']\n\n        m = re.search(r'^(?P<url>rtmpe?://[^/]+/(?P<app>[^/]+?))/&*(?P<playpath>.+)$', video_url)\n        if m:\n            formats = [{\n                'url': m.group('url'),\n                'app': m.group('app'),\n                'play_path': m.group('playpath'),\n                'player_path': 'http://tvnoviny.nova.cz/static/shared/app/videojs/video-js.swf',\n                'ext': 'flv',\n            }]\n        else:\n            formats = [{\n                'url': video_url,\n            }]\n        self._sort_formats(formats)\n\n        title = mediafile.get('meta', {}).get('title') or self._og_search_title(webpage)\n        description = clean_html(self._og_search_description(webpage, default=None))\n        thumbnail = config.get('poster')\n\n        if site == 'novaplus':\n            upload_date = unified_strdate(self._search_regex(\n                r'(\\d{1,2}-\\d{1,2}-\\d{4})$', display_id, 'upload date', default=None))\n        elif site == 'fanda':\n            upload_date = unified_strdate(self._search_regex(\n                r'<span class=\"date_time\">(\\d{1,2}\\.\\d{1,2}\\.\\d{4})', webpage, 'upload date', default=None))\n        else:\n            upload_date = None\n\n        return {\n            'id': video_id,\n            'display_id': display_id,\n            'title': title,\n            'description': description,\n            'upload_date': upload_date,\n            'thumbnail': thumbnail,\n            'formats': formats,\n        }\n", "comments": "# coding: utf-8\n# rtmp download\n#player_13260',\n# Make sure this description is clean of html tags\n# rtmp download\n# rtmp download\n# rtmp download\n", "content": "# coding: utf-8\nfrom __future__ import unicode_literals\n\nimport re\n\nfrom .common import InfoExtractor\nfrom ..utils import (\n    clean_html,\n    unified_strdate,\n)\n\n\nclass NovaIE(InfoExtractor):\n    IE_DESC = 'TN.cz, Pr\u00e1sk.tv, Nova.cz, Novaplus.cz, FANDA.tv, Kr\u00e1sn\u00e1.cz and Doma.cz'\n    _VALID_URL = r'https?://(?:[^.]+\\.)?(?P<site>tv(?:noviny)?|tn|novaplus|vymena|fanda|krasna|doma|prask)\\.nova\\.cz/(?:[^/]+/)+(?P<id>[^/]+?)(?:\\.html|/|$)'\n    _TESTS = [{\n        'url': 'http://tvnoviny.nova.cz/clanek/novinky/co-na-sebe-sportaci-praskli-vime-jestli-pujde-hrdlicka-na-materskou.html?utm_source=tvnoviny&utm_medium=cpfooter&utm_campaign=novaplus',\n        'info_dict': {\n            'id': '1608920',\n            'display_id': 'co-na-sebe-sportaci-praskli-vime-jestli-pujde-hrdlicka-na-materskou',\n            'ext': 'flv',\n            'title': 'Duel: Michal Hrdli\u010dka a Petr Sucho\u0148',\n            'description': 'md5:d0cc509858eee1b1374111c588c6f5d5',\n            'thumbnail': r're:^https?://.*\\.(?:jpg)',\n        },\n        'params': {\n            # rtmp download\n            'skip_download': True,\n        }\n    }, {\n        'url': 'http://tn.nova.cz/clanek/tajemstvi-ukryte-v-podzemi-specialni-nemocnice-v-prazske-krci.html#player_13260',\n        'md5': '1dd7b9d5ea27bc361f110cd855a19bd3',\n        'info_dict': {\n            'id': '1757139',\n            'display_id': 'tajemstvi-ukryte-v-podzemi-specialni-nemocnice-v-prazske-krci',\n            'ext': 'mp4',\n            'title': 'Podzemn\u00ed nemocnice v pra\u017esk\u00e9 Kr\u010di',\n            'description': 'md5:f0a42dd239c26f61c28f19e62d20ef53',\n            'thumbnail': r're:^https?://.*\\.(?:jpg)',\n        }\n    }, {\n        'url': 'http://novaplus.nova.cz/porad/policie-modrava/video/5591-policie-modrava-15-dil-blondynka-na-hrbitove',\n        'info_dict': {\n            'id': '1756825',\n            'display_id': '5591-policie-modrava-15-dil-blondynka-na-hrbitove',\n            'ext': 'flv',\n            'title': 'Policie Modrava - 15. d\u00edl - Blond\u00fdnka na h\u0159bitov\u011b',\n            'description': 'md5:dc24e50be5908df83348e50d1431295e',  # Make sure this description is clean of html tags\n            'thumbnail': r're:^https?://.*\\.(?:jpg)',\n        },\n        'params': {\n            # rtmp download\n            'skip_download': True,\n        }\n    }, {\n        'url': 'http://novaplus.nova.cz/porad/televizni-noviny/video/5585-televizni-noviny-30-5-2015/',\n        'info_dict': {\n            'id': '1756858',\n            'ext': 'flv',\n            'title': 'Televizn\u00ed noviny - 30. 5. 2015',\n            'thumbnail': r're:^https?://.*\\.(?:jpg)',\n            'upload_date': '20150530',\n        },\n        'params': {\n            # rtmp download\n            'skip_download': True,\n        }\n    }, {\n        'url': 'http://fanda.nova.cz/clanek/fun-and-games/krvavy-epos-zaklinac-3-divoky-hon-vychazi-vyhrajte-ho-pro-sebe.html',\n        'info_dict': {\n            'id': '1753621',\n            'ext': 'mp4',\n            'title': 'Zakl\u00edna\u010d 3: Divok\u00fd hon',\n            'description': 're:.*Pokud se stejn\u011b jako my nem\u016f\u017eete.*',\n            'thumbnail': r're:https?://.*\\.jpg(\\?.*)?',\n            'upload_date': '20150521',\n        },\n        'params': {\n            # rtmp download\n            'skip_download': True,\n        }\n    }, {\n        'url': 'http://sport.tn.nova.cz/clanek/sport/hokej/nhl/zivot-jde-dal-hodnotil-po-vyrazeni-z-playoff-jiri-sekac.html',\n        'only_matching': True,\n    }, {\n        'url': 'http://fanda.nova.cz/clanek/fun-and-games/krvavy-epos-zaklinac-3-divoky-hon-vychazi-vyhrajte-ho-pro-sebe.html',\n        'only_matching': True,\n    }, {\n        'url': 'http://doma.nova.cz/clanek/zdravi/prijdte-se-zapsat-do-registru-kostni-drene-jiz-ve-stredu-3-cervna.html',\n        'only_matching': True,\n    }, {\n        'url': 'http://prask.nova.cz/clanek/novinky/co-si-na-sobe-nase-hvezdy-nechaly-pojistit.html',\n        'only_matching': True,\n    }, {\n        'url': 'http://tv.nova.cz/clanek/novinky/zivot-je-zivot-bondovsky-trailer.html',\n        'only_matching': True,\n    }]\n\n    def _real_extract(self, url):\n        mobj = re.match(self._VALID_URL, url)\n        display_id = mobj.group('id')\n        site = mobj.group('site')\n\n        webpage = self._download_webpage(url, display_id)\n\n        video_id = self._search_regex(\n            [r\"(?:media|video_id)\\s*:\\s*'(\\d+)'\",\n             r'media=(\\d+)',\n             r'id=\"article_video_(\\d+)\"',\n             r'id=\"player_(\\d+)\"'],\n            webpage, 'video id')\n\n        config_url = self._search_regex(\n            r'src=\"(http://tn\\.nova\\.cz/bin/player/videojs/config\\.php\\?[^\"]+)\"',\n            webpage, 'config url', default=None)\n\n        if not config_url:\n            DEFAULT_SITE_ID = '23000'\n            SITES = {\n                'tvnoviny': DEFAULT_SITE_ID,\n                'novaplus': DEFAULT_SITE_ID,\n                'vymena': DEFAULT_SITE_ID,\n                'krasna': DEFAULT_SITE_ID,\n                'fanda': '30',\n                'tn': '30',\n                'doma': '30',\n            }\n\n            site_id = self._search_regex(\n                r'site=(\\d+)', webpage, 'site id', default=None) or SITES.get(site, DEFAULT_SITE_ID)\n\n            config_url = ('http://tn.nova.cz/bin/player/videojs/config.php?site=%s&media=%s&jsVar=vjsconfig'\n                          % (site_id, video_id))\n\n        config = self._download_json(\n            config_url, display_id,\n            'Downloading config JSON',\n            transform_source=lambda s: s[s.index('{'):s.rindex('}') + 1])\n\n        mediafile = config['mediafile']\n        video_url = mediafile['src']\n\n        m = re.search(r'^(?P<url>rtmpe?://[^/]+/(?P<app>[^/]+?))/&*(?P<playpath>.+)$', video_url)\n        if m:\n            formats = [{\n                'url': m.group('url'),\n                'app': m.group('app'),\n                'play_path': m.group('playpath'),\n                'player_path': 'http://tvnoviny.nova.cz/static/shared/app/videojs/video-js.swf',\n                'ext': 'flv',\n            }]\n        else:\n            formats = [{\n                'url': video_url,\n            }]\n        self._sort_formats(formats)\n\n        title = mediafile.get('meta', {}).get('title') or self._og_search_title(webpage)\n        description = clean_html(self._og_search_description(webpage, default=None))\n        thumbnail = config.get('poster')\n\n        if site == 'novaplus':\n            upload_date = unified_strdate(self._search_regex(\n                r'(\\d{1,2}-\\d{1,2}-\\d{4})$', display_id, 'upload date', default=None))\n        elif site == 'fanda':\n            upload_date = unified_strdate(self._search_regex(\n                r'<span class=\"date_time\">(\\d{1,2}\\.\\d{1,2}\\.\\d{4})', webpage, 'upload date', default=None))\n        else:\n            upload_date = None\n\n        return {\n            'id': video_id,\n            'display_id': display_id,\n            'title': title,\n            'description': description,\n            'upload_date': upload_date,\n            'thumbnail': thumbnail,\n            'formats': formats,\n        }\n", "description": "Command-line program to download videos from YouTube.com and other video sites", "file_name": "nova.py", "language": "Python", "project_name": "youtube-dl", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/rg3_youtube-dl/rg3-youtube-dl-6202f08/youtube_dl/extractor/nova.py", "save_time": "", "source": "", "update_at": "2018-03-07T09:18:39Z", "url": "https://github.com/rg3/youtube-dl", "wiki": false}