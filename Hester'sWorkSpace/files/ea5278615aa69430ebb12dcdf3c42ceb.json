{"author": "rg3", "code": "\nfrom __future__ import unicode_literals\n\nimport re\n\nfrom .common import InfoExtractor\nfrom ..utils import (\n    parse_duration,\n    unified_strdate,\n)\n\n\nclass SapoIE(InfoExtractor):\n    IE_DESC = 'SAPO V\u00eddeos'\n    _VALID_URL = r'https?://(?:(?:v2|www)\\.)?videos\\.sapo\\.(?:pt|cv|ao|mz|tl)/(?P<id>[\\da-zA-Z]{20})'\n\n    _TESTS = [\n        {\n            'url': 'http://videos.sapo.pt/UBz95kOtiWYUMTA5Ghfi',\n            'md5': '79ee523f6ecb9233ac25075dee0eda83',\n            'note': 'SD video',\n            'info_dict': {\n                'id': 'UBz95kOtiWYUMTA5Ghfi',\n                'ext': 'mp4',\n                'title': 'Benfica - Marcas na Hit\u00f3ria',\n                'description': 'md5:c9082000a128c3fd57bf0299e1367f22',\n                'duration': 264,\n                'uploader': 'tiago_1988',\n                'upload_date': '20080229',\n                'categories': ['benfica', 'cabral', 'desporto', 'futebol', 'geovanni', 'hooijdonk', 'joao', 'karel', 'lisboa', 'miccoli'],\n            },\n        },\n        {\n            'url': 'http://videos.sapo.pt/IyusNAZ791ZdoCY5H5IF',\n            'md5': '90a2f283cfb49193fe06e861613a72aa',\n            'note': 'HD video',\n            'info_dict': {\n                'id': 'IyusNAZ791ZdoCY5H5IF',\n                'ext': 'mp4',\n                'title': 'Codebits VII - Report',\n                'description': 'md5:6448d6fd81ce86feac05321f354dbdc8',\n                'duration': 144,\n                'uploader': 'codebits',\n                'upload_date': '20140427',\n                'categories': ['codebits', 'codebits2014'],\n            },\n        },\n        {\n            'url': 'http://v2.videos.sapo.pt/yLqjzPtbTimsn2wWBKHz',\n            'md5': 'e5aa7cc0bdc6db9b33df1a48e49a15ac',\n            'note': 'v2 video',\n            'info_dict': {\n                'id': 'yLqjzPtbTimsn2wWBKHz',\n                'ext': 'mp4',\n                'title': 'Hipnose Condicionativa 4',\n                'description': 'md5:ef0481abf8fb4ae6f525088a6dadbc40',\n                'duration': 692,\n                'uploader': 'sapozen',\n                'upload_date': '20090609',\n                'categories': ['condicionativa', 'heloisa', 'hipnose', 'miranda', 'sapo', 'zen'],\n            },\n        },\n    ]\n\n    def _real_extract(self, url):\n        mobj = re.match(self._VALID_URL, url)\n        video_id = mobj.group('id')\n\n        item = self._download_xml(\n            'http://rd3.videos.sapo.pt/%s/rss2' % video_id, video_id).find('./channel/item')\n\n        title = item.find('./title').text\n        description = item.find('./{http://videos.sapo.pt/mrss/}synopse').text\n        thumbnail = item.find('./{http://search.yahoo.com/mrss/}content').get('url')\n        duration = parse_duration(item.find('./{http://videos.sapo.pt/mrss/}time').text)\n        uploader = item.find('./{http://videos.sapo.pt/mrss/}author').text\n        upload_date = unified_strdate(item.find('./pubDate').text)\n        view_count = int(item.find('./{http://videos.sapo.pt/mrss/}views').text)\n        comment_count = int(item.find('./{http://videos.sapo.pt/mrss/}comment_count').text)\n        tags = item.find('./{http://videos.sapo.pt/mrss/}tags').text\n        categories = tags.split() if tags else []\n        age_limit = 18 if item.find('./{http://videos.sapo.pt/mrss/}m18').text == 'true' else 0\n\n        video_url = item.find('./{http://videos.sapo.pt/mrss/}videoFile').text\n        video_size = item.find('./{http://videos.sapo.pt/mrss/}videoSize').text.split('x')\n\n        formats = [{\n            'url': video_url,\n            'ext': 'mp4',\n            'format_id': 'sd',\n            'width': int(video_size[0]),\n            'height': int(video_size[1]),\n        }]\n\n        if item.find('./{http://videos.sapo.pt/mrss/}HD').text == 'true':\n            formats.append({\n                'url': re.sub(r'/mov/1$', '/mov/39', video_url),\n                'ext': 'mp4',\n                'format_id': 'hd',\n                'width': 1280,\n                'height': 720,\n            })\n\n        self._sort_formats(formats)\n\n        return {\n            'id': video_id,\n            'title': title,\n            'description': description,\n            'thumbnail': thumbnail,\n            'duration': duration,\n            'uploader': uploader,\n            'upload_date': upload_date,\n            'view_count': view_count,\n            'comment_count': comment_count,\n            'categories': categories,\n            'age_limit': age_limit,\n            'formats': formats,\n        }\n", "comments": "# coding: utf-8\n", "content": "# coding: utf-8\nfrom __future__ import unicode_literals\n\nimport re\n\nfrom .common import InfoExtractor\nfrom ..utils import (\n    parse_duration,\n    unified_strdate,\n)\n\n\nclass SapoIE(InfoExtractor):\n    IE_DESC = 'SAPO V\u00eddeos'\n    _VALID_URL = r'https?://(?:(?:v2|www)\\.)?videos\\.sapo\\.(?:pt|cv|ao|mz|tl)/(?P<id>[\\da-zA-Z]{20})'\n\n    _TESTS = [\n        {\n            'url': 'http://videos.sapo.pt/UBz95kOtiWYUMTA5Ghfi',\n            'md5': '79ee523f6ecb9233ac25075dee0eda83',\n            'note': 'SD video',\n            'info_dict': {\n                'id': 'UBz95kOtiWYUMTA5Ghfi',\n                'ext': 'mp4',\n                'title': 'Benfica - Marcas na Hit\u00f3ria',\n                'description': 'md5:c9082000a128c3fd57bf0299e1367f22',\n                'duration': 264,\n                'uploader': 'tiago_1988',\n                'upload_date': '20080229',\n                'categories': ['benfica', 'cabral', 'desporto', 'futebol', 'geovanni', 'hooijdonk', 'joao', 'karel', 'lisboa', 'miccoli'],\n            },\n        },\n        {\n            'url': 'http://videos.sapo.pt/IyusNAZ791ZdoCY5H5IF',\n            'md5': '90a2f283cfb49193fe06e861613a72aa',\n            'note': 'HD video',\n            'info_dict': {\n                'id': 'IyusNAZ791ZdoCY5H5IF',\n                'ext': 'mp4',\n                'title': 'Codebits VII - Report',\n                'description': 'md5:6448d6fd81ce86feac05321f354dbdc8',\n                'duration': 144,\n                'uploader': 'codebits',\n                'upload_date': '20140427',\n                'categories': ['codebits', 'codebits2014'],\n            },\n        },\n        {\n            'url': 'http://v2.videos.sapo.pt/yLqjzPtbTimsn2wWBKHz',\n            'md5': 'e5aa7cc0bdc6db9b33df1a48e49a15ac',\n            'note': 'v2 video',\n            'info_dict': {\n                'id': 'yLqjzPtbTimsn2wWBKHz',\n                'ext': 'mp4',\n                'title': 'Hipnose Condicionativa 4',\n                'description': 'md5:ef0481abf8fb4ae6f525088a6dadbc40',\n                'duration': 692,\n                'uploader': 'sapozen',\n                'upload_date': '20090609',\n                'categories': ['condicionativa', 'heloisa', 'hipnose', 'miranda', 'sapo', 'zen'],\n            },\n        },\n    ]\n\n    def _real_extract(self, url):\n        mobj = re.match(self._VALID_URL, url)\n        video_id = mobj.group('id')\n\n        item = self._download_xml(\n            'http://rd3.videos.sapo.pt/%s/rss2' % video_id, video_id).find('./channel/item')\n\n        title = item.find('./title').text\n        description = item.find('./{http://videos.sapo.pt/mrss/}synopse').text\n        thumbnail = item.find('./{http://search.yahoo.com/mrss/}content').get('url')\n        duration = parse_duration(item.find('./{http://videos.sapo.pt/mrss/}time').text)\n        uploader = item.find('./{http://videos.sapo.pt/mrss/}author').text\n        upload_date = unified_strdate(item.find('./pubDate').text)\n        view_count = int(item.find('./{http://videos.sapo.pt/mrss/}views').text)\n        comment_count = int(item.find('./{http://videos.sapo.pt/mrss/}comment_count').text)\n        tags = item.find('./{http://videos.sapo.pt/mrss/}tags').text\n        categories = tags.split() if tags else []\n        age_limit = 18 if item.find('./{http://videos.sapo.pt/mrss/}m18').text == 'true' else 0\n\n        video_url = item.find('./{http://videos.sapo.pt/mrss/}videoFile').text\n        video_size = item.find('./{http://videos.sapo.pt/mrss/}videoSize').text.split('x')\n\n        formats = [{\n            'url': video_url,\n            'ext': 'mp4',\n            'format_id': 'sd',\n            'width': int(video_size[0]),\n            'height': int(video_size[1]),\n        }]\n\n        if item.find('./{http://videos.sapo.pt/mrss/}HD').text == 'true':\n            formats.append({\n                'url': re.sub(r'/mov/1$', '/mov/39', video_url),\n                'ext': 'mp4',\n                'format_id': 'hd',\n                'width': 1280,\n                'height': 720,\n            })\n\n        self._sort_formats(formats)\n\n        return {\n            'id': video_id,\n            'title': title,\n            'description': description,\n            'thumbnail': thumbnail,\n            'duration': duration,\n            'uploader': uploader,\n            'upload_date': upload_date,\n            'view_count': view_count,\n            'comment_count': comment_count,\n            'categories': categories,\n            'age_limit': age_limit,\n            'formats': formats,\n        }\n", "description": "Command-line program to download videos from YouTube.com and other video sites", "file_name": "sapo.py", "language": "Python", "project_name": "youtube-dl", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/rg3_youtube-dl/rg3-youtube-dl-6202f08/youtube_dl/extractor/sapo.py", "save_time": "", "source": "", "update_at": "2018-03-07T09:18:39Z", "url": "https://github.com/rg3/youtube-dl", "wiki": false}