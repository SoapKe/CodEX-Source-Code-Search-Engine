{"author": "odoo", "code": "# -*- coding: utf-8 -*-\n\n\nfrom odoo import api, fields, models, _\n\n\nclass Company(models.Model):\n    _inherit = 'res.company'\n\n    leave_timesheet_project_id = fields.Many2one(\n        'project.project', string=\"Internal Project\",\n        help=\"Default project value for timesheet generated from leave type.\")\n    leave_timesheet_task_id = fields.Many2one(\n        'project.task', string=\"Leave Task\",\n        domain=\"[('project_id', '=', leave_timesheet_project_id)]\")\n\n    def init(self):\n        self.search([('leave_timesheet_project_id', '=', False)])._create_leave_project_task()\n\n    @api.model\n    def create(self, values):\n        company = super(Company, self).create(values)\n        company._create_leave_project_task()\n        return company\n\n    def _create_leave_project_task(self):\n        for company in self:\n            if not company.leave_timesheet_project_id:\n                project = self.env['project.project'].sudo().create({\n                    'name': _('Internal Project'),\n                    'allow_timesheets': True,\n                    'active': False,\n                    'company_id': company.id,\n                })\n                company.write({\n                    'leave_timesheet_project_id': project.id,\n                })\n            if not company.leave_timesheet_task_id:\n                task = self.env['project.task'].sudo().create({\n                    'name': _('Leaves'),\n                    'project_id': company.leave_timesheet_project_id.id,\n                    'active': False,\n                    'company_id': False,\n                })\n                company.write({\n                    'leave_timesheet_task_id': task.id,\n                })\n", "comments": "      coding  utf 8        part odoo  see license file full copyright licensing details  ", "content": "# -*- coding: utf-8 -*-\n# Part of Odoo. See LICENSE file for full copyright and licensing details.\n\nfrom odoo import api, fields, models, _\n\n\nclass Company(models.Model):\n    _inherit = 'res.company'\n\n    leave_timesheet_project_id = fields.Many2one(\n        'project.project', string=\"Internal Project\",\n        help=\"Default project value for timesheet generated from leave type.\")\n    leave_timesheet_task_id = fields.Many2one(\n        'project.task', string=\"Leave Task\",\n        domain=\"[('project_id', '=', leave_timesheet_project_id)]\")\n\n    def init(self):\n        self.search([('leave_timesheet_project_id', '=', False)])._create_leave_project_task()\n\n    @api.model\n    def create(self, values):\n        company = super(Company, self).create(values)\n        company._create_leave_project_task()\n        return company\n\n    def _create_leave_project_task(self):\n        for company in self:\n            if not company.leave_timesheet_project_id:\n                project = self.env['project.project'].sudo().create({\n                    'name': _('Internal Project'),\n                    'allow_timesheets': True,\n                    'active': False,\n                    'company_id': company.id,\n                })\n                company.write({\n                    'leave_timesheet_project_id': project.id,\n                })\n            if not company.leave_timesheet_task_id:\n                task = self.env['project.task'].sudo().create({\n                    'name': _('Leaves'),\n                    'project_id': company.leave_timesheet_project_id.id,\n                    'active': False,\n                    'company_id': False,\n                })\n                company.write({\n                    'leave_timesheet_task_id': task.id,\n                })\n", "description": "Odoo. Open Source Apps To Grow Your Business.", "file_name": "res_company.py", "id": "0f8a0b8d148b06ceed97f90fe8d71bb4", "language": "Python", "project_name": "odoo", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/odoo-odoo/odoo-odoo-b25250f/addons/project_timesheet_holidays/models/res_company.py", "save_time": "", "source": "", "update_at": "2018-03-18T08:30:22Z", "url": "https://github.com/odoo/odoo", "wiki": true}