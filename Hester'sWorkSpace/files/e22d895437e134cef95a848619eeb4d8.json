{"author": "jakubroztocil", "code": "\n.format(**package_info))\n", "comments": "\nGenerate URLs and file hashes to be included in the Homebrew formula\nafter a new release of HTTPie is published on PyPi.\n\nhttps://github.com/Homebrew/homebrew-core/blob/master/Formula/httpie.rb\n\n\"\"\"\nimport hashlib\nimport requests\n\n\nPACKAGES = [\n    'httpie',\n    'requests',\n    'pygments',\n]\n\n\ndef get_info(package_name):\n    api_url = 'https://pypi.python.org/pypi/{}/json'.format(package_name)\n    resp = requests.get(api_url).json()\n    hasher = hashlib.sha256()\n    for release in resp['urls']:\n        download_url = release['url']\n        if download_url.endswith('.tar.gz'):\n            hasher.update(requests.get(download_url).content)\n            return {\n                'name': package_name,\n                'url': download_url,\n                'sha256': hasher.hexdigest(),\n            }\n    else:\n        raise RuntimeError(\n            '{}: download not found: {}'.format(package_name, resp))\n\n\npackages = {\n    package_name: get_info(package_name) for package_name in PACKAGES\n}\n\n\nhttpie_info = packages.pop('httpie')\nprint(\"\"\"\n  url \"{url}\"\n  sha256 \"{sha256}\"\n\"\"\".format(**httpie_info))\n\n\nfor package_info in packages.values():\n    print(\"\"\"\n  resource \"{name}\" do\n    url \"{url}\"\n    sha256 \"{sha256}\"\n  end\nd\n#!/usr/bin/env python\n", "content": "#!/usr/bin/env python\n\"\"\"\nGenerate URLs and file hashes to be included in the Homebrew formula\nafter a new release of HTTPie is published on PyPi.\n\nhttps://github.com/Homebrew/homebrew-core/blob/master/Formula/httpie.rb\n\n\"\"\"\nimport hashlib\nimport requests\n\n\nPACKAGES = [\n    'httpie',\n    'requests',\n    'pygments',\n]\n\n\ndef get_info(package_name):\n    api_url = 'https://pypi.python.org/pypi/{}/json'.format(package_name)\n    resp = requests.get(api_url).json()\n    hasher = hashlib.sha256()\n    for release in resp['urls']:\n        download_url = release['url']\n        if download_url.endswith('.tar.gz'):\n            hasher.update(requests.get(download_url).content)\n            return {\n                'name': package_name,\n                'url': download_url,\n                'sha256': hasher.hexdigest(),\n            }\n    else:\n        raise RuntimeError(\n            '{}: download not found: {}'.format(package_name, resp))\n\n\npackages = {\n    package_name: get_info(package_name) for package_name in PACKAGES\n}\n\n\nhttpie_info = packages.pop('httpie')\nprint(\"\"\"\n  url \"{url}\"\n  sha256 \"{sha256}\"\n\"\"\".format(**httpie_info))\n\n\nfor package_info in packages.values():\n    print(\"\"\"\n  resource \"{name}\" do\n    url \"{url}\"\n    sha256 \"{sha256}\"\n  end\"\"\".format(**package_info))\n", "description": "Modern command line HTTP client \u2013 user-friendly curl alternative with intuitive UI, JSON support, syntax highlighting, wget-like downloads, extensions, etc.  https://httpie.org", "file_name": "get-homebrew-formula-vars.py", "language": "Python", "project_name": "httpie", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/jakubroztocil_httpie/jakubroztocil-httpie-0f4dce9/extras/get-homebrew-formula-vars.py", "save_time": "", "source": "", "update_at": "2018-03-07T09:20:06Z", "url": "https://github.com/jakubroztocil/httpie", "wiki": false}