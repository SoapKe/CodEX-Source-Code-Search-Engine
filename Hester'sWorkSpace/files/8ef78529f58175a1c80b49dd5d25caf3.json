{"author": "mailpile", "code": "\n\nimport json\nimport sys\n\nprint (\"\"\"I am an unsent mail finder, due to buggy bug bugness.\nRun me like so:\n\n    cat /home/USER/.mailpile/logs/* | %s\n\n... and I might tell you which messages didn't get sent. Adjust the\npath above to match where your mailpile really is. Sorry this is so\nlame!  If you ran me wrong, press CTRL+C to abort right about now.\n\n\"\"\") % sys.argv[0]\n\nsendits = {}\nfor line in sys.stdin.readlines():\n  try:\n    data = json.loads(line)\n\n    d, eid, status, msg, cls = data[:5]\n    if cls == '.plugins.compose.Sendit':\n        if eid not in sendits and 'mid' in data[5]:\n            sendits[eid] = data\n        elif msg.startswith('Connecting'):\n            sendits[eid][5]['OK'] = True\n  except ValueError:\n    print 'Unparsable: %s' % line\n\nfor eid, data in sendits.iteritems():\n    if 'OK' not in data[5]:\n        print 'On %s, failed to send %s' % (data[0], data[5]['mid'])\n", "comments": "   i unsent mail finder  due buggy bug bugness  run like       cat  home user  mailpile logs           i might tell messages get sent  adjust path match mailpile really  sorry lame   if ran wrong  press ctrl c abort right           usr bin env python2 7 ", "content": "#!/usr/bin/env python2.7\n\nimport json\nimport sys\n\nprint (\"\"\"I am an unsent mail finder, due to buggy bug bugness.\nRun me like so:\n\n    cat /home/USER/.mailpile/logs/* | %s\n\n... and I might tell you which messages didn't get sent. Adjust the\npath above to match where your mailpile really is. Sorry this is so\nlame!  If you ran me wrong, press CTRL+C to abort right about now.\n\n\"\"\") % sys.argv[0]\n\nsendits = {}\nfor line in sys.stdin.readlines():\n  try:\n    data = json.loads(line)\n\n    d, eid, status, msg, cls = data[:5]\n    if cls == '.plugins.compose.Sendit':\n        if eid not in sendits and 'mid' in data[5]:\n            sendits[eid] = data\n        elif msg.startswith('Connecting'):\n            sendits[eid][5]['OK'] = True\n  except ValueError:\n    print 'Unparsable: %s' % line\n\nfor eid, data in sendits.iteritems():\n    if 'OK' not in data[5]:\n        print 'On %s, failed to send %s' % (data[0], data[5]['mid'])\n", "description": "A free & open modern, fast email client with user-friendly encryption and privacy features", "file_name": "unsent-mail-finder.py", "id": "8ef78529f58175a1c80b49dd5d25caf3", "language": "Python", "project_name": "Mailpile", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/mailpile-Mailpile/mailpile-Mailpile-8ebc5fe/scripts/unsent-mail-finder.py", "save_time": "", "source": "", "update_at": "2018-03-17T23:54:52Z", "url": "https://github.com/mailpile/Mailpile", "wiki": true}