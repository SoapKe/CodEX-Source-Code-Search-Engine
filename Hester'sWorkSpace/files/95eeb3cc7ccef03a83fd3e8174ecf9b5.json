{"author": "ansible", "code": "# Copyright (c) 2016-2017 Hewlett Packard Enterprise Development LP\n# GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)\n\nfrom ansible.compat.tests import unittest, mock\n\nfrom oneview_module_loader import EthernetNetworkFactsModule\nfrom hpe_test_utils import FactsParamsTestCase\n\nERROR_MSG = 'Fake message error'\n\nPARAMS_GET_ALL = dict(\n    config='config.json',\n    name=None\n)\n\nPARAMS_GET_BY_NAME = dict(\n    config='config.json',\n    name=\"Test Ethernet Network\",\n    options=[]\n)\n\nPARAMS_GET_BY_NAME_WITH_OPTIONS = dict(\n    config='config.json',\n    name=\"Test Ethernet Network\",\n    options=['associatedProfiles', 'associatedUplinkGroups']\n)\n\nPRESENT_ENETS = [{\n    \"name\": \"Test Ethernet Network\",\n    \"uri\": \"/rest/ethernet-networks/d34dcf5e-0d8e-441c-b00d-e1dd6a067188\"\n}]\n\nENET_ASSOCIATED_UPLINK_GROUP_URIS = [\n    \"/rest/uplink-sets/c6bf9af9-48e7-4236-b08a-77684dc258a5\",\n    \"/rest/uplink-sets/e2f0031b-52bd-4223-9ac1-d91cb519d548\"\n]\n\nENET_ASSOCIATED_PROFILE_URIS = [\n    \"/rest/server-profiles/83e2e117-59dc-4e33-9f24-462af951cbbe\",\n    \"/rest/server-profiles/57d3af2a-b6d2-4446-8645-f38dd808ea4d\"\n]\n\nENET_ASSOCIATED_UPLINK_GROUPS = [dict(uri=ENET_ASSOCIATED_UPLINK_GROUP_URIS[0], name='Uplink Set 1'),\n                                 dict(uri=ENET_ASSOCIATED_UPLINK_GROUP_URIS[1], name='Uplink Set 2')]\n\nENET_ASSOCIATED_PROFILES = [dict(uri=ENET_ASSOCIATED_PROFILE_URIS[0], name='Server Profile 1'),\n                            dict(uri=ENET_ASSOCIATED_PROFILE_URIS[1], name='Server Profile 2')]\n\n\nclass EthernetNetworkFactsSpec(unittest.TestCase,\n                               FactsParamsTestCase\n                               ):\n    def setUp(self):\n        self.configure_mocks(self, EthernetNetworkFactsModule)\n        self.ethernet_networks = self.mock_ov_client.ethernet_networks\n        FactsParamsTestCase.configure_client_mock(self, self.ethernet_networks)\n\n    def test_should_get_all_enets(self):\n        self.ethernet_networks.get_all.return_value = PRESENT_ENETS\n        self.mock_ansible_module.params = PARAMS_GET_ALL\n\n        EthernetNetworkFactsModule().run()\n\n        self.mock_ansible_module.exit_json.assert_called_once_with(\n            changed=False,\n            ansible_facts=dict(ethernet_networks=(PRESENT_ENETS))\n        )\n\n    def test_should_get_enet_by_name(self):\n        self.ethernet_networks.get_by.return_value = PRESENT_ENETS\n        self.mock_ansible_module.params = PARAMS_GET_BY_NAME\n\n        EthernetNetworkFactsModule().run()\n\n        self.mock_ansible_module.exit_json.assert_called_once_with(\n            changed=False,\n            ansible_facts=dict(ethernet_networks=(PRESENT_ENETS))\n        )\n\n    def test_should_get_enet_by_name_with_options(self):\n        self.ethernet_networks.get_by.return_value = PRESENT_ENETS\n        self.ethernet_networks.get_associated_profiles.return_value = ENET_ASSOCIATED_PROFILE_URIS\n        self.ethernet_networks.get_associated_uplink_groups.return_value = ENET_ASSOCIATED_UPLINK_GROUP_URIS\n        self.mock_ov_client.server_profiles.get.side_effect = ENET_ASSOCIATED_PROFILES\n        self.mock_ov_client.uplink_sets.get.side_effect = ENET_ASSOCIATED_UPLINK_GROUPS\n\n        self.mock_ansible_module.params = PARAMS_GET_BY_NAME_WITH_OPTIONS\n\n        EthernetNetworkFactsModule().run()\n\n        self.mock_ansible_module.exit_json.assert_called_once_with(\n            changed=False,\n            ansible_facts=dict(ethernet_networks=PRESENT_ENETS,\n                               enet_associated_profiles=ENET_ASSOCIATED_PROFILES,\n                               enet_associated_uplink_groups=ENET_ASSOCIATED_UPLINK_GROUPS)\n        )\n\n\nif __name__ == '__main__':\n    unittest.main()\n", "comments": "  copyright (c) 2016 2017 hewlett packard enterprise development lp    gnu general public license v3 0  (see copying https   www gnu org licenses gpl 3 0 txt) ", "content": "# Copyright (c) 2016-2017 Hewlett Packard Enterprise Development LP\n# GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)\n\nfrom ansible.compat.tests import unittest, mock\n\nfrom oneview_module_loader import EthernetNetworkFactsModule\nfrom hpe_test_utils import FactsParamsTestCase\n\nERROR_MSG = 'Fake message error'\n\nPARAMS_GET_ALL = dict(\n    config='config.json',\n    name=None\n)\n\nPARAMS_GET_BY_NAME = dict(\n    config='config.json',\n    name=\"Test Ethernet Network\",\n    options=[]\n)\n\nPARAMS_GET_BY_NAME_WITH_OPTIONS = dict(\n    config='config.json',\n    name=\"Test Ethernet Network\",\n    options=['associatedProfiles', 'associatedUplinkGroups']\n)\n\nPRESENT_ENETS = [{\n    \"name\": \"Test Ethernet Network\",\n    \"uri\": \"/rest/ethernet-networks/d34dcf5e-0d8e-441c-b00d-e1dd6a067188\"\n}]\n\nENET_ASSOCIATED_UPLINK_GROUP_URIS = [\n    \"/rest/uplink-sets/c6bf9af9-48e7-4236-b08a-77684dc258a5\",\n    \"/rest/uplink-sets/e2f0031b-52bd-4223-9ac1-d91cb519d548\"\n]\n\nENET_ASSOCIATED_PROFILE_URIS = [\n    \"/rest/server-profiles/83e2e117-59dc-4e33-9f24-462af951cbbe\",\n    \"/rest/server-profiles/57d3af2a-b6d2-4446-8645-f38dd808ea4d\"\n]\n\nENET_ASSOCIATED_UPLINK_GROUPS = [dict(uri=ENET_ASSOCIATED_UPLINK_GROUP_URIS[0], name='Uplink Set 1'),\n                                 dict(uri=ENET_ASSOCIATED_UPLINK_GROUP_URIS[1], name='Uplink Set 2')]\n\nENET_ASSOCIATED_PROFILES = [dict(uri=ENET_ASSOCIATED_PROFILE_URIS[0], name='Server Profile 1'),\n                            dict(uri=ENET_ASSOCIATED_PROFILE_URIS[1], name='Server Profile 2')]\n\n\nclass EthernetNetworkFactsSpec(unittest.TestCase,\n                               FactsParamsTestCase\n                               ):\n    def setUp(self):\n        self.configure_mocks(self, EthernetNetworkFactsModule)\n        self.ethernet_networks = self.mock_ov_client.ethernet_networks\n        FactsParamsTestCase.configure_client_mock(self, self.ethernet_networks)\n\n    def test_should_get_all_enets(self):\n        self.ethernet_networks.get_all.return_value = PRESENT_ENETS\n        self.mock_ansible_module.params = PARAMS_GET_ALL\n\n        EthernetNetworkFactsModule().run()\n\n        self.mock_ansible_module.exit_json.assert_called_once_with(\n            changed=False,\n            ansible_facts=dict(ethernet_networks=(PRESENT_ENETS))\n        )\n\n    def test_should_get_enet_by_name(self):\n        self.ethernet_networks.get_by.return_value = PRESENT_ENETS\n        self.mock_ansible_module.params = PARAMS_GET_BY_NAME\n\n        EthernetNetworkFactsModule().run()\n\n        self.mock_ansible_module.exit_json.assert_called_once_with(\n            changed=False,\n            ansible_facts=dict(ethernet_networks=(PRESENT_ENETS))\n        )\n\n    def test_should_get_enet_by_name_with_options(self):\n        self.ethernet_networks.get_by.return_value = PRESENT_ENETS\n        self.ethernet_networks.get_associated_profiles.return_value = ENET_ASSOCIATED_PROFILE_URIS\n        self.ethernet_networks.get_associated_uplink_groups.return_value = ENET_ASSOCIATED_UPLINK_GROUP_URIS\n        self.mock_ov_client.server_profiles.get.side_effect = ENET_ASSOCIATED_PROFILES\n        self.mock_ov_client.uplink_sets.get.side_effect = ENET_ASSOCIATED_UPLINK_GROUPS\n\n        self.mock_ansible_module.params = PARAMS_GET_BY_NAME_WITH_OPTIONS\n\n        EthernetNetworkFactsModule().run()\n\n        self.mock_ansible_module.exit_json.assert_called_once_with(\n            changed=False,\n            ansible_facts=dict(ethernet_networks=PRESENT_ENETS,\n                               enet_associated_profiles=ENET_ASSOCIATED_PROFILES,\n                               enet_associated_uplink_groups=ENET_ASSOCIATED_UPLINK_GROUPS)\n        )\n\n\nif __name__ == '__main__':\n    unittest.main()\n", "description": "Ansible is a radically simple IT automation platform that makes your applications and systems easier to deploy. Avoid writing scripts or custom code to deploy and update your applications\u2014 automate in a language that approaches plain English, using SSH, with no agents to install on remote systems.", "file_name": "test_oneview_ethernet_network_facts.py", "id": "95eeb3cc7ccef03a83fd3e8174ecf9b5", "language": "Python", "project_name": "ansible", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/ansible-ansible/ansible-ansible-d30554b/test/units/modules/remote_management/oneview/test_oneview_ethernet_network_facts.py", "save_time": "", "source": "", "update_at": "2018-03-18T14:08:28Z", "url": "https://github.com/ansible/ansible", "wiki": false}