{"author": "nvbn", "code": "from types import ModuleType\nfrom thefuck.specific.apt import apt_available\nfrom thefuck.utils import memoize, which\nfrom thefuck.shells import shell\n\ntry:\n    from CommandNotFound import CommandNotFound\n\n    enabled_by_default = apt_available\n\n    if isinstance(CommandNotFound, ModuleType):\n        \n        _get_packages = CommandNotFound.CommandNotFound().get_packages\n    else:\n        \n        _get_packages = CommandNotFound().getPackages\nexcept ImportError:\n    enabled_by_default = False\n\n\ndef _get_executable(command):\n    if command.script_parts[0] == 'sudo':\n        return command.script_parts[1]\n    else:\n        return command.script_parts[0]\n\n\n@memoize\ndef get_package(executable):\n    try:\n        packages = _get_packages(executable)\n        return packages[0][0]\n    except IndexError:\n        \n        return None\n\n\ndef match(command):\n    if 'not found' in command.output or 'not installed' in command.output:\n        executable = _get_executable(command)\n        return not which(executable) and get_package(executable)\n    else:\n        return False\n\n\ndef get_new_command(command):\n    executable = _get_executable(command)\n    name = get_package(executable)\n    formatme = shell.and_('sudo apt-get install {}', '{}')\n    return formatme.format(name, command.script)\n", "comments": "# For ubuntu 18.04+\n# For older versions\n# IndexError is thrown when no matching package is found\n", "content": "from types import ModuleType\nfrom thefuck.specific.apt import apt_available\nfrom thefuck.utils import memoize, which\nfrom thefuck.shells import shell\n\ntry:\n    from CommandNotFound import CommandNotFound\n\n    enabled_by_default = apt_available\n\n    if isinstance(CommandNotFound, ModuleType):\n        # For ubuntu 18.04+\n        _get_packages = CommandNotFound.CommandNotFound().get_packages\n    else:\n        # For older versions\n        _get_packages = CommandNotFound().getPackages\nexcept ImportError:\n    enabled_by_default = False\n\n\ndef _get_executable(command):\n    if command.script_parts[0] == 'sudo':\n        return command.script_parts[1]\n    else:\n        return command.script_parts[0]\n\n\n@memoize\ndef get_package(executable):\n    try:\n        packages = _get_packages(executable)\n        return packages[0][0]\n    except IndexError:\n        # IndexError is thrown when no matching package is found\n        return None\n\n\ndef match(command):\n    if 'not found' in command.output or 'not installed' in command.output:\n        executable = _get_executable(command)\n        return not which(executable) and get_package(executable)\n    else:\n        return False\n\n\ndef get_new_command(command):\n    executable = _get_executable(command)\n    name = get_package(executable)\n    formatme = shell.and_('sudo apt-get install {}', '{}')\n    return formatme.format(name, command.script)\n", "description": "Magnificent app which corrects your previous console command.", "file_name": "apt_get.py", "language": "Python", "project_name": "thefuck", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/nvbn_thefuck/nvbn-thefuck-284d49d/thefuck/rules/apt_get.py", "save_time": "", "source": "", "update_at": "2018-03-07T09:34:29Z", "url": "https://github.com/nvbn/thefuck", "wiki": true}