{"author": "tgalal", "code": "from yowsup.structs import ProtocolTreeNode\nfrom yowsup.layers.protocol_iq.protocolentities import IqProtocolEntity\nimport time\n\nclass SyncIqProtocolEntity(IqProtocolEntity):\n\n    '''\n    <iq type=\"get\" id=\"{{id}}\" xmlns=\"urn:xmpp:whatsapp:sync\">\n        <sync\n            sid=\"{{str((int(time.time()) + 11644477200) * 10000000)}}\"\n            index=\"{{0 | ?| false?}}\"\n        >\n        </sync>\n    </iq>\n    '''\n\n    def __init__(self, _type, _id = None, sid = None, index = 0, last = True):\n        super(SyncIqProtocolEntity, self).__init__(\"urn:xmpp:whatsapp:sync\", _id = _id, _type = _type)\n        self.setSyncProps(sid, index, last)\n\n    def setSyncProps(self, sid, index, last):\n        self.sid = sid if sid else str((int(time.time()) + 11644477200) * 10000000)\n        self.index = int(index)\n        self.last = last\n\n\n    def __str__(self):\n        out  = super(SyncIqProtocolEntity, self).__str__()\n        out += \"sid: %s\\n\" % self.sid\n        out += \"index: %s\\n\" % self.index\n        out += \"last: %s\\n\" % self.last\n        return out\n\n    def toProtocolTreeNode(self):\n\n        syncNodeAttrs = {\n            \"sid\":      self.sid,\n            \"index\":    str(self.index),\n            \"last\":     \"true\" if self.last else \"false\"\n        }\n\n        syncNode = ProtocolTreeNode(\"sync\", syncNodeAttrs)\n\n        node = super(SyncIqProtocolEntity, self).toProtocolTreeNode()\n        node.addChild(syncNode)\n        return node\n\n    @staticmethod\n    def fromProtocolTreeNode(node):\n        syncNode         = node.getChild(\"sync\")\n        entity           = IqProtocolEntity.fromProtocolTreeNode(node)\n        entity.__class__ = SyncIqProtocolEntity\n\n\n        entity.setSyncProps(\n            syncNode.getAttributeValue(\"sid\"),\n            syncNode.getAttributeValue(\"index\"),\n            syncNode.getAttributeValue(\"last\")\n            )\n\n\n        return entity\n", "comments": "         iq type  get  id    id    xmlns  urn xmpp whatsapp sync            sync             sid    str((int(time time())   11644477200)   10000000)                index    0                    last    true   false                         sync        iq          ", "content": "from yowsup.structs import ProtocolTreeNode\nfrom yowsup.layers.protocol_iq.protocolentities import IqProtocolEntity\nimport time\n\nclass SyncIqProtocolEntity(IqProtocolEntity):\n\n    '''\n    <iq type=\"get\" id=\"{{id}}\" xmlns=\"urn:xmpp:whatsapp:sync\">\n        <sync\n            sid=\"{{str((int(time.time()) + 11644477200) * 10000000)}}\"\n            index=\"{{0 | ?}}\"\n            last=\"{{true | false?}}\"\n        >\n        </sync>\n    </iq>\n    '''\n\n    def __init__(self, _type, _id = None, sid = None, index = 0, last = True):\n        super(SyncIqProtocolEntity, self).__init__(\"urn:xmpp:whatsapp:sync\", _id = _id, _type = _type)\n        self.setSyncProps(sid, index, last)\n\n    def setSyncProps(self, sid, index, last):\n        self.sid = sid if sid else str((int(time.time()) + 11644477200) * 10000000)\n        self.index = int(index)\n        self.last = last\n\n\n    def __str__(self):\n        out  = super(SyncIqProtocolEntity, self).__str__()\n        out += \"sid: %s\\n\" % self.sid\n        out += \"index: %s\\n\" % self.index\n        out += \"last: %s\\n\" % self.last\n        return out\n\n    def toProtocolTreeNode(self):\n\n        syncNodeAttrs = {\n            \"sid\":      self.sid,\n            \"index\":    str(self.index),\n            \"last\":     \"true\" if self.last else \"false\"\n        }\n\n        syncNode = ProtocolTreeNode(\"sync\", syncNodeAttrs)\n\n        node = super(SyncIqProtocolEntity, self).toProtocolTreeNode()\n        node.addChild(syncNode)\n        return node\n\n    @staticmethod\n    def fromProtocolTreeNode(node):\n        syncNode         = node.getChild(\"sync\")\n        entity           = IqProtocolEntity.fromProtocolTreeNode(node)\n        entity.__class__ = SyncIqProtocolEntity\n\n\n        entity.setSyncProps(\n            syncNode.getAttributeValue(\"sid\"),\n            syncNode.getAttributeValue(\"index\"),\n            syncNode.getAttributeValue(\"last\")\n            )\n\n\n        return entity\n", "description": "The python WhatsApp library", "file_name": "iq_sync.py", "id": "fa6ce55f79ea283012424e181aa10b03", "language": "Python", "project_name": "yowsup", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/tgalal-yowsup/tgalal-yowsup-03795cc/yowsup/layers/protocol_contacts/protocolentities/iq_sync.py", "save_time": "", "source": "", "update_at": "2018-03-18T13:01:40Z", "url": "https://github.com/tgalal/yowsup", "wiki": true}