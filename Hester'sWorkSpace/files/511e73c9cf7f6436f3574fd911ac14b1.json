{"author": "rg3", "code": "from __future__ import unicode_literals\n\nimport re\n\nfrom .common import InfoExtractor\nfrom ..utils import (\n    int_or_none,\n    parse_duration,\n    unified_strdate,\n)\n\n\nclass CamWithHerIE(InfoExtractor):\n    _VALID_URL = r'https?://(?:www\\.)?camwithher\\.tv/view_video\\.php\\?.*\\bviewkey=(?P<id>\\w+)'\n\n    _TESTS = [{\n        'url': 'http://camwithher.tv/view_video.php?viewkey=6e9a24e2c0e842e1f177&page=&viewtype=&category=',\n        'info_dict': {\n            'id': '5644',\n            'ext': 'flv',\n            'title': 'Periscope Tease',\n            'description': 'In the clouds teasing on periscope to my favorite song',\n            'duration': 240,\n            'view_count': int,\n            'comment_count': int,\n            'uploader': 'MileenaK',\n            'upload_date': '20160322',\n        },\n        'params': {\n            'skip_download': True,\n        }\n    }, {\n        'url': 'http://camwithher.tv/view_video.php?viewkey=6dfd8b7c97531a459937',\n        'only_matching': True,\n    }, {\n        'url': 'http://camwithher.tv/view_video.php?page=&viewkey=6e9a24e2c0e842e1f177&viewtype=&category=',\n        'only_matching': True,\n    }, {\n        'url': 'http://camwithher.tv/view_video.php?viewkey=b6c3b5bea9515d1a1fc4&page=&viewtype=&category=mv',\n        'only_matching': True,\n    }]\n\n    def _real_extract(self, url):\n        video_id = self._match_id(url)\n\n        webpage = self._download_webpage(url, video_id)\n\n        flv_id = self._html_search_regex(\n            r'<a[^>]+href=[\"\\']/download/\\?v=(\\d+)', webpage, 'video id')\n\n        \n        rtmp_url = 'rtmp://camwithher.tv/clipshare/%s' % (\n            ('mp4:%s.mp4' % flv_id) if int(flv_id) > 2010 else flv_id)\n\n        title = self._html_search_regex(\n            r'<div[^>]+style=\"float:left\"[^>]*>\\s*<h2>(.+?)</h2>', webpage, 'title')\n        description = self._html_search_regex(\n            r'>Description:</span>(.+?)</div>', webpage, 'description', default=None)\n\n        runtime = self._search_regex(\n            r'Runtime\\s*:\\s*(.+?) \\|', webpage, 'duration', default=None)\n        if runtime:\n            runtime = re.sub(r'[\\s-]', '', runtime)\n        duration = parse_duration(runtime)\n        view_count = int_or_none(self._search_regex(\n            r'Views\\s*:\\s*(\\d+)', webpage, 'view count', default=None))\n        comment_count = int_or_none(self._search_regex(\n            r'Comments\\s*:\\s*(\\d+)', webpage, 'comment count', default=None))\n\n        uploader = self._search_regex(\n            r'Added by\\s*:\\s*<a[^>]+>([^<]+)</a>', webpage, 'uploader', default=None)\n        upload_date = unified_strdate(self._search_regex(\n            r'Added on\\s*:\\s*([\\d-]+)', webpage, 'upload date', default=None))\n\n        return {\n            'id': flv_id,\n            'url': rtmp_url,\n            'ext': 'flv',\n            'no_resume': True,\n            'title': title,\n            'description': description,\n            'duration': duration,\n            'view_count': view_count,\n            'comment_count': comment_count,\n            'uploader': uploader,\n            'upload_date': upload_date,\n        }\n", "comments": "# Video URL construction algorithm is reverse-engineered from cwhplayer.swf\n", "content": "from __future__ import unicode_literals\n\nimport re\n\nfrom .common import InfoExtractor\nfrom ..utils import (\n    int_or_none,\n    parse_duration,\n    unified_strdate,\n)\n\n\nclass CamWithHerIE(InfoExtractor):\n    _VALID_URL = r'https?://(?:www\\.)?camwithher\\.tv/view_video\\.php\\?.*\\bviewkey=(?P<id>\\w+)'\n\n    _TESTS = [{\n        'url': 'http://camwithher.tv/view_video.php?viewkey=6e9a24e2c0e842e1f177&page=&viewtype=&category=',\n        'info_dict': {\n            'id': '5644',\n            'ext': 'flv',\n            'title': 'Periscope Tease',\n            'description': 'In the clouds teasing on periscope to my favorite song',\n            'duration': 240,\n            'view_count': int,\n            'comment_count': int,\n            'uploader': 'MileenaK',\n            'upload_date': '20160322',\n        },\n        'params': {\n            'skip_download': True,\n        }\n    }, {\n        'url': 'http://camwithher.tv/view_video.php?viewkey=6dfd8b7c97531a459937',\n        'only_matching': True,\n    }, {\n        'url': 'http://camwithher.tv/view_video.php?page=&viewkey=6e9a24e2c0e842e1f177&viewtype=&category=',\n        'only_matching': True,\n    }, {\n        'url': 'http://camwithher.tv/view_video.php?viewkey=b6c3b5bea9515d1a1fc4&page=&viewtype=&category=mv',\n        'only_matching': True,\n    }]\n\n    def _real_extract(self, url):\n        video_id = self._match_id(url)\n\n        webpage = self._download_webpage(url, video_id)\n\n        flv_id = self._html_search_regex(\n            r'<a[^>]+href=[\"\\']/download/\\?v=(\\d+)', webpage, 'video id')\n\n        # Video URL construction algorithm is reverse-engineered from cwhplayer.swf\n        rtmp_url = 'rtmp://camwithher.tv/clipshare/%s' % (\n            ('mp4:%s.mp4' % flv_id) if int(flv_id) > 2010 else flv_id)\n\n        title = self._html_search_regex(\n            r'<div[^>]+style=\"float:left\"[^>]*>\\s*<h2>(.+?)</h2>', webpage, 'title')\n        description = self._html_search_regex(\n            r'>Description:</span>(.+?)</div>', webpage, 'description', default=None)\n\n        runtime = self._search_regex(\n            r'Runtime\\s*:\\s*(.+?) \\|', webpage, 'duration', default=None)\n        if runtime:\n            runtime = re.sub(r'[\\s-]', '', runtime)\n        duration = parse_duration(runtime)\n        view_count = int_or_none(self._search_regex(\n            r'Views\\s*:\\s*(\\d+)', webpage, 'view count', default=None))\n        comment_count = int_or_none(self._search_regex(\n            r'Comments\\s*:\\s*(\\d+)', webpage, 'comment count', default=None))\n\n        uploader = self._search_regex(\n            r'Added by\\s*:\\s*<a[^>]+>([^<]+)</a>', webpage, 'uploader', default=None)\n        upload_date = unified_strdate(self._search_regex(\n            r'Added on\\s*:\\s*([\\d-]+)', webpage, 'upload date', default=None))\n\n        return {\n            'id': flv_id,\n            'url': rtmp_url,\n            'ext': 'flv',\n            'no_resume': True,\n            'title': title,\n            'description': description,\n            'duration': duration,\n            'view_count': view_count,\n            'comment_count': comment_count,\n            'uploader': uploader,\n            'upload_date': upload_date,\n        }\n", "description": "Command-line program to download videos from YouTube.com and other video sites", "file_name": "camwithher.py", "language": "Python", "project_name": "youtube-dl", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/rg3_youtube-dl/rg3-youtube-dl-6202f08/youtube_dl/extractor/camwithher.py", "save_time": "", "source": "", "update_at": "2018-03-07T09:18:39Z", "url": "https://github.com/rg3/youtube-dl", "wiki": false}