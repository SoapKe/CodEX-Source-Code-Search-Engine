{"author": "odoo", "code": "# -*- coding: utf-8 -*-\n\n\nfrom odoo import fields, models\n\n\nclass ResCountry(models.Model):\n    _inherit = 'res.country'\n\n    def get_website_sale_countries(self, mode='billing'):\n        res = super(ResCountry, self).get_website_sale_countries(mode=mode)\n        if mode == 'shipping':\n            countries = self.env['res.country']\n\n            delivery_carriers = self.env['delivery.carrier'].sudo().search([('website_published', '=', True)])\n            for carrier in delivery_carriers:\n                if not carrier.country_ids and not carrier.state_ids:\n                    countries = res\n                    break\n                countries |= carrier.country_ids\n\n            res = res & countries\n        return res\n\n    def get_website_sale_states(self, mode='billing'):\n        res = super(ResCountry, self).get_website_sale_states(mode=mode)\n\n        states = self.env['res.country.state']\n        if mode == 'shipping':\n            dom = ['|', ('country_ids', 'in', self.id), ('country_ids', '=', False), ('website_published', '=', True)]\n            delivery_carriers = self.env['delivery.carrier'].sudo().search(dom)\n\n            for carrier in delivery_carriers:\n                if not carrier.country_ids and not carrier.state_ids:\n                    states = res\n                    break\n                states |= carrier.state_ids\n            if not states:\n                states = states.search([('country_id', '=', self.id)])\n            res = res & states\n        return res\n", "comments": "      coding  utf 8        part odoo  see license file full copyright licensing details  ", "content": "# -*- coding: utf-8 -*-\n# Part of Odoo. See LICENSE file for full copyright and licensing details.\n\nfrom odoo import fields, models\n\n\nclass ResCountry(models.Model):\n    _inherit = 'res.country'\n\n    def get_website_sale_countries(self, mode='billing'):\n        res = super(ResCountry, self).get_website_sale_countries(mode=mode)\n        if mode == 'shipping':\n            countries = self.env['res.country']\n\n            delivery_carriers = self.env['delivery.carrier'].sudo().search([('website_published', '=', True)])\n            for carrier in delivery_carriers:\n                if not carrier.country_ids and not carrier.state_ids:\n                    countries = res\n                    break\n                countries |= carrier.country_ids\n\n            res = res & countries\n        return res\n\n    def get_website_sale_states(self, mode='billing'):\n        res = super(ResCountry, self).get_website_sale_states(mode=mode)\n\n        states = self.env['res.country.state']\n        if mode == 'shipping':\n            dom = ['|', ('country_ids', 'in', self.id), ('country_ids', '=', False), ('website_published', '=', True)]\n            delivery_carriers = self.env['delivery.carrier'].sudo().search(dom)\n\n            for carrier in delivery_carriers:\n                if not carrier.country_ids and not carrier.state_ids:\n                    states = res\n                    break\n                states |= carrier.state_ids\n            if not states:\n                states = states.search([('country_id', '=', self.id)])\n            res = res & states\n        return res\n", "description": "Odoo. Open Source Apps To Grow Your Business.", "file_name": "res_country.py", "id": "2219e8d7c3a9860236550bcf38cd0c51", "language": "Python", "project_name": "odoo", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/odoo-odoo/odoo-odoo-b25250f/addons/website_sale_delivery/models/res_country.py", "save_time": "", "source": "", "update_at": "2018-03-18T08:30:22Z", "url": "https://github.com/odoo/odoo", "wiki": true}