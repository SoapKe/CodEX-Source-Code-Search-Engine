{"author": "getredash", "code": "import datetime\n\nfrom mock import ANY, call, patch\nfrom tests import BaseTestCase\n\nfrom redash.tasks import refresh_schemas\n\n\nclass TestRefreshSchemas(BaseTestCase):\n    def test_calls_refresh_of_all_data_sources(self):\n        self.factory.data_source \n        with patch('redash.tasks.queries.refresh_schema.apply_async') as refresh_job:\n            refresh_schemas()\n            refresh_job.assert_called()\n\n    def test_skips_paused_data_sources(self):\n        self.factory.data_source.pause()\n\n        with patch('redash.tasks.queries.refresh_schema.apply_async') as refresh_job:\n            refresh_schemas()\n            refresh_job.assert_not_called()\n\n        self.factory.data_source.resume()\n\n        with patch('redash.tasks.queries.refresh_schema.apply_async') as refresh_job:\n            refresh_schemas()\n            refresh_job.assert_called()\n", "comments": "  trigger creation ", "content": "import datetime\n\nfrom mock import ANY, call, patch\nfrom tests import BaseTestCase\n\nfrom redash.tasks import refresh_schemas\n\n\nclass TestRefreshSchemas(BaseTestCase):\n    def test_calls_refresh_of_all_data_sources(self):\n        self.factory.data_source # trigger creation\n        with patch('redash.tasks.queries.refresh_schema.apply_async') as refresh_job:\n            refresh_schemas()\n            refresh_job.assert_called()\n\n    def test_skips_paused_data_sources(self):\n        self.factory.data_source.pause()\n\n        with patch('redash.tasks.queries.refresh_schema.apply_async') as refresh_job:\n            refresh_schemas()\n            refresh_job.assert_not_called()\n\n        self.factory.data_source.resume()\n\n        with patch('redash.tasks.queries.refresh_schema.apply_async') as refresh_job:\n            refresh_schemas()\n            refresh_job.assert_called()\n", "description": "Make Your Company Data Driven. Connect to any data source, easily visualize and share your data.", "file_name": "test_refresh_schemas.py", "id": "36928cff37cbef4cf3c0496ee39a8731", "language": "Python", "project_name": "redash", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/getredash-redash/getredash-redash-0410d83/tests/tasks/test_refresh_schemas.py", "save_time": "", "source": "", "update_at": "2018-03-18T12:54:55Z", "url": "https://github.com/getredash/redash", "wiki": false}