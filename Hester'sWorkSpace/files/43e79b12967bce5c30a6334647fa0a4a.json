{"author": "ansible", "code": "# Copyright (c) 2017 Ansible Project\n# GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)\nimport json\n\nimport pytest\n\nfrom ansible.modules.packaging.language import pip\n\n\npytestmark = pytest.mark.usefixtures('patch_ansible_module')\n\n\n@pytest.mark.parametrize('patch_ansible_module', [{'name': 'six'}], indirect=['patch_ansible_module'])\ndef test_failure_when_pip_absent(mocker, capfd):\n    get_bin_path = mocker.patch('ansible.module_utils.basic.AnsibleModule.get_bin_path')\n    get_bin_path.return_value = None\n\n    with pytest.raises(SystemExit):\n        pip.main()\n\n    out, err = capfd.readouterr()\n    results = json.loads(out)\n    assert results['failed']\n    assert 'pip needs to be installed' in results['msg']\n", "comments": "  copyright (c) 2017 ansible project    gnu general public license v3 0  (see copying https   www gnu org licenses gpl 3 0 txt) ", "content": "# Copyright (c) 2017 Ansible Project\n# GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)\nimport json\n\nimport pytest\n\nfrom ansible.modules.packaging.language import pip\n\n\npytestmark = pytest.mark.usefixtures('patch_ansible_module')\n\n\n@pytest.mark.parametrize('patch_ansible_module', [{'name': 'six'}], indirect=['patch_ansible_module'])\ndef test_failure_when_pip_absent(mocker, capfd):\n    get_bin_path = mocker.patch('ansible.module_utils.basic.AnsibleModule.get_bin_path')\n    get_bin_path.return_value = None\n\n    with pytest.raises(SystemExit):\n        pip.main()\n\n    out, err = capfd.readouterr()\n    results = json.loads(out)\n    assert results['failed']\n    assert 'pip needs to be installed' in results['msg']\n", "description": "Ansible is a radically simple IT automation platform that makes your applications and systems easier to deploy. Avoid writing scripts or custom code to deploy and update your applications\u2014 automate in a language that approaches plain English, using SSH, with no agents to install on remote systems.", "file_name": "test_pip.py", "id": "43e79b12967bce5c30a6334647fa0a4a", "language": "Python", "project_name": "ansible", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/ansible-ansible/ansible-ansible-d30554b/test/units/modules/packaging/language/test_pip.py", "save_time": "", "source": "", "update_at": "2018-03-18T14:08:28Z", "url": "https://github.com/ansible/ansible", "wiki": false}