{"author": "django", "code": "import datetime\n\nfrom django.db import DJANGO_VERSION_PICKLE_KEY, models\nfrom django.utils.translation import gettext_lazy as _\n\n\ndef standalone_number():\n    return 1\n\n\nclass Numbers:\n    @staticmethod\n    def get_static_number():\n        return 2\n\n\nclass PreviousDjangoVersionQuerySet(models.QuerySet):\n    def __getstate__(self):\n        state = super().__getstate__()\n        state[DJANGO_VERSION_PICKLE_KEY] = '1.0'\n        return state\n\n\nclass MissingDjangoVersionQuerySet(models.QuerySet):\n    def __getstate__(self):\n        state = super().__getstate__()\n        del state[DJANGO_VERSION_PICKLE_KEY]\n        return state\n\n\nclass Group(models.Model):\n    name = models.CharField(_('name'), max_length=100)\n    objects = models.Manager()\n    previous_django_version_objects = PreviousDjangoVersionQuerySet.as_manager()\n    missing_django_version_objects = MissingDjangoVersionQuerySet.as_manager()\n\n\nclass Event(models.Model):\n    title = models.CharField(max_length=100)\n    group = models.ForeignKey(Group, models.CASCADE)\n\n\nclass Happening(models.Model):\n    when = models.DateTimeField(blank=True, default=datetime.datetime.now)\n    name = models.CharField(blank=True, max_length=100, default=\"test\")\n    number1 = models.IntegerField(blank=True, default=standalone_number)\n    number2 = models.IntegerField(blank=True, default=Numbers.get_static_number)\n    event = models.OneToOneField(Event, models.CASCADE, null=True)\n\n\nclass Container:\n    \n    \n    \n    class SomeModel(models.Model):\n        somefield = models.IntegerField()\n\n\nclass M2MModel(models.Model):\n    groups = models.ManyToManyField(Group)\n", "comments": "  to test pickling need class defined module     still available app cache  so  container class moves    somemodel outside module level ", "content": "import datetime\n\nfrom django.db import DJANGO_VERSION_PICKLE_KEY, models\nfrom django.utils.translation import gettext_lazy as _\n\n\ndef standalone_number():\n    return 1\n\n\nclass Numbers:\n    @staticmethod\n    def get_static_number():\n        return 2\n\n\nclass PreviousDjangoVersionQuerySet(models.QuerySet):\n    def __getstate__(self):\n        state = super().__getstate__()\n        state[DJANGO_VERSION_PICKLE_KEY] = '1.0'\n        return state\n\n\nclass MissingDjangoVersionQuerySet(models.QuerySet):\n    def __getstate__(self):\n        state = super().__getstate__()\n        del state[DJANGO_VERSION_PICKLE_KEY]\n        return state\n\n\nclass Group(models.Model):\n    name = models.CharField(_('name'), max_length=100)\n    objects = models.Manager()\n    previous_django_version_objects = PreviousDjangoVersionQuerySet.as_manager()\n    missing_django_version_objects = MissingDjangoVersionQuerySet.as_manager()\n\n\nclass Event(models.Model):\n    title = models.CharField(max_length=100)\n    group = models.ForeignKey(Group, models.CASCADE)\n\n\nclass Happening(models.Model):\n    when = models.DateTimeField(blank=True, default=datetime.datetime.now)\n    name = models.CharField(blank=True, max_length=100, default=\"test\")\n    number1 = models.IntegerField(blank=True, default=standalone_number)\n    number2 = models.IntegerField(blank=True, default=Numbers.get_static_number)\n    event = models.OneToOneField(Event, models.CASCADE, null=True)\n\n\nclass Container:\n    # To test pickling we need a class that isn't defined on module, but\n    # is still available from app-cache. So, the Container class moves\n    # SomeModel outside of module level\n    class SomeModel(models.Model):\n        somefield = models.IntegerField()\n\n\nclass M2MModel(models.Model):\n    groups = models.ManyToManyField(Group)\n", "description": "The Web framework for perfectionists with deadlines.", "file_name": "models.py", "id": "ba44a66f9c33854c8aa827dc1daa1199", "language": "Python", "project_name": "django", "quality": "", "save_path": "/home/ubuntu/test_files/clean/network_test/django-django/django-django-acfc650/tests/queryset_pickle/models.py", "save_time": "", "source": "", "update_at": "2018-03-14T02:00:36Z", "url": "https://github.com/django/django", "wiki": false}