{"author": "odoo", "code": "# -*- coding: utf-8 -*-\n\n\nfrom odoo import api, models, tools, _\nfrom odoo.addons.http_routing.models.ir_http import slug\n\n\nclass MailMail(models.Model):\n    _inherit = 'mail.mail'\n\n    @api.multi\n    def send_get_mail_body(self, partner=None):\n        \"\"\" Short-circuit parent method for mail groups, replace the default\n            footer with one appropriate for mailing-lists.\"\"\"\n        if self.model == 'mail.channel' and self.res_id:\n            # no super() call on purpose, no private links that could be quoted!\n            channel = self.env['mail.channel'].browse(self.res_id)\n            base_url = self.env['ir.config_parameter'].sudo().get_param('web.base.url')\n            vals = {\n                'maillist': _('Mailing-List'),\n                'post_to': _('Post to'),\n                'unsub': _('Unsubscribe'),\n                'mailto': 'mailto:%s@%s' % (channel.alias_name, channel.alias_domain),\n                'group_url': '%s/groups/%s' % (base_url, slug(channel)),\n                'unsub_url': '%s/groups?unsubscribe' % (base_url,),\n            }\n            footer = \"\"\"_______________________________________________\n                        %(maillist)s: %(group_url)s\n                        %(post_to)s: %(mailto)s\n                        %(unsub)s: %(unsub_url)s\n                    \"\"\" % vals\n            body = tools.append_content_to_html(self.body, footer, container_tag='div')\n            return body\n        else:\n            return super(MailMail, self).send_get_mail_body(partner=partner)\n", "comments": "    short circuit parent method mail groups  replace default             footer one appropriate mailing lists             self model     mail channel  self res id                super() call purpose  private links could quoted              channel   self env  mail channel   browse(self res id)             base url   self env  ir config parameter   sudo() get param( web base url )             vals                      maillist    ( mailing list )                   post    ( post )                   unsub    ( unsubscribe )                   mailto    mailto      (channel alias name  channel alias domain)                   group url     groups     (base url  slug(channel))                   unsub url     groups unsubscribe    (base url )                            footer                                                                               (maillist)s   (group url)s                          (post to)s   (mailto)s                          (unsub)s   (unsub url)s                                coding  utf 8        part odoo  see license file full copyright licensing details     super() call purpose  private links could quoted  ", "content": "# -*- coding: utf-8 -*-\n# Part of Odoo. See LICENSE file for full copyright and licensing details.\n\nfrom odoo import api, models, tools, _\nfrom odoo.addons.http_routing.models.ir_http import slug\n\n\nclass MailMail(models.Model):\n    _inherit = 'mail.mail'\n\n    @api.multi\n    def send_get_mail_body(self, partner=None):\n        \"\"\" Short-circuit parent method for mail groups, replace the default\n            footer with one appropriate for mailing-lists.\"\"\"\n        if self.model == 'mail.channel' and self.res_id:\n            # no super() call on purpose, no private links that could be quoted!\n            channel = self.env['mail.channel'].browse(self.res_id)\n            base_url = self.env['ir.config_parameter'].sudo().get_param('web.base.url')\n            vals = {\n                'maillist': _('Mailing-List'),\n                'post_to': _('Post to'),\n                'unsub': _('Unsubscribe'),\n                'mailto': 'mailto:%s@%s' % (channel.alias_name, channel.alias_domain),\n                'group_url': '%s/groups/%s' % (base_url, slug(channel)),\n                'unsub_url': '%s/groups?unsubscribe' % (base_url,),\n            }\n            footer = \"\"\"_______________________________________________\n                        %(maillist)s: %(group_url)s\n                        %(post_to)s: %(mailto)s\n                        %(unsub)s: %(unsub_url)s\n                    \"\"\" % vals\n            body = tools.append_content_to_html(self.body, footer, container_tag='div')\n            return body\n        else:\n            return super(MailMail, self).send_get_mail_body(partner=partner)\n", "description": "Odoo. Open Source Apps To Grow Your Business.", "file_name": "mail_mail.py", "id": "3f806f517865ddc6ee7bd459dd19401d", "language": "Python", "project_name": "odoo", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/odoo-odoo/odoo-odoo-b25250f/addons/website_mail_channel/models/mail_mail.py", "save_time": "", "source": "", "update_at": "2018-03-18T08:30:22Z", "url": "https://github.com/odoo/odoo", "wiki": true}