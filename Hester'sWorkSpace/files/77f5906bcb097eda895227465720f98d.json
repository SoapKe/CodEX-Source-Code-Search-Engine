{"author": "HelloZeroNet", "code": "import logging, json, os, re, sys, time\nimport gevent\nfrom Plugin import PluginManager\nfrom Config import config\nfrom Debug import Debug\nfrom domainLookup import lookupDomain\n\nallow_reload = False \n\nlog = logging.getLogger(\"Zeroname-localPlugin\")\n\n\n@PluginManager.registerTo(\"SiteManager\")\nclass SiteManagerPlugin(object):\n    def load(self):\n        super(SiteManagerPlugin, self).load()\n\n    \n    def isAddress(self, address):\n        if self.isDomain(address): \n            return True\n        else:\n            return super(SiteManagerPlugin, self).isAddress(address)\n\n\n    \n    def isDomain(self, address):\n        return re.match(\"(.*?)([A-Za-z0-9_-]+\\.[A-Za-z0-9]+)$\", address)\n\n\n    \n    \n    def resolveDomain(self, domain):\n        return lookupDomain(domain)\n\n\n    \n    \n    def need(self, address, all_file=True):\n        if self.isDomain(address): \n            address_resolved = self.resolveDomain(address)\n            if address_resolved:\n                address = address_resolved\n            else:\n                return None\n        \n        return super(SiteManagerPlugin, self).need(address, all_file)\n\n\n    \n    def get(self, address):\n        if self.sites == None: \n            self.load()\n        if self.isDomain(address): \n            address_resolved = self.resolveDomain(address)\n            if address_resolved: \n                site = self.sites.get(address_resolved)\n                if site:\n                    site_domain = site.settings.get(\"domain\")\n                    if site_domain != address:\n                        site.settings[\"domain\"] = address\n            else: \n                site = self.sites.get(address)\n\n        else: \n            site = self.sites.get(address)\n        return site\n\n", "comments": "  no reload supported    checks valid address    return  true address domain    resolve domain    return  the address none    return create site start download site files    return  site none dns resolve failed    its looks like domain    return  site object none found    not loaded yet    its looks like domain    domain found    domain found    access site address ", "content": "import logging, json, os, re, sys, time\nimport gevent\nfrom Plugin import PluginManager\nfrom Config import config\nfrom Debug import Debug\nfrom domainLookup import lookupDomain\n\nallow_reload = False # No reload supported\n\nlog = logging.getLogger(\"Zeroname-localPlugin\")\n\n\n@PluginManager.registerTo(\"SiteManager\")\nclass SiteManagerPlugin(object):\n    def load(self):\n        super(SiteManagerPlugin, self).load()\n\n    # Checks if its a valid address\n    def isAddress(self, address):\n        if self.isDomain(address): \n            return True\n        else:\n            return super(SiteManagerPlugin, self).isAddress(address)\n\n\n    # Return: True if the address is domain\n    def isDomain(self, address):\n        return re.match(\"(.*?)([A-Za-z0-9_-]+\\.[A-Za-z0-9]+)$\", address)\n\n\n    # Resolve domain\n    # Return: The address or None\n    def resolveDomain(self, domain):\n        return lookupDomain(domain)\n\n\n    # Return or create site and start download site files\n    # Return: Site or None if dns resolve failed\n    def need(self, address, all_file=True):\n        if self.isDomain(address): # Its looks like a domain\n            address_resolved = self.resolveDomain(address)\n            if address_resolved:\n                address = address_resolved\n            else:\n                return None\n        \n        return super(SiteManagerPlugin, self).need(address, all_file)\n\n\n    # Return: Site object or None if not found\n    def get(self, address):\n        if self.sites == None: # Not loaded yet\n            self.load()\n        if self.isDomain(address): # Its looks like a domain\n            address_resolved = self.resolveDomain(address)\n            if address_resolved: # Domain found\n                site = self.sites.get(address_resolved)\n                if site:\n                    site_domain = site.settings.get(\"domain\")\n                    if site_domain != address:\n                        site.settings[\"domain\"] = address\n            else: # Domain not found\n                site = self.sites.get(address)\n\n        else: # Access by site address\n            site = self.sites.get(address)\n        return site\n\n", "description": "ZeroNet - Decentralized websites using Bitcoin crypto and BitTorrent network", "file_name": "SiteManagerPlugin.py", "id": "77f5906bcb097eda895227465720f98d", "language": "Python", "project_name": "ZeroNet", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/HelloZeroNet-ZeroNet/HelloZeroNet-ZeroNet-8828629/plugins/disabled-Zeroname-local/SiteManagerPlugin.py", "save_time": "", "source": "", "update_at": "2018-03-18T12:17:52Z", "url": "https://github.com/HelloZeroNet/ZeroNet", "wiki": true}