{"author": "rg3", "code": "\nfrom __future__ import unicode_literals\n\nfrom .common import InfoExtractor\nfrom ..compat import (\n    compat_urllib_parse_unquote_plus\n)\nfrom ..utils import (\n    parse_duration,\n    remove_end,\n    unified_strdate,\n    urljoin\n)\n\n\nclass NDTVIE(InfoExtractor):\n    _VALID_URL = r'https?://(?:[^/]+\\.)?ndtv\\.com/(?:[^/]+/)*videos?/?(?:[^/]+/)*[^/?^&]+-(?P<id>\\d+)'\n\n    _TESTS = [\n        {\n            'url': 'https://khabar.ndtv.com/video/show/prime-time/prime-time-ill-system-and-poor-education-468818',\n            'md5': '78efcf3880ef3fd9b83d405ca94a38eb',\n            'info_dict': {\n                'id': '468818',\n                'ext': 'mp4',\n                'title': \"\u092a\u094d\u0930\u093e\u0907\u092e \u091f\u093e\u0907\u092e: \u0938\u093f\u0938\u094d\u091f\u092e \u092c\u0940\u092e\u093e\u0930, \u0938\u094d\u0915\u0942\u0932 \u092c\u0926\u0939\u093e\u0932\",\n                'description': 'md5:f410512f1b49672e5695dea16ef2731d',\n                'upload_date': '20170928',\n                'duration': 2218,\n                'thumbnail': r're:https?://.*\\.jpg',\n            }\n        },\n        {\n            \n            'url': 'http://movies.ndtv.com/videos/cracker-free-diwali-wishes-from-karan-johar-kriti-sanon-other-stars-470304',\n            'md5': 'f1d709352305b44443515ac56b45aa46',\n            'info_dict': {\n                'id': '470304',\n                'ext': 'mp4',\n                'title': \"Cracker-Free Diwali Wishes From Karan Johar, Kriti Sanon & Other Stars\",\n                'description': 'md5:f115bba1adf2f6433fa7c1ade5feb465',\n                'upload_date': '20171019',\n                'duration': 137,\n                'thumbnail': r're:https?://.*\\.jpg',\n            }\n        },\n        {\n            'url': 'https://www.ndtv.com/video/news/news/delhi-s-air-quality-status-report-after-diwali-is-very-poor-470372',\n            'only_matching': True\n        },\n        {\n            'url': 'https://auto.ndtv.com/videos/the-cnb-daily-october-13-2017-469935',\n            'only_matching': True\n        },\n        {\n            'url': 'https://sports.ndtv.com/cricket/videos/2nd-t20i-rock-thrown-at-australia-cricket-team-bus-after-win-over-india-469764',\n            'only_matching': True\n        },\n        {\n            'url': 'http://gadgets.ndtv.com/videos/uncharted-the-lost-legacy-review-465568',\n            'only_matching': True\n        },\n        {\n            'url': 'http://profit.ndtv.com/videos/news/video-indian-economy-on-very-solid-track-international-monetary-fund-chief-470040',\n            'only_matching': True\n        },\n        {\n            'url': 'http://food.ndtv.com/video-basil-seeds-coconut-porridge-419083',\n            'only_matching': True\n        },\n        {\n            'url': 'https://doctor.ndtv.com/videos/top-health-stories-of-the-week-467396',\n            'only_matching': True\n        },\n        {\n            'url': 'https://swirlster.ndtv.com/video/how-to-make-friends-at-work-469324',\n            'only_matching': True\n        }\n    ]\n\n    def _real_extract(self, url):\n        video_id = self._match_id(url)\n        webpage = self._download_webpage(url, video_id)\n\n        \n        title = compat_urllib_parse_unquote_plus(\n            self._search_regex(r\"__title\\s*=\\s*'([^']+)'\", webpage, 'title', default=None) or\n            self._og_search_title(webpage))\n\n        filename = self._search_regex(\n            r\"(?:__)?filename\\s*[:=]\\s*'([^']+)'\", webpage, 'video filename')\n        \n        video_url = urljoin('https://ndtvod.bc-ssl.cdn.bitgravity.com/23372/ndtv/', filename.lstrip('/'))\n\n        \n        duration = parse_duration(self._search_regex(\n            r\"(?:__)?duration\\s*[:=]\\s*'([^']+)'\", webpage, 'duration', fatal=False))\n\n        \n        upload_date = unified_strdate(self._html_search_meta(\n            'publish-date', webpage, 'upload date', default=None) or self._html_search_meta(\n            'uploadDate', webpage, 'upload date', default=None) or self._search_regex(\n            r'datePublished\"\\s*:\\s*\"([^\"]+)\"', webpage, 'upload date', fatal=False))\n\n        description = remove_end(self._og_search_description(webpage), ' (Read more)')\n\n        return {\n            'id': video_id,\n            'url': video_url,\n            'title': title,\n            'description': description,\n            'thumbnail': self._og_search_thumbnail(webpage),\n            'duration': duration,\n            'upload_date': upload_date,\n        }\n", "comments": "# coding: utf-8\n# __filename is url\n# '__title' does not contain extra words such as sub-site name, \"Video\" etc.\n# in \"movies\" sub-site pages, filename is URL\n# \"doctor\" sub-site has MM:SS format\n# \"sports\", \"doctor\", \"swirlster\" sub-sites don't have 'publish-date'\n", "content": "# coding: utf-8\nfrom __future__ import unicode_literals\n\nfrom .common import InfoExtractor\nfrom ..compat import (\n    compat_urllib_parse_unquote_plus\n)\nfrom ..utils import (\n    parse_duration,\n    remove_end,\n    unified_strdate,\n    urljoin\n)\n\n\nclass NDTVIE(InfoExtractor):\n    _VALID_URL = r'https?://(?:[^/]+\\.)?ndtv\\.com/(?:[^/]+/)*videos?/?(?:[^/]+/)*[^/?^&]+-(?P<id>\\d+)'\n\n    _TESTS = [\n        {\n            'url': 'https://khabar.ndtv.com/video/show/prime-time/prime-time-ill-system-and-poor-education-468818',\n            'md5': '78efcf3880ef3fd9b83d405ca94a38eb',\n            'info_dict': {\n                'id': '468818',\n                'ext': 'mp4',\n                'title': \"\u092a\u094d\u0930\u093e\u0907\u092e \u091f\u093e\u0907\u092e: \u0938\u093f\u0938\u094d\u091f\u092e \u092c\u0940\u092e\u093e\u0930, \u0938\u094d\u0915\u0942\u0932 \u092c\u0926\u0939\u093e\u0932\",\n                'description': 'md5:f410512f1b49672e5695dea16ef2731d',\n                'upload_date': '20170928',\n                'duration': 2218,\n                'thumbnail': r're:https?://.*\\.jpg',\n            }\n        },\n        {\n            # __filename is url\n            'url': 'http://movies.ndtv.com/videos/cracker-free-diwali-wishes-from-karan-johar-kriti-sanon-other-stars-470304',\n            'md5': 'f1d709352305b44443515ac56b45aa46',\n            'info_dict': {\n                'id': '470304',\n                'ext': 'mp4',\n                'title': \"Cracker-Free Diwali Wishes From Karan Johar, Kriti Sanon & Other Stars\",\n                'description': 'md5:f115bba1adf2f6433fa7c1ade5feb465',\n                'upload_date': '20171019',\n                'duration': 137,\n                'thumbnail': r're:https?://.*\\.jpg',\n            }\n        },\n        {\n            'url': 'https://www.ndtv.com/video/news/news/delhi-s-air-quality-status-report-after-diwali-is-very-poor-470372',\n            'only_matching': True\n        },\n        {\n            'url': 'https://auto.ndtv.com/videos/the-cnb-daily-october-13-2017-469935',\n            'only_matching': True\n        },\n        {\n            'url': 'https://sports.ndtv.com/cricket/videos/2nd-t20i-rock-thrown-at-australia-cricket-team-bus-after-win-over-india-469764',\n            'only_matching': True\n        },\n        {\n            'url': 'http://gadgets.ndtv.com/videos/uncharted-the-lost-legacy-review-465568',\n            'only_matching': True\n        },\n        {\n            'url': 'http://profit.ndtv.com/videos/news/video-indian-economy-on-very-solid-track-international-monetary-fund-chief-470040',\n            'only_matching': True\n        },\n        {\n            'url': 'http://food.ndtv.com/video-basil-seeds-coconut-porridge-419083',\n            'only_matching': True\n        },\n        {\n            'url': 'https://doctor.ndtv.com/videos/top-health-stories-of-the-week-467396',\n            'only_matching': True\n        },\n        {\n            'url': 'https://swirlster.ndtv.com/video/how-to-make-friends-at-work-469324',\n            'only_matching': True\n        }\n    ]\n\n    def _real_extract(self, url):\n        video_id = self._match_id(url)\n        webpage = self._download_webpage(url, video_id)\n\n        # '__title' does not contain extra words such as sub-site name, \"Video\" etc.\n        title = compat_urllib_parse_unquote_plus(\n            self._search_regex(r\"__title\\s*=\\s*'([^']+)'\", webpage, 'title', default=None) or\n            self._og_search_title(webpage))\n\n        filename = self._search_regex(\n            r\"(?:__)?filename\\s*[:=]\\s*'([^']+)'\", webpage, 'video filename')\n        # in \"movies\" sub-site pages, filename is URL\n        video_url = urljoin('https://ndtvod.bc-ssl.cdn.bitgravity.com/23372/ndtv/', filename.lstrip('/'))\n\n        # \"doctor\" sub-site has MM:SS format\n        duration = parse_duration(self._search_regex(\n            r\"(?:__)?duration\\s*[:=]\\s*'([^']+)'\", webpage, 'duration', fatal=False))\n\n        # \"sports\", \"doctor\", \"swirlster\" sub-sites don't have 'publish-date'\n        upload_date = unified_strdate(self._html_search_meta(\n            'publish-date', webpage, 'upload date', default=None) or self._html_search_meta(\n            'uploadDate', webpage, 'upload date', default=None) or self._search_regex(\n            r'datePublished\"\\s*:\\s*\"([^\"]+)\"', webpage, 'upload date', fatal=False))\n\n        description = remove_end(self._og_search_description(webpage), ' (Read more)')\n\n        return {\n            'id': video_id,\n            'url': video_url,\n            'title': title,\n            'description': description,\n            'thumbnail': self._og_search_thumbnail(webpage),\n            'duration': duration,\n            'upload_date': upload_date,\n        }\n", "description": "Command-line program to download videos from YouTube.com and other video sites", "file_name": "ndtv.py", "language": "Python", "project_name": "youtube-dl", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/rg3_youtube-dl/rg3-youtube-dl-6202f08/youtube_dl/extractor/ndtv.py", "save_time": "", "source": "", "update_at": "2018-03-07T09:18:39Z", "url": "https://github.com/rg3/youtube-dl", "wiki": false}