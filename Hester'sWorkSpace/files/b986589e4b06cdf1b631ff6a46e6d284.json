{"author": "mailpile", "code": "\nimport datetime\nimport os\nimport re\nimport time\n\n\nROOT = os.path.normpath(os.path.join(os.path.dirname(__file__), '..'))\ntry:\n    GIT_HEAD = open('%s/.git/HEAD' % ROOT).read().strip().split('/')[-1]\n    BRANCH = {\n       'master': 'dev',\n       'release': ''\n    }.get(GIT_HEAD, GIT_HEAD)\nexcept (OSError, IOError):\n    BRANCH = None\n\n\nnow = os.getenv('SOURCE_DATE_EPOCH', time.time())\ntoday = datetime.datetime.fromtimestamp(float(now))\n\nif BRANCH:\n    ts = str(today).replace('-', '').replace(' ', '').replace(':', '')\n    BRANCHVER = '~%s%s' % (BRANCH, ts[:12])\nelse:\n    BRANCHVER = ''\n\n\nAPPVER = '%s%s' % (next(\n    line.strip() for line in open('%s/mailpile/config/defaults.py' % ROOT, 'r')\n    if re.match(r'^APPVER\\s*=', line)\n).split('\"')[1], BRANCHVER)\n\n\n\nAPPVER = APPVER.replace('1.0.0rc', '0.99.')\n\n\nif __name__ == \"__main__\":\n    print '%s' % APPVER\n", "comments": "   usr bin env python2 7    tweak appver make upgrades less concern  ", "content": "#!/usr/bin/env python2.7\nimport datetime\nimport os\nimport re\nimport time\n\n\nROOT = os.path.normpath(os.path.join(os.path.dirname(__file__), '..'))\ntry:\n    GIT_HEAD = open('%s/.git/HEAD' % ROOT).read().strip().split('/')[-1]\n    BRANCH = {\n       'master': 'dev',\n       'release': ''\n    }.get(GIT_HEAD, GIT_HEAD)\nexcept (OSError, IOError):\n    BRANCH = None\n\n\nnow = os.getenv('SOURCE_DATE_EPOCH', time.time())\ntoday = datetime.datetime.fromtimestamp(float(now))\n\nif BRANCH:\n    ts = str(today).replace('-', '').replace(' ', '').replace(':', '')\n    BRANCHVER = '~%s%s' % (BRANCH, ts[:12])\nelse:\n    BRANCHVER = ''\n\n\nAPPVER = '%s%s' % (next(\n    line.strip() for line in open('%s/mailpile/config/defaults.py' % ROOT, 'r')\n    if re.match(r'^APPVER\\s*=', line)\n).split('\"')[1], BRANCHVER)\n\n\n# Tweak the appver to make upgrades less of a concern.\nAPPVER = APPVER.replace('1.0.0rc', '0.99.')\n\n\nif __name__ == \"__main__\":\n    print '%s' % APPVER\n", "description": "A free & open modern, fast email client with user-friendly encryption and privacy features", "file_name": "version.py", "id": "b986589e4b06cdf1b631ff6a46e6d284", "language": "Python", "project_name": "Mailpile", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/mailpile-Mailpile/mailpile-Mailpile-8ebc5fe/scripts/version.py", "save_time": "", "source": "", "update_at": "2018-03-17T23:54:52Z", "url": "https://github.com/mailpile/Mailpile", "wiki": true}