{"author": "rg3", "code": "from __future__ import unicode_literals\n\nfrom .common import InfoExtractor\nfrom ..utils import (\n    unified_strdate,\n    clean_html,\n)\n\n\nclass ArchiveOrgIE(InfoExtractor):\n    IE_NAME = 'archive.org'\n    IE_DESC = 'archive.org videos'\n    _VALID_URL = r'https?://(?:www\\.)?archive\\.org/(?:details|embed)/(?P<id>[^/?\n    _TESTS = [{\n        'url': 'http://archive.org/details/XD300-23_68HighlightsAResearchCntAugHumanIntellect',\n        'md5': '8af1d4cf447933ed3c7f4871162602db',\n        'info_dict': {\n            'id': 'XD300-23_68HighlightsAResearchCntAugHumanIntellect',\n            'ext': 'ogg',\n            'title': '1968 Demo - FJCC Conference Presentation Reel \n            'description': 'md5:da45c349df039f1cc8075268eb1b5c25',\n            'upload_date': '19681210',\n            'uploader': 'SRI International'\n        }\n    }, {\n        'url': 'https://archive.org/details/Cops1922',\n        'md5': '0869000b4ce265e8ca62738b336b268a',\n        'info_dict': {\n            'id': 'Cops1922',\n            'ext': 'mp4',\n            'title': 'Buster Keaton\\'s \"Cops\" (1922)',\n            'description': 'md5:89e7c77bf5d965dd5c0372cfb49470f6',\n        }\n    }, {\n        'url': 'http://archive.org/embed/XD300-23_68HighlightsAResearchCntAugHumanIntellect',\n        'only_matching': True,\n    }]\n\n    def _real_extract(self, url):\n        video_id = self._match_id(url)\n        webpage = self._download_webpage(\n            'http://archive.org/embed/' + video_id, video_id)\n        jwplayer_playlist = self._parse_json(self._search_regex(\n            r\"(?s)Play\\('[^']+'\\s*,\\s*(\\[.+\\])\\s*,\\s*{.*?}\\)\",\n            webpage, 'jwplayer playlist'), video_id)\n        info = self._parse_jwplayer_data(\n            {'playlist': jwplayer_playlist}, video_id, base_url=url)\n\n        def get_optional(metadata, field):\n            return metadata.get(field, [None])[0]\n\n        metadata = self._download_json(\n            'http://archive.org/details/' + video_id, video_id, query={\n                'output': 'json',\n            })['metadata']\n        info.update({\n            'title': get_optional(metadata, 'title') or info.get('title'),\n            'description': clean_html(get_optional(metadata, 'description')),\n        })\n        if info.get('_type') != 'playlist':\n            info.update({\n                'uploader': get_optional(metadata, 'creator'),\n                'upload_date': unified_strdate(get_optional(metadata, 'date')),\n            })\n        return info\n", "comments": "#]+)(?:[?].*)?$'\n#1',\n", "content": "from __future__ import unicode_literals\n\nfrom .common import InfoExtractor\nfrom ..utils import (\n    unified_strdate,\n    clean_html,\n)\n\n\nclass ArchiveOrgIE(InfoExtractor):\n    IE_NAME = 'archive.org'\n    IE_DESC = 'archive.org videos'\n    _VALID_URL = r'https?://(?:www\\.)?archive\\.org/(?:details|embed)/(?P<id>[^/?#]+)(?:[?].*)?$'\n    _TESTS = [{\n        'url': 'http://archive.org/details/XD300-23_68HighlightsAResearchCntAugHumanIntellect',\n        'md5': '8af1d4cf447933ed3c7f4871162602db',\n        'info_dict': {\n            'id': 'XD300-23_68HighlightsAResearchCntAugHumanIntellect',\n            'ext': 'ogg',\n            'title': '1968 Demo - FJCC Conference Presentation Reel #1',\n            'description': 'md5:da45c349df039f1cc8075268eb1b5c25',\n            'upload_date': '19681210',\n            'uploader': 'SRI International'\n        }\n    }, {\n        'url': 'https://archive.org/details/Cops1922',\n        'md5': '0869000b4ce265e8ca62738b336b268a',\n        'info_dict': {\n            'id': 'Cops1922',\n            'ext': 'mp4',\n            'title': 'Buster Keaton\\'s \"Cops\" (1922)',\n            'description': 'md5:89e7c77bf5d965dd5c0372cfb49470f6',\n        }\n    }, {\n        'url': 'http://archive.org/embed/XD300-23_68HighlightsAResearchCntAugHumanIntellect',\n        'only_matching': True,\n    }]\n\n    def _real_extract(self, url):\n        video_id = self._match_id(url)\n        webpage = self._download_webpage(\n            'http://archive.org/embed/' + video_id, video_id)\n        jwplayer_playlist = self._parse_json(self._search_regex(\n            r\"(?s)Play\\('[^']+'\\s*,\\s*(\\[.+\\])\\s*,\\s*{.*?}\\)\",\n            webpage, 'jwplayer playlist'), video_id)\n        info = self._parse_jwplayer_data(\n            {'playlist': jwplayer_playlist}, video_id, base_url=url)\n\n        def get_optional(metadata, field):\n            return metadata.get(field, [None])[0]\n\n        metadata = self._download_json(\n            'http://archive.org/details/' + video_id, video_id, query={\n                'output': 'json',\n            })['metadata']\n        info.update({\n            'title': get_optional(metadata, 'title') or info.get('title'),\n            'description': clean_html(get_optional(metadata, 'description')),\n        })\n        if info.get('_type') != 'playlist':\n            info.update({\n                'uploader': get_optional(metadata, 'creator'),\n                'upload_date': unified_strdate(get_optional(metadata, 'date')),\n            })\n        return info\n", "description": "Command-line program to download videos from YouTube.com and other video sites", "file_name": "archiveorg.py", "language": "Python", "project_name": "youtube-dl", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/rg3_youtube-dl/rg3-youtube-dl-6202f08/youtube_dl/extractor/archiveorg.py", "save_time": "", "source": "", "update_at": "2018-03-07T09:18:39Z", "url": "https://github.com/rg3/youtube-dl", "wiki": false}