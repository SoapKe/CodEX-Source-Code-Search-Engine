{"author": "ansible", "code": "\n# -*- coding: utf-8 -*-\n\n# (c) 2016, Cumulus Networks <ce-ceng@cumulusnetworks.com>\n# GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)\n\nfrom __future__ import absolute_import, division, print_function\n__metaclass__ = type\n\n\nANSIBLE_METADATA = {'metadata_version': '1.1',\n                    'status': ['deprecated'],\n                    'supported_by': 'community'}\n\n\nDOCUMENTATION = r'''\n---\nmodule: cl_bond\nversion_added: \"2.1\"\nauthor: \"Cumulus Networks (@CumulusNetworks)\"\nshort_description: Configures a bond port on Cumulus Linux\ndeprecated:\n  removed_in: \"2.5\"\n  why: The M(nclu) module is designed to be easier to use for individuals who are new to Cumulus Linux by exposing the NCLU interface in an automatable way.\n  alternative: Use M(nclu) instead.\ndescription:\n    - Configures a bond interface on Cumulus Linux To configure a bridge port\n      use the cl_bridge module. To configure any other type of interface use the\n      cl_interface module. Follow the guidelines for bonding found in the\n      Cumulus User Guide at U(http://docs.cumulusnetworks.com).\noptions:\n    name:\n        description:\n            - Name of the interface.\n        required: true\n    alias_name:\n        description:\n            - Description of the port.\n    ipv4:\n        description:\n            - List of IPv4 addresses to configure on the interface.\n              In the form I(X.X.X.X/YY).\n    ipv6:\n        description:\n            - List of IPv6 addresses to configure on the interface.\n              In the form I(X:X:X::X/YYY).\n    addr_method:\n        description:\n            - Configures the port to use DHCP.\n              To enable this feature use the option I(dhcp).\n        choices: ['dhcp']\n    mtu:\n        description:\n            - Set MTU. Configure Jumbo Frame by setting MTU to I(9000).\n    virtual_ip:\n        description:\n            - Define IPv4 virtual IP used by the Cumulus Linux VRR feature.\n    virtual_mac:\n        description:\n            - Define Ethernet mac associated with Cumulus Linux VRR feature.\n    vids:\n        description:\n            - In vlan-aware mode, lists VLANs defined under the interface.\n    mstpctl_bpduguard:\n        description:\n            - Enables BPDU Guard on a port in vlan-aware mode.\n        choices:\n            - true\n            - false\n    mstpctl_portnetwork:\n        description:\n            - Enables bridge assurance in vlan-aware mode.\n        choices:\n            - true\n            - false\n    mstpctl_portadminedge:\n        description:\n            - Enables admin edge port.\n        choices:\n            - true\n            - false\n    clag_id:\n        description:\n            - Specify a unique clag_id for every dual connected bond on each\n              peer switch. The value must be between 1 and 65535 and must be the\n              same on both peer switches in order for the bond to be considered\n              dual-connected.\n    pvid:\n        description:\n            - In vlan-aware mode, defines vlan that is the untagged vlan.\n    miimon:\n        description:\n            - The mii link monitoring interval.\n        default: 100\n    mode:\n        description:\n            - The bond mode, as of Cumulus Linux 2.5 only LACP bond mode is\n              supported.\n        default: '802.3ad'\n    min_links:\n        description:\n            - Minimum number of links.\n        default: 1\n    lacp_bypass_allow:\n        description:\n            - Enable LACP bypass.\n    lacp_bypass_period:\n        description:\n            - Period for enabling LACP bypass. Max value is 900.\n    lacp_bypass_priority:\n        description:\n            - List of ports and priorities. Example I(\"swp1=10, swp2=20\").\n    lacp_bypass_all_active:\n        description:\n            - Activate all interfaces for bypass.\n              It is recommended to configure all_active instead\n              of using bypass_priority.\n    lacp_rate:\n        description:\n            - The lacp rate.\n        default: 1\n    slaves:\n        description:\n            - Bond members.\n        required: True\n    xmit_hash_policy:\n        description:\n            - Transmit load balancing algorithm. As of Cumulus Linux 2.5 only\n              I(layer3+4) policy is supported.\n        default: layer3+4\n    location:\n        description:\n            - Interface directory location.\n        default:\n            - '/etc/network/interfaces.d'\n\nrequirements:  [ Alternate Debian network interface manager - \\\nifupdown2 @ github.com/CumulusNetworks/ifupdown2 ]\nnotes:\n    - As this module writes the interface directory location, ensure that\n      ``/etc/network/interfaces`` has a 'source /etc/network/interfaces.d/\\*' or\n      whatever path is mentioned in the ``location`` attribute.\n\n    - For the config to be activated, i.e installed in the kernel,\n      \"service networking reload\" needs be be executed. See EXAMPLES section.\n'''\n\nEXAMPLES = '''\n# Options ['virtual_mac', 'virtual_ip'] are required together\n\n- cl_bond:\n    name: bond0\n    slaves:\n      - swp4-5\n    ipv4: 10.1.1.1/24\n\n\n- cl_bond:\n    name: bond1\n    slaves:\n      - swp1s0\n      - swp2s0\n    clag_id: 1\n\n\n\n\n- cl_bond:\n    name: \"{{ item.key }}\"\n    slaves: \"{{ item.value.slaves }}\"\n    clag_id: \"{{ item.value.clag_id|default(omit) }}\"\n    ipv4:  \"{{ item.value.ipv4|default(omit) }}\"\n    ipv6: \"{{ item.value.ipv6|default(omit) }}\"\n    alias_name: \"{{ item.value.alias_name|default(omit) }}\"\n    addr_method: \"{{ item.value.addr_method|default(omit) }}\"\n    mtu: \"{{ item.value.mtu|default(omit) }}\"\n    vids: \"{{ item.value.vids|default(omit) }}\"\n    virtual_ip: \"{{ item.value.virtual_ip|default(omit) }}\"\n    virtual_mac: \"{{ item.value.virtual_mac|default(omit) }}\"\n    mstpctl_portnetwork: \"{{ item.value.mstpctl_portnetwork|default('no') }}\"\n    mstpctl_portadminedge: \"{{ item.value.mstpctl_portadminedge|default('no') }}\"\n    mstpctl_bpduguard: \"{{ item.value.mstpctl_bpduguard|default('no') }}\"\n  with_dict: \"{{ cl_bonds }}\"\n\n\n\n---\ncl_bonds:\n  bond0:\n    alias_name: uplink to isp\n    slaves:\n      - swp1\n      - swp3\n    ipv4: 10.1.1.1/24'\n  bond2:\n    vids:\n      - 1\n      - 50\n    clag_id: 1\n'''\n\nRETURN = '''\nchanged:\n    description: whether the interface was changed\n    returned: changed\n    type: bool\n    sample: True\nmsg:\n    description: human-readable report of success or failure\n    returned: always\n    type: string\n    sample: \"interface bond0 config updated\"\n'''\n\nfrom ansible.module_utils.common.removed import removed_module\n\nif __name__ == '__main__':\n    removed_module()\n", "comments": "        module  cl bond version added   2 1  author   cumulus networks ( cumulusnetworks)  short description  configures bond port cumulus linux deprecated    removed   2 5     the m(nclu) module designed easier use individuals new cumulus linux exposing nclu interface automatable way    alternative  use m(nclu) instead  description        configures bond interface cumulus linux to configure bridge port       use cl bridge module  to configure type interface use       cl interface module  follow guidelines bonding found       cumulus user guide u(http   docs cumulusnetworks com)  options      name          description                name interface          required  true     alias name          description                description port      ipv4          description                list ipv4 addresses configure interface                in form i(x x x x yy)      ipv6          description                list ipv6 addresses configure interface                in form i(x x x  x yyy)      addr method          description                configures port use dhcp                to enable feature use option i(dhcp)          choices    dhcp       mtu          description                set mtu  configure jumbo frame setting mtu i(9000)      virtual ip          description                define ipv4 virtual ip used cumulus linux vrr feature      virtual mac          description                define ethernet mac associated cumulus linux vrr feature      vids          description                in vlan aware mode  lists vlans defined interface      mstpctl bpduguard          description                enables bpdu guard port vlan aware mode          choices                true               false     mstpctl portnetwork          description                enables bridge assurance vlan aware mode          choices                true               false     mstpctl portadminedge          description                enables admin edge port          choices                true               false     clag id          description                specify unique clag id every dual connected bond               peer switch  the value must 1 65535 must               peer switches order bond considered               dual connected      pvid          description                in vlan aware mode  defines vlan untagged vlan      miimon          description                the mii link monitoring interval          default  100     mode          description                the bond mode  cumulus linux 2 5 lacp bond mode               supported          default   802 3ad      min links          description                minimum number links          default  1     lacp bypass allow          description                enable lacp bypass      lacp bypass period          description                period enabling lacp bypass  max value 900      lacp bypass priority          description                list ports priorities  example i( swp1 10  swp2 20 )      lacp bypass active          description                activate interfaces bypass                it recommended configure active instead               using bypass priority      lacp rate          description                the lacp rate          default  1     slaves          description                bond members          required  true     xmit hash policy          description                transmit load balancing algorithm  as cumulus linux 2 5               i(layer3 4) policy supported          default  layer3 4     location          description                interface directory location          default                  etc network interfaces   requirements     alternate debian network interface manager     ifupdown2   github com cumulusnetworks ifupdown2   notes        as module writes interface directory location  ensure          etc network interfaces    source  etc network interfaces           whatever path mentioned   location   attribute         for config activated  e installed kernel         service networking reload  needs executed  see examples section       examples         options   virtual mac    virtual ip   required together   configure bond interface ip address   cl bond      name  bond0     slaves          swp4 5     ipv4  10 1 1 1 24    configure bond dual connected clag bond   cl bond      name  bond1     slaves          swp1s0         swp2s0     clag id  1    define cl bond tasks file   write interface config variables file   options want    cl bond      name      item key         slaves      item value slaves         clag id      item value clag id default(omit)         ipv4       item value ipv4 default(omit)         ipv6      item value ipv6 default(omit)         alias name      item value alias name default(omit)         addr method      item value addr method default(omit)         mtu      item value mtu default(omit)         vids      item value vids default(omit)         virtual ip      item value virtual ip default(omit)         virtual mac      item value virtual mac default(omit)         mstpctl portnetwork      item value mstpctl portnetwork default( )         mstpctl portadminedge      item value mstpctl portadminedge default( )         mstpctl bpduguard      item value mstpctl bpduguard default( )       dict      cl bonds        in vars file                    cl bonds    bond0      alias name  uplink isp     slaves          swp1         swp3     ipv4  10 1 1 1 24    bond2      vids          1         50     clag id  1      return       changed      description  whether interface changed     returned  changed     type  bool     sample  true msg      description  human readable report success failure     returned  always     type  string     sample   interface bond0 config updated          usr bin python        coding  utf 8        (c) 2016  cumulus networks  ce ceng cumulusnetworks com     gnu general public license v3 0  (see copying https   www gnu org licenses gpl 3 0 txt)    options   virtual mac    virtual ip   required together    configure bond interface ip address    configure bond dual connected clag bond    define cl bond tasks file    write interface config variables file    options want     in vars file                 ", "content": "#!/usr/bin/python\n# -*- coding: utf-8 -*-\n\n# (c) 2016, Cumulus Networks <ce-ceng@cumulusnetworks.com>\n# GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)\n\nfrom __future__ import absolute_import, division, print_function\n__metaclass__ = type\n\n\nANSIBLE_METADATA = {'metadata_version': '1.1',\n                    'status': ['deprecated'],\n                    'supported_by': 'community'}\n\n\nDOCUMENTATION = r'''\n---\nmodule: cl_bond\nversion_added: \"2.1\"\nauthor: \"Cumulus Networks (@CumulusNetworks)\"\nshort_description: Configures a bond port on Cumulus Linux\ndeprecated:\n  removed_in: \"2.5\"\n  why: The M(nclu) module is designed to be easier to use for individuals who are new to Cumulus Linux by exposing the NCLU interface in an automatable way.\n  alternative: Use M(nclu) instead.\ndescription:\n    - Configures a bond interface on Cumulus Linux To configure a bridge port\n      use the cl_bridge module. To configure any other type of interface use the\n      cl_interface module. Follow the guidelines for bonding found in the\n      Cumulus User Guide at U(http://docs.cumulusnetworks.com).\noptions:\n    name:\n        description:\n            - Name of the interface.\n        required: true\n    alias_name:\n        description:\n            - Description of the port.\n    ipv4:\n        description:\n            - List of IPv4 addresses to configure on the interface.\n              In the form I(X.X.X.X/YY).\n    ipv6:\n        description:\n            - List of IPv6 addresses to configure on the interface.\n              In the form I(X:X:X::X/YYY).\n    addr_method:\n        description:\n            - Configures the port to use DHCP.\n              To enable this feature use the option I(dhcp).\n        choices: ['dhcp']\n    mtu:\n        description:\n            - Set MTU. Configure Jumbo Frame by setting MTU to I(9000).\n    virtual_ip:\n        description:\n            - Define IPv4 virtual IP used by the Cumulus Linux VRR feature.\n    virtual_mac:\n        description:\n            - Define Ethernet mac associated with Cumulus Linux VRR feature.\n    vids:\n        description:\n            - In vlan-aware mode, lists VLANs defined under the interface.\n    mstpctl_bpduguard:\n        description:\n            - Enables BPDU Guard on a port in vlan-aware mode.\n        choices:\n            - true\n            - false\n    mstpctl_portnetwork:\n        description:\n            - Enables bridge assurance in vlan-aware mode.\n        choices:\n            - true\n            - false\n    mstpctl_portadminedge:\n        description:\n            - Enables admin edge port.\n        choices:\n            - true\n            - false\n    clag_id:\n        description:\n            - Specify a unique clag_id for every dual connected bond on each\n              peer switch. The value must be between 1 and 65535 and must be the\n              same on both peer switches in order for the bond to be considered\n              dual-connected.\n    pvid:\n        description:\n            - In vlan-aware mode, defines vlan that is the untagged vlan.\n    miimon:\n        description:\n            - The mii link monitoring interval.\n        default: 100\n    mode:\n        description:\n            - The bond mode, as of Cumulus Linux 2.5 only LACP bond mode is\n              supported.\n        default: '802.3ad'\n    min_links:\n        description:\n            - Minimum number of links.\n        default: 1\n    lacp_bypass_allow:\n        description:\n            - Enable LACP bypass.\n    lacp_bypass_period:\n        description:\n            - Period for enabling LACP bypass. Max value is 900.\n    lacp_bypass_priority:\n        description:\n            - List of ports and priorities. Example I(\"swp1=10, swp2=20\").\n    lacp_bypass_all_active:\n        description:\n            - Activate all interfaces for bypass.\n              It is recommended to configure all_active instead\n              of using bypass_priority.\n    lacp_rate:\n        description:\n            - The lacp rate.\n        default: 1\n    slaves:\n        description:\n            - Bond members.\n        required: True\n    xmit_hash_policy:\n        description:\n            - Transmit load balancing algorithm. As of Cumulus Linux 2.5 only\n              I(layer3+4) policy is supported.\n        default: layer3+4\n    location:\n        description:\n            - Interface directory location.\n        default:\n            - '/etc/network/interfaces.d'\n\nrequirements:  [ Alternate Debian network interface manager - \\\nifupdown2 @ github.com/CumulusNetworks/ifupdown2 ]\nnotes:\n    - As this module writes the interface directory location, ensure that\n      ``/etc/network/interfaces`` has a 'source /etc/network/interfaces.d/\\*' or\n      whatever path is mentioned in the ``location`` attribute.\n\n    - For the config to be activated, i.e installed in the kernel,\n      \"service networking reload\" needs be be executed. See EXAMPLES section.\n'''\n\nEXAMPLES = '''\n# Options ['virtual_mac', 'virtual_ip'] are required together\n# configure a bond interface with IP address\n- cl_bond:\n    name: bond0\n    slaves:\n      - swp4-5\n    ipv4: 10.1.1.1/24\n\n# configure bond as a dual-connected clag bond\n- cl_bond:\n    name: bond1\n    slaves:\n      - swp1s0\n      - swp2s0\n    clag_id: 1\n\n# define cl_bond once in tasks file\n# then write interface config in variables file\n# with just the options you want.\n- cl_bond:\n    name: \"{{ item.key }}\"\n    slaves: \"{{ item.value.slaves }}\"\n    clag_id: \"{{ item.value.clag_id|default(omit) }}\"\n    ipv4:  \"{{ item.value.ipv4|default(omit) }}\"\n    ipv6: \"{{ item.value.ipv6|default(omit) }}\"\n    alias_name: \"{{ item.value.alias_name|default(omit) }}\"\n    addr_method: \"{{ item.value.addr_method|default(omit) }}\"\n    mtu: \"{{ item.value.mtu|default(omit) }}\"\n    vids: \"{{ item.value.vids|default(omit) }}\"\n    virtual_ip: \"{{ item.value.virtual_ip|default(omit) }}\"\n    virtual_mac: \"{{ item.value.virtual_mac|default(omit) }}\"\n    mstpctl_portnetwork: \"{{ item.value.mstpctl_portnetwork|default('no') }}\"\n    mstpctl_portadminedge: \"{{ item.value.mstpctl_portadminedge|default('no') }}\"\n    mstpctl_bpduguard: \"{{ item.value.mstpctl_bpduguard|default('no') }}\"\n  with_dict: \"{{ cl_bonds }}\"\n\n# In vars file\n# ============\n---\ncl_bonds:\n  bond0:\n    alias_name: uplink to isp\n    slaves:\n      - swp1\n      - swp3\n    ipv4: 10.1.1.1/24'\n  bond2:\n    vids:\n      - 1\n      - 50\n    clag_id: 1\n'''\n\nRETURN = '''\nchanged:\n    description: whether the interface was changed\n    returned: changed\n    type: bool\n    sample: True\nmsg:\n    description: human-readable report of success or failure\n    returned: always\n    type: string\n    sample: \"interface bond0 config updated\"\n'''\n\nfrom ansible.module_utils.common.removed import removed_module\n\nif __name__ == '__main__':\n    removed_module()\n", "description": "Ansible is a radically simple IT automation platform that makes your applications and systems easier to deploy. Avoid writing scripts or custom code to deploy and update your applications\u2014 automate in a language that approaches plain English, using SSH, with no agents to install on remote systems.", "file_name": "_cl_bond.py", "id": "ab9f7c90787f45532787fdd5f23e40fd", "language": "Python", "project_name": "ansible", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/ansible-ansible/ansible-ansible-d30554b/lib/ansible/modules/network/cumulus/_cl_bond.py", "save_time": "", "source": "", "update_at": "2018-03-18T14:08:28Z", "url": "https://github.com/ansible/ansible", "wiki": false}