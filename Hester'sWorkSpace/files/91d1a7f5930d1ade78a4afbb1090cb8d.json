{"author": "ansible", "code": " -*- coding: utf-8 -*-\n (c) 2017 Toshio Kuratomi <tkuratomi@ansible.com>\n\n This file is part of Ansible\n\n Ansible is free software: you can redistribute it and/or modify\n it under the terms of the GNU General Public License as published by\n the Free Software Foundation, either version 3 of the License, or\n (at your option) any later version.\n\n Ansible is distributed in the hope that it will be useful,\n but WITHOUT ANY WARRANTY; without even the implied warranty of\n MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n GNU General Public License for more details.\n\n You should have received a copy of the GNU General Public License\n along with Ansible.  If not, see <http://www.gnu.org/licenses/>.\n\n Make coding more python3-ish\nfrom __future__ import (absolute_import, division)\n__metaclass__ = type\n\nimport pwd\nimport os\n\nimport pytest\n\nfrom ansible import constants\nfrom ansible.module_utils.six import StringIO\nfrom ansible.module_utils.six.moves import configparser\nfrom ansible.module_utils._text import to_text\n\n\n@pytest.fixture\ndef cfgparser():\n    CFGDATA = StringIO(\"\"\"\n[defaults]\ndefaults_one = 'data_defaults_one'\n\n[level1]\nlevel1_one = 'data_level1_one'\n    \"\"\")\n    p = configparser.ConfigParser()\n    p.readfp(CFGDATA)\n    return p\n\n\n@pytest.fixture\ndef user():\n    user = {}\n    user['uid'] = os.geteuid()\n\n    pwd_entry = pwd.getpwuid(user['uid'])\n    user['username'] = pwd_entry.pw_name\n    user['home'] = pwd_entry.pw_dir\n\n    return user\n\n\n@pytest.fixture\ndef cfg_file():\n    data = '/ansible/test/cfg/path'\n    old_cfg_file = constants.CONFIG_FILE\n    constants.CONFIG_FILE = os.path.join(data, 'ansible.cfg')\n    yield data\n\n    constants.CONFIG_FILE = old_cfg_file\n\n\n@pytest.fixture\ndef null_cfg_file():\n    old_cfg_file = constants.CONFIG_FILE\n    del constants.CONFIG_FILE\n    yield\n\n    constants.CONFIG_FILE = old_cfg_file\n\n\n@pytest.fixture\ndef cwd():\n    data = '/ansible/test/cwd/'\n    old_cwd = os.getcwd\n    os.getcwd = lambda: data\n\n    old_cwdu = None\n    if hasattr(os, 'getcwdu'):\n        old_cwdu = os.getcwdu\n        os.getcwdu = lambda: to_text(data)\n\n    yield data\n\n    os.getcwd = old_cwd\n    if hasattr(os, 'getcwdu'):\n        os.getcwdu = old_cwdu\n\n\nclass TestMkBoolean:\n    def test_bools(self):\n        assert constants.mk_boolean(True) is True\n        assert constants.mk_boolean(False) is False\n\n    def test_none(self):\n        assert constants.mk_boolean(None) is False\n\n    def test_numbers(self):\n        assert constants.mk_boolean(1) is True\n        assert constants.mk_boolean(0) is False\n        assert constants.mk_boolean(0.0) is False\n\n Current mk_boolean doesn't consider these to be true values\n    def test_other_numbers(self):\n        assert constants.mk_boolean(2) is True\n        assert constants.mk_boolean(-1) is True\n        assert constants.mk_boolean(0.1) is True\n\n    def test_strings(self):\n        assert constants.mk_boolean(\"true\") is True\n        assert constants.mk_boolean(\"TRUE\") is True\n        assert constants.mk_boolean(\"t\") is True\n        assert constants.mk_boolean(\"yes\") is True\n        assert constants.mk_boolean(\"y\") is True\n        assert constants.mk_boolean(\"on\") is True\n", "comments": "     defaults  defaults one    data defaults one    level1  level1 one    data level1 one                 coding  utf 8        (c) 2017 toshio kuratomi  tkuratomi ansible com        this file part ansible       ansible free software  redistribute modify    terms gnu general public license published    free software foundation  either version 3 license     (at option) later version        ansible distributed hope useful     without any warranty  without even implied warranty    merchantability fitness for a particular purpose   see    gnu general public license details        you received copy gnu general public license    along ansible   if  see  http   www gnu org licenses       make coding python3 ish    current mk boolean consider true values       def test numbers(self)            assert constants mk boolean(2) true           assert constants mk boolean( 1) true           assert constants mk boolean(0 1) true ", "content": "# -*- coding: utf-8 -*-\n# (c) 2017 Toshio Kuratomi <tkuratomi@ansible.com>\n#\n# This file is part of Ansible\n#\n# Ansible is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Ansible is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Ansible.  If not, see <http://www.gnu.org/licenses/>.\n\n# Make coding more python3-ish\nfrom __future__ import (absolute_import, division)\n__metaclass__ = type\n\nimport pwd\nimport os\n\nimport pytest\n\nfrom ansible import constants\nfrom ansible.module_utils.six import StringIO\nfrom ansible.module_utils.six.moves import configparser\nfrom ansible.module_utils._text import to_text\n\n\n@pytest.fixture\ndef cfgparser():\n    CFGDATA = StringIO(\"\"\"\n[defaults]\ndefaults_one = 'data_defaults_one'\n\n[level1]\nlevel1_one = 'data_level1_one'\n    \"\"\")\n    p = configparser.ConfigParser()\n    p.readfp(CFGDATA)\n    return p\n\n\n@pytest.fixture\ndef user():\n    user = {}\n    user['uid'] = os.geteuid()\n\n    pwd_entry = pwd.getpwuid(user['uid'])\n    user['username'] = pwd_entry.pw_name\n    user['home'] = pwd_entry.pw_dir\n\n    return user\n\n\n@pytest.fixture\ndef cfg_file():\n    data = '/ansible/test/cfg/path'\n    old_cfg_file = constants.CONFIG_FILE\n    constants.CONFIG_FILE = os.path.join(data, 'ansible.cfg')\n    yield data\n\n    constants.CONFIG_FILE = old_cfg_file\n\n\n@pytest.fixture\ndef null_cfg_file():\n    old_cfg_file = constants.CONFIG_FILE\n    del constants.CONFIG_FILE\n    yield\n\n    constants.CONFIG_FILE = old_cfg_file\n\n\n@pytest.fixture\ndef cwd():\n    data = '/ansible/test/cwd/'\n    old_cwd = os.getcwd\n    os.getcwd = lambda: data\n\n    old_cwdu = None\n    if hasattr(os, 'getcwdu'):\n        old_cwdu = os.getcwdu\n        os.getcwdu = lambda: to_text(data)\n\n    yield data\n\n    os.getcwd = old_cwd\n    if hasattr(os, 'getcwdu'):\n        os.getcwdu = old_cwdu\n\n\nclass TestMkBoolean:\n    def test_bools(self):\n        assert constants.mk_boolean(True) is True\n        assert constants.mk_boolean(False) is False\n\n    def test_none(self):\n        assert constants.mk_boolean(None) is False\n\n    def test_numbers(self):\n        assert constants.mk_boolean(1) is True\n        assert constants.mk_boolean(0) is False\n        assert constants.mk_boolean(0.0) is False\n\n# Current mk_boolean doesn't consider these to be true values\n#    def test_other_numbers(self):\n#        assert constants.mk_boolean(2) is True\n#        assert constants.mk_boolean(-1) is True\n#        assert constants.mk_boolean(0.1) is True\n\n    def test_strings(self):\n        assert constants.mk_boolean(\"true\") is True\n        assert constants.mk_boolean(\"TRUE\") is True\n        assert constants.mk_boolean(\"t\") is True\n        assert constants.mk_boolean(\"yes\") is True\n        assert constants.mk_boolean(\"y\") is True\n        assert constants.mk_boolean(\"on\") is True\n", "description": "Ansible is a radically simple IT automation platform that makes your applications and systems easier to deploy. Avoid writing scripts or custom code to deploy and update your applications\u2014 automate in a language that approaches plain English, using SSH, with no agents to install on remote systems.", "file_name": "test_constants.py", "id": "91d1a7f5930d1ade78a4afbb1090cb8d", "language": "Python", "project_name": "ansible", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/ansible-ansible/ansible-ansible-d30554b/test/units/test_constants.py", "save_time": "", "source": "", "update_at": "2018-03-18T14:08:28Z", "url": "https://github.com/ansible/ansible", "wiki": false}