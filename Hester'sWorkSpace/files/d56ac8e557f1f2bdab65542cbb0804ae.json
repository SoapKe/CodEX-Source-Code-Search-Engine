{"author": "rg3", "code": "\nfrom __future__ import unicode_literals\n\nimport re\n\nfrom .brightcove import BrightcoveNewIE\nfrom ..utils import update_url_query\n\n\nclass SevenPlusIE(BrightcoveNewIE):\n    IE_NAME = '7plus'\n    _VALID_URL = r'https?://(?:www\\.)?7plus\\.com\\.au/(?P<path>[^?]+\\?.*?\\bepisode-id=(?P<id>[^&\n    _TESTS = [{\n        'url': 'https://7plus.com.au/BEAT?episode-id=BEAT-001',\n        'info_dict': {\n            'id': 'BEAT-001',\n            'ext': 'mp4',\n            'title': 'S1 E1 - Help / Lucy In The Sky With Diamonds',\n            'description': 'md5:37718bea20a8eedaca7f7361af566131',\n            'uploader_id': '5303576322001',\n            'upload_date': '20171031',\n            'timestamp': 1509440068,\n        },\n        'params': {\n            'format': 'bestvideo',\n            'skip_download': True,\n        }\n    }, {\n        'url': 'https://7plus.com.au/UUUU?episode-id=AUMS43-001',\n        'only_matching': True,\n    }]\n\n    def _real_extract(self, url):\n        path, episode_id = re.match(self._VALID_URL, url).groups()\n\n        media = self._download_json(\n            'https://videoservice.swm.digital/playback', episode_id, query={\n                'appId': '7plus',\n                'deviceType': 'web',\n                'platformType': 'web',\n                'accountId': 5303576322001,\n                'referenceId': 'ref:' + episode_id,\n                'deliveryId': 'csai',\n                'videoType': 'vod',\n            })['media']\n\n        for source in media.get('sources', {}):\n            src = source.get('src')\n            if not src:\n                continue\n            source['src'] = update_url_query(src, {'rule': ''})\n\n        info = self._parse_brightcove_metadata(media, episode_id)\n\n        content = self._download_json(\n            'https://component-cdn.swm.digital/content/' + path,\n            episode_id, headers={\n                'market-id': 4,\n            }, fatal=False) or {}\n        for item in content.get('items', {}):\n            if item.get('componentData', {}).get('componentType') == 'infoPanel':\n                for src_key, dst_key in [('title', 'title'), ('shortSynopsis', 'description')]:\n                    value = item.get(src_key)\n                    if value:\n                        info[dst_key] = value\n\n        return info\n", "comments": "# coding: utf-8\n#]+))'\n", "content": "# coding: utf-8\nfrom __future__ import unicode_literals\n\nimport re\n\nfrom .brightcove import BrightcoveNewIE\nfrom ..utils import update_url_query\n\n\nclass SevenPlusIE(BrightcoveNewIE):\n    IE_NAME = '7plus'\n    _VALID_URL = r'https?://(?:www\\.)?7plus\\.com\\.au/(?P<path>[^?]+\\?.*?\\bepisode-id=(?P<id>[^&#]+))'\n    _TESTS = [{\n        'url': 'https://7plus.com.au/BEAT?episode-id=BEAT-001',\n        'info_dict': {\n            'id': 'BEAT-001',\n            'ext': 'mp4',\n            'title': 'S1 E1 - Help / Lucy In The Sky With Diamonds',\n            'description': 'md5:37718bea20a8eedaca7f7361af566131',\n            'uploader_id': '5303576322001',\n            'upload_date': '20171031',\n            'timestamp': 1509440068,\n        },\n        'params': {\n            'format': 'bestvideo',\n            'skip_download': True,\n        }\n    }, {\n        'url': 'https://7plus.com.au/UUUU?episode-id=AUMS43-001',\n        'only_matching': True,\n    }]\n\n    def _real_extract(self, url):\n        path, episode_id = re.match(self._VALID_URL, url).groups()\n\n        media = self._download_json(\n            'https://videoservice.swm.digital/playback', episode_id, query={\n                'appId': '7plus',\n                'deviceType': 'web',\n                'platformType': 'web',\n                'accountId': 5303576322001,\n                'referenceId': 'ref:' + episode_id,\n                'deliveryId': 'csai',\n                'videoType': 'vod',\n            })['media']\n\n        for source in media.get('sources', {}):\n            src = source.get('src')\n            if not src:\n                continue\n            source['src'] = update_url_query(src, {'rule': ''})\n\n        info = self._parse_brightcove_metadata(media, episode_id)\n\n        content = self._download_json(\n            'https://component-cdn.swm.digital/content/' + path,\n            episode_id, headers={\n                'market-id': 4,\n            }, fatal=False) or {}\n        for item in content.get('items', {}):\n            if item.get('componentData', {}).get('componentType') == 'infoPanel':\n                for src_key, dst_key in [('title', 'title'), ('shortSynopsis', 'description')]:\n                    value = item.get(src_key)\n                    if value:\n                        info[dst_key] = value\n\n        return info\n", "description": "Command-line program to download videos from YouTube.com and other video sites", "file_name": "sevenplus.py", "language": "Python", "project_name": "youtube-dl", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/rg3_youtube-dl/rg3-youtube-dl-6202f08/youtube_dl/extractor/sevenplus.py", "save_time": "", "source": "", "update_at": "2018-03-07T09:18:39Z", "url": "https://github.com/rg3/youtube-dl", "wiki": false}