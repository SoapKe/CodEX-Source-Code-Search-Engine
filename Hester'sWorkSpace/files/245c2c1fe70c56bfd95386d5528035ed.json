{"author": "rg3", "code": "\nfrom __future__ import unicode_literals\n\nimport re\n\nfrom .common import InfoExtractor\nfrom ..utils import orderedSet\n\n\nclass CTVNewsIE(InfoExtractor):\n    _VALID_URL = r'https?://(?:.+?\\.)?ctvnews\\.ca/(?:video\\?(?:clip|playlist|bin)Id=|.*?)(?P<id>[0-9.]+)'\n    _TESTS = [{\n        'url': 'http://www.ctvnews.ca/video?clipId=901995',\n        'md5': '10deb320dc0ccb8d01d34d12fc2ea672',\n        'info_dict': {\n            'id': '901995',\n            'ext': 'mp4',\n            'title': 'Extended: \\'That person cannot be me\\' Johnson says',\n            'description': 'md5:958dd3b4f5bbbf0ed4d045c790d89285',\n            'timestamp': 1467286284,\n            'upload_date': '20160630',\n        }\n    }, {\n        'url': 'http://www.ctvnews.ca/video?playlistId=1.2966224',\n        'info_dict':\n        {\n            'id': '1.2966224',\n        },\n        'playlist_mincount': 19,\n    }, {\n        'url': 'http://www.ctvnews.ca/video?binId=1.2876780',\n        'info_dict':\n        {\n            'id': '1.2876780',\n        },\n        'playlist_mincount': 100,\n    }, {\n        'url': 'http://www.ctvnews.ca/1.810401',\n        'only_matching': True,\n    }, {\n        'url': 'http://www.ctvnews.ca/canadiens-send-p-k-subban-to-nashville-in-blockbuster-trade-1.2967231',\n        'only_matching': True,\n    }, {\n        'url': 'http://vancouverisland.ctvnews.ca/video?clipId=761241',\n        'only_matching': True,\n    }]\n\n    def _real_extract(self, url):\n        page_id = self._match_id(url)\n\n        def ninecninemedia_url_result(clip_id):\n            return {\n                '_type': 'url_transparent',\n                'id': clip_id,\n                'url': '9c9media:ctvnews_web:%s' % clip_id,\n                'ie_key': 'NineCNineMedia',\n            }\n\n        if page_id.isdigit():\n            return ninecninemedia_url_result(page_id)\n        else:\n            webpage = self._download_webpage('http://www.ctvnews.ca/%s' % page_id, page_id, query={\n                'ot': 'example.AjaxPageLayout.ot',\n                'maxItemsPerPage': 1000000,\n            })\n            entries = [ninecninemedia_url_result(clip_id) for clip_id in orderedSet(\n                re.findall(r'clip\\.id\\s*=\\s*(\\d+);', webpage))]\n            return self.playlist_result(entries, page_id)\n", "comments": "# coding: utf-8\n", "content": "# coding: utf-8\nfrom __future__ import unicode_literals\n\nimport re\n\nfrom .common import InfoExtractor\nfrom ..utils import orderedSet\n\n\nclass CTVNewsIE(InfoExtractor):\n    _VALID_URL = r'https?://(?:.+?\\.)?ctvnews\\.ca/(?:video\\?(?:clip|playlist|bin)Id=|.*?)(?P<id>[0-9.]+)'\n    _TESTS = [{\n        'url': 'http://www.ctvnews.ca/video?clipId=901995',\n        'md5': '10deb320dc0ccb8d01d34d12fc2ea672',\n        'info_dict': {\n            'id': '901995',\n            'ext': 'mp4',\n            'title': 'Extended: \\'That person cannot be me\\' Johnson says',\n            'description': 'md5:958dd3b4f5bbbf0ed4d045c790d89285',\n            'timestamp': 1467286284,\n            'upload_date': '20160630',\n        }\n    }, {\n        'url': 'http://www.ctvnews.ca/video?playlistId=1.2966224',\n        'info_dict':\n        {\n            'id': '1.2966224',\n        },\n        'playlist_mincount': 19,\n    }, {\n        'url': 'http://www.ctvnews.ca/video?binId=1.2876780',\n        'info_dict':\n        {\n            'id': '1.2876780',\n        },\n        'playlist_mincount': 100,\n    }, {\n        'url': 'http://www.ctvnews.ca/1.810401',\n        'only_matching': True,\n    }, {\n        'url': 'http://www.ctvnews.ca/canadiens-send-p-k-subban-to-nashville-in-blockbuster-trade-1.2967231',\n        'only_matching': True,\n    }, {\n        'url': 'http://vancouverisland.ctvnews.ca/video?clipId=761241',\n        'only_matching': True,\n    }]\n\n    def _real_extract(self, url):\n        page_id = self._match_id(url)\n\n        def ninecninemedia_url_result(clip_id):\n            return {\n                '_type': 'url_transparent',\n                'id': clip_id,\n                'url': '9c9media:ctvnews_web:%s' % clip_id,\n                'ie_key': 'NineCNineMedia',\n            }\n\n        if page_id.isdigit():\n            return ninecninemedia_url_result(page_id)\n        else:\n            webpage = self._download_webpage('http://www.ctvnews.ca/%s' % page_id, page_id, query={\n                'ot': 'example.AjaxPageLayout.ot',\n                'maxItemsPerPage': 1000000,\n            })\n            entries = [ninecninemedia_url_result(clip_id) for clip_id in orderedSet(\n                re.findall(r'clip\\.id\\s*=\\s*(\\d+);', webpage))]\n            return self.playlist_result(entries, page_id)\n", "description": "Command-line program to download videos from YouTube.com and other video sites", "file_name": "ctvnews.py", "language": "Python", "project_name": "youtube-dl", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/rg3_youtube-dl/rg3-youtube-dl-6202f08/youtube_dl/extractor/ctvnews.py", "save_time": "", "source": "", "update_at": "2018-03-07T09:18:39Z", "url": "https://github.com/rg3/youtube-dl", "wiki": false}