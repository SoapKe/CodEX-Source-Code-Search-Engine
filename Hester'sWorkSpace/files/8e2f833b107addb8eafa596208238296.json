{"author": "tgalal", "code": "from yowsup.structs import ProtocolEntity, ProtocolTreeNode\nclass PresenceProtocolEntity(ProtocolEntity):\n    | ?\n\n    def __init__(self, _type = None, name = None, _from = None, last = None):\n        super(PresenceProtocolEntity, self).__init__(\"presence\")\n        self._type = _type\n        self.name = name\n        self._from = _from\n        self.last = last\n\n    def getType(self):\n        return self._type\n\n    def getName(self):\n        return self.name\n\n    def getFrom(self, full = True):\n        return self._from if full else self._from.split('@')[0]\n\n    def getLast(self):\n        return self.last\n\n    def toProtocolTreeNode(self):\n        attribs = {}\n        if self._type:\n            attribs[\"type\"] = self._type\n        if self.name:\n            attribs[\"name\"] = self.name\n        if self._from:\n            attribs[\"from\"] = self._from\n        if self.last:\n            attribs[\"last\"] = self.last\n\n        return self._createProtocolTreeNode(attribs, None, None)\n\n    def __str__(self):\n        out  = \"Presence:\\n\"\n        if self._type:\n            out += \"Type: %s\\n\" % self._type\n        if self.name:\n            out += \"Name: %s\\n\" % self.name\n        if self._from:\n            out += \"From: %s\\n\" % self._from\n        if self.last:\n            out += \"Last seen: %s\\n\" % self.last\n        return out\n\n    @staticmethod\n    def fromProtocolTreeNode(node):\n        return PresenceProtocolEntity(\n            node.getAttributeValue(\"type\"),\n            node.getAttributeValue(\"name\"),\n            node.getAttributeValue(\"from\"),\n            node.getAttributeValue(\"last\")\n            )\n\n", "comments": "         presence type    type   name   push name      presence      should normally either type name      contact goes offline       presence type  unavailable     contact jid    last  deny             presence       contact goes online       presence  contact jid         presence           ", "content": "from yowsup.structs import ProtocolEntity, ProtocolTreeNode\nclass PresenceProtocolEntity(ProtocolEntity):\n    '''\n    <presence type=\"{{type}} name={{push_name}}\"></presence>\n    Should normally be either type or name\n\n    when contact goes offline:\n    <presence type=\"unavailable\" from=\"{{contact_jid}}\" last=\"deny | ?\">\n    </presence>\n\n    when contact goes online:\n    <presence from=\"contact_jid\">\n    </presence>\n\n    '''\n\n    def __init__(self, _type = None, name = None, _from = None, last = None):\n        super(PresenceProtocolEntity, self).__init__(\"presence\")\n        self._type = _type\n        self.name = name\n        self._from = _from\n        self.last = last\n\n    def getType(self):\n        return self._type\n\n    def getName(self):\n        return self.name\n\n    def getFrom(self, full = True):\n        return self._from if full else self._from.split('@')[0]\n\n    def getLast(self):\n        return self.last\n\n    def toProtocolTreeNode(self):\n        attribs = {}\n        if self._type:\n            attribs[\"type\"] = self._type\n        if self.name:\n            attribs[\"name\"] = self.name\n        if self._from:\n            attribs[\"from\"] = self._from\n        if self.last:\n            attribs[\"last\"] = self.last\n\n        return self._createProtocolTreeNode(attribs, None, None)\n\n    def __str__(self):\n        out  = \"Presence:\\n\"\n        if self._type:\n            out += \"Type: %s\\n\" % self._type\n        if self.name:\n            out += \"Name: %s\\n\" % self.name\n        if self._from:\n            out += \"From: %s\\n\" % self._from\n        if self.last:\n            out += \"Last seen: %s\\n\" % self.last\n        return out\n\n    @staticmethod\n    def fromProtocolTreeNode(node):\n        return PresenceProtocolEntity(\n            node.getAttributeValue(\"type\"),\n            node.getAttributeValue(\"name\"),\n            node.getAttributeValue(\"from\"),\n            node.getAttributeValue(\"last\")\n            )\n\n", "description": "The python WhatsApp library", "file_name": "presence.py", "id": "8e2f833b107addb8eafa596208238296", "language": "Python", "project_name": "yowsup", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/tgalal-yowsup/tgalal-yowsup-03795cc/yowsup/layers/protocol_presence/protocolentities/presence.py", "save_time": "", "source": "", "update_at": "2018-03-18T13:01:40Z", "url": "https://github.com/tgalal/yowsup", "wiki": true}