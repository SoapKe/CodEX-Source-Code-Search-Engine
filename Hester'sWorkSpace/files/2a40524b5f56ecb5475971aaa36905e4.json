{"author": "rg3", "code": "\nfrom __future__ import unicode_literals\n\nimport json\nimport sys\nimport hashlib\nimport os.path\n\n\nif len(sys.argv) <= 1:\n    print('Specify the version number as parameter')\n    sys.exit()\nversion = sys.argv[1]\n\nwith open('update/LATEST_VERSION', 'w') as f:\n    f.write(version)\n\nversions_info = json.load(open('update/versions.json'))\nif 'signature' in versions_info:\n    del versions_info['signature']\n\nnew_version = {}\n\nfilenames = {\n    'bin': 'youtube-dl',\n    'exe': 'youtube-dl.exe',\n    'tar': 'youtube-dl-%s.tar.gz' % version}\nbuild_dir = os.path.join('..', '..', 'build', version)\nfor key, filename in filenames.items():\n    url = 'https://yt-dl.org/downloads/%s/%s' % (version, filename)\n    fn = os.path.join(build_dir, filename)\n    with open(fn, 'rb') as f:\n        data = f.read()\n    if not data:\n        raise ValueError('File %s is empty!' % fn)\n    sha256sum = hashlib.sha256(data).hexdigest()\n    new_version[key] = (url, sha256sum)\n\nversions_info['versions'][version] = new_version\nversions_info['latest'] = version\n\nwith open('update/versions.json', 'w') as jsonf:\n    json.dump(versions_info, jsonf, indent=4, sort_keys=True)\n", "comments": "#!/usr/bin/env python3\n", "content": "#!/usr/bin/env python3\nfrom __future__ import unicode_literals\n\nimport json\nimport sys\nimport hashlib\nimport os.path\n\n\nif len(sys.argv) <= 1:\n    print('Specify the version number as parameter')\n    sys.exit()\nversion = sys.argv[1]\n\nwith open('update/LATEST_VERSION', 'w') as f:\n    f.write(version)\n\nversions_info = json.load(open('update/versions.json'))\nif 'signature' in versions_info:\n    del versions_info['signature']\n\nnew_version = {}\n\nfilenames = {\n    'bin': 'youtube-dl',\n    'exe': 'youtube-dl.exe',\n    'tar': 'youtube-dl-%s.tar.gz' % version}\nbuild_dir = os.path.join('..', '..', 'build', version)\nfor key, filename in filenames.items():\n    url = 'https://yt-dl.org/downloads/%s/%s' % (version, filename)\n    fn = os.path.join(build_dir, filename)\n    with open(fn, 'rb') as f:\n        data = f.read()\n    if not data:\n        raise ValueError('File %s is empty!' % fn)\n    sha256sum = hashlib.sha256(data).hexdigest()\n    new_version[key] = (url, sha256sum)\n\nversions_info['versions'][version] = new_version\nversions_info['latest'] = version\n\nwith open('update/versions.json', 'w') as jsonf:\n    json.dump(versions_info, jsonf, indent=4, sort_keys=True)\n", "description": "Command-line program to download videos from YouTube.com and other video sites", "file_name": "add-version.py", "language": "Python", "project_name": "youtube-dl", "quality": "", "save_path": "/home/ubuntu/test_files/clean/python/rg3_youtube-dl/rg3-youtube-dl-6202f08/devscripts/gh-pages/add-version.py", "save_time": "", "source": "", "update_at": "2018-03-07T09:18:39Z", "url": "https://github.com/rg3/youtube-dl", "wiki": false}