{"author": "jakubroztocil", "code": "import pytest\n\nfrom httpie.compat import is_windows\nfrom httpie.output.streams import BINARY_SUPPRESSED_NOTICE\nfrom utils import http, MockEnvironment\nfrom fixtures import BIN_FILE_CONTENT, BIN_FILE_PATH\n\n\n\n\n\n@pytest.mark.skipif(is_windows,\n                    reason='Pretty redirect not supported under Windows')\ndef test_pretty_redirected_stream(httpbin):\n    \"\"\"Test that --stream works with prettified redirected output.\"\"\"\n    with open(BIN_FILE_PATH, 'rb') as f:\n        env = MockEnvironment(colors=256, stdin=f,\n                              stdin_isatty=False,\n                              stdout_isatty=False)\n        r = http('--verbose', '--pretty=all', '--stream', 'GET',\n                 httpbin.url + '/get', env=env)\n    assert BINARY_SUPPRESSED_NOTICE.decode() in r\n\n\ndef test_encoded_stream(httpbin):\n    \"\"\"Test that --stream works with non-prettified\n    redirected terminal output.\"\"\"\n    with open(BIN_FILE_PATH, 'rb') as f:\n        env = MockEnvironment(stdin=f, stdin_isatty=False)\n        r = http('--pretty=none', '--stream', '--verbose', 'GET',\n                 httpbin.url + '/get', env=env)\n    assert BINARY_SUPPRESSED_NOTICE.decode() in r\n\n\ndef test_redirected_stream(httpbin):\n    \"\"\"Test that --stream works with non-prettified\n    redirected terminal output.\"\"\"\n    with open(BIN_FILE_PATH, 'rb') as f:\n        env = MockEnvironment(stdout_isatty=False,\n                              stdin_isatty=False,\n                              stdin=f)\n        r = http('--pretty=none', '--stream', '--verbose', 'GET',\n                 httpbin.url + '/get', env=env)\n    assert BIN_FILE_CONTENT in r\n", "comments": "   test   stream works prettified redirected output         open(bin file path   rb ) f          env   mockenvironment(colors 256  stdin f                                stdin isatty false                                stdout isatty false)         r   http(   verbose      pretty      stream    get                    httpbin url     get   env env)     assert binary suppressed notice decode() r   def test encoded stream(httpbin)         test   stream works non prettified     redirected terminal output         open(bin file path   rb ) f          env   mockenvironment(stdin f  stdin isatty false)         r   http(   pretty none      stream      verbose    get                    httpbin url     get   env env)     assert binary suppressed notice decode() r   def test redirected stream(httpbin)         test   stream works non prettified     redirected terminal output        get httpbin 500s binary post body  ", "content": "import pytest\n\nfrom httpie.compat import is_windows\nfrom httpie.output.streams import BINARY_SUPPRESSED_NOTICE\nfrom utils import http, MockEnvironment\nfrom fixtures import BIN_FILE_CONTENT, BIN_FILE_PATH\n\n\n# GET because httpbin 500s with binary POST body.\n\n\n@pytest.mark.skipif(is_windows,\n                    reason='Pretty redirect not supported under Windows')\ndef test_pretty_redirected_stream(httpbin):\n    \"\"\"Test that --stream works with prettified redirected output.\"\"\"\n    with open(BIN_FILE_PATH, 'rb') as f:\n        env = MockEnvironment(colors=256, stdin=f,\n                              stdin_isatty=False,\n                              stdout_isatty=False)\n        r = http('--verbose', '--pretty=all', '--stream', 'GET',\n                 httpbin.url + '/get', env=env)\n    assert BINARY_SUPPRESSED_NOTICE.decode() in r\n\n\ndef test_encoded_stream(httpbin):\n    \"\"\"Test that --stream works with non-prettified\n    redirected terminal output.\"\"\"\n    with open(BIN_FILE_PATH, 'rb') as f:\n        env = MockEnvironment(stdin=f, stdin_isatty=False)\n        r = http('--pretty=none', '--stream', '--verbose', 'GET',\n                 httpbin.url + '/get', env=env)\n    assert BINARY_SUPPRESSED_NOTICE.decode() in r\n\n\ndef test_redirected_stream(httpbin):\n    \"\"\"Test that --stream works with non-prettified\n    redirected terminal output.\"\"\"\n    with open(BIN_FILE_PATH, 'rb') as f:\n        env = MockEnvironment(stdout_isatty=False,\n                              stdin_isatty=False,\n                              stdin=f)\n        r = http('--pretty=none', '--stream', '--verbose', 'GET',\n                 httpbin.url + '/get', env=env)\n    assert BIN_FILE_CONTENT in r\n", "description": "Modern command line HTTP client \u2013 user-friendly curl alternative with intuitive UI, JSON support, syntax highlighting, wget-like downloads, extensions, etc.  https://httpie.org", "file_name": "test_stream.py", "id": "047f08ac24625923e939efa9df0fa250", "language": "Python", "project_name": "httpie", "quality": "", "save_path": "/home/ubuntu/test_files/clean/network_test/jakubroztocil-httpie/jakubroztocil-httpie-0f4dce9/tests/test_stream.py", "save_time": "", "source": "", "update_at": "2018-03-14T01:39:35Z", "url": "https://github.com/jakubroztocil/httpie", "wiki": false}